(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const style$1="",sharedConfig={};function setHydrateContext(e){sharedConfig.context=e}const equalFn=(e,t)=>e===t,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null};var Owner=null;let Transition=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,t){const r=Listener,n=Owner,s=e.length===0,o=s?UNOWNED:{owned:null,cleanups:null,context:null,owner:t||n},l=s?e:()=>e(()=>untrack(()=>cleanNode(o)));Owner=o,Listener=null;try{return runUpdates(l,!0)}finally{Listener=r,Owner=n}}function createSignal(e,t){t=t?Object.assign({},signalOptions,t):signalOptions;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=s=>(typeof s=="function"&&(s=s(r.value)),writeSignal(r,s));return[readSignal.bind(r),n]}function createComputed(e,t,r){const n=createComputation(e,t,!0,STALE);updateComputation(n)}function createRenderEffect(e,t,r){const n=createComputation(e,t,!1,STALE);updateComputation(n)}function createEffect(e,t,r){runEffects=runUserEffects;const n=createComputation(e,t,!1,STALE);n.user=!0,Effects?Effects.push(n):updateComputation(n)}function createMemo(e,t,r){r=r?Object.assign({},signalOptions,r):signalOptions;const n=createComputation(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,updateComputation(n),readSignal.bind(n)}function batch(e){return runUpdates(e,!1)}function untrack(e){const t=Listener;Listener=null;try{return e()}finally{Listener=t}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function getListener(){return Listener}function readSignal(){const e=Transition;if(this.sources&&(this.state||e))if(this.state===STALE||e)updateComputation(this);else{const t=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=t}if(Listener){const t=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(t)):(Listener.sources=[this],Listener.sourceSlots=[t]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&runUpdates(()=>{for(let s=0;s<e.observers.length;s+=1){const o=e.observers[s],l=Transition&&Transition.running;l&&Transition.disposed.has(o),(l&&!o.tState||!l&&!o.state)&&(o.pure?Updates.push(o):Effects.push(o),o.observers&&markDownstream(o)),l||(o.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),t}function updateComputation(e){if(!e.fn)return;cleanNode(e);const t=Owner,r=Listener,n=ExecCount;Listener=Owner=e,runComputation(e,e.value,n),Listener=r,Owner=t}function runComputation(e,t,r){let n;try{n=e.fn(t)}catch(s){e.pure&&(e.state=STALE),handleError(s)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,n):e.value=n,e.updatedAt=r)}function createComputation(e,t,r,n=STALE,s){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Owner,context:null,pure:r};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(o):Owner.owned=[o]),o}function runTop(e){const t=Transition;if(e.state===0||t)return;if(e.state===PENDING||t)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===STALE||t)updateComputation(e);else if(e.state===PENDING||t){const s=Updates;Updates=null,runUpdates(()=>lookUpstream(e,r[0]),!1),Updates=s}}function runUpdates(e,t){if(Updates)return e();let r=!1;t||(Updates=[]),Effects?r=!0:Effects=[],ExecCount++;try{const n=e();return completeUpdates(r),n}catch(n){Updates||(Effects=null),handleError(n)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const t=Effects;Effects=null,t.length&&runUpdates(()=>runEffects(t),!1)}function runQueue(e){for(let t=0;t<e.length;t++)runTop(e[t])}function runUserEffects(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:runTop(n)}for(sharedConfig.context&&setHydrateContext(),t=0;t<r;t++)runTop(e[t])}function lookUpstream(e,t){const r=Transition;e.state=0;for(let n=0;n<e.sources.length;n+=1){const s=e.sources[n];s.sources&&(s.state===STALE||r?s!==t&&runTop(s):(s.state===PENDING||r)&&lookUpstream(s,t))}}function markDownstream(e){const t=Transition;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=PENDING,n.pure?Updates.push(n):Effects.push(n),n.observers&&markDownstream(n))}}function cleanNode(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const o=s.pop(),l=r.observerSlots.pop();n<s.length&&(o.sourceSlots[l]=n,s[n]=o,r.observerSlots[n]=l)}}if(e.owned){for(t=0;t<e.owned.length;t++)cleanNode(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function castError(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function handleError(e){throw e=castError(e),e}const FALLBACK=Symbol("fallback");function dispose(e){for(let t=0;t<e.length;t++)e[t]()}function mapArray(e,t,r={}){let n=[],s=[],o=[],l=0,i=t.length>1?[]:null;return onCleanup(()=>dispose(o)),()=>{let c=e()||[],a,u;return c[$TRACK],untrack(()=>{let y=c.length,f,d,m,k,_,E,A,P,T;if(y===0)l!==0&&(dispose(o),o=[],n=[],s=[],l=0,i&&(i=[])),r.fallback&&(n=[FALLBACK],s[0]=createRoot(R=>(o[0]=R,r.fallback())),l=1);else if(l===0){for(s=new Array(y),u=0;u<y;u++)n[u]=c[u],s[u]=createRoot(w);l=y}else{for(m=new Array(y),k=new Array(y),i&&(_=new Array(y)),E=0,A=Math.min(l,y);E<A&&n[E]===c[E];E++);for(A=l-1,P=y-1;A>=E&&P>=E&&n[A]===c[P];A--,P--)m[P]=s[A],k[P]=o[A],i&&(_[P]=i[A]);for(f=new Map,d=new Array(P+1),u=P;u>=E;u--)T=c[u],a=f.get(T),d[u]=a===void 0?-1:a,f.set(T,u);for(a=E;a<=A;a++)T=n[a],u=f.get(T),u!==void 0&&u!==-1?(m[u]=s[a],k[u]=o[a],i&&(_[u]=i[a]),u=d[u],f.set(T,u)):o[a]();for(u=E;u<y;u++)u in m?(s[u]=m[u],o[u]=k[u],i&&(i[u]=_[u],i[u](u))):s[u]=createRoot(w);s=s.slice(0,l=y),n=c.slice(0)}return s});function w(y){if(o[u]=y,i){const[f,d]=createSignal(u);return i[u]=d,t(c[u],f)}return t(c[u])}}}function createComponent(e,t){return untrack(()=>e(t||{}))}function trueFn(){return!0}const propTraps={get(e,t,r){return t===$PROXY?r:e.get(t)},has(e,t){return e.has(t)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:trueFn,deleteProperty:trueFn}},ownKeys(e){return e.keys()}};function resolveSource(e){return(e=typeof e=="function"?e():e)?e:{}}function mergeProps(...e){if(e.some(r=>r&&($PROXY in r||typeof r=="function")))return new Proxy({get(r){for(let n=e.length-1;n>=0;n--){const s=resolveSource(e[n])[r];if(s!==void 0)return s}},has(r){for(let n=e.length-1;n>=0;n--)if(r in resolveSource(e[n]))return!0;return!1},keys(){const r=[];for(let n=0;n<e.length;n++)r.push(...Object.keys(resolveSource(e[n])));return[...new Set(r)]}},propTraps);const t={};for(let r=e.length-1;r>=0;r--)if(e[r]){const n=Object.getOwnPropertyDescriptors(e[r]);for(const s in n)s in t||Object.defineProperty(t,s,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const l=(e[o]||{})[s];if(l!==void 0)return l}}})}return t}function splitProps(e,...t){const r=new Set(t.flat()),n=Object.getOwnPropertyDescriptors(e),s=$PROXY in e;s||t.push(Object.keys(n).filter(l=>!r.has(l)));const o=t.map(l=>{const i={};for(let c=0;c<l.length;c++){const a=l[c];!s&&!(a in e)||Object.defineProperty(i,a,n[a]?n[a]:{get(){return e[a]},set(){return!0},enumerable:!0})}return i});return s&&o.push(new Proxy({get(l){return r.has(l)?void 0:e[l]},has(l){return r.has(l)?!1:l in e},keys(){return Object.keys(e).filter(l=>!r.has(l))}},propTraps)),o}function For(e){const t="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,t||void 0))}function Show(e){let t=!1;const r=e.keyed,n=createMemo(()=>e.when,void 0,{equals:(s,o)=>t?s===o:!s==!o});return createMemo(()=>{const s=n();if(s){const o=e.children,l=typeof o=="function"&&o.length>0;return t=r||l,l?untrack(()=>o(s)):o}return e.fallback})}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function reconcileArrays(e,t,r){let n=r.length,s=t.length,o=n,l=0,i=0,c=t[s-1].nextSibling,a=null;for(;l<s||i<o;){if(t[l]===r[i]){l++,i++;continue}for(;t[s-1]===r[o-1];)s--,o--;if(s===l){const u=o<n?i?r[i-1].nextSibling:r[o-i]:c;for(;i<o;)e.insertBefore(r[i++],u)}else if(o===i)for(;l<s;)(!a||!a.has(t[l]))&&t[l].remove(),l++;else if(t[l]===r[o-1]&&r[i]===t[s-1]){const u=t[--s].nextSibling;e.insertBefore(r[i++],t[l++].nextSibling),e.insertBefore(r[--o],u),t[s]=r[o]}else{if(!a){a=new Map;let w=i;for(;w<o;)a.set(r[w],w++)}const u=a.get(t[l]);if(u!=null)if(i<u&&u<o){let w=l,y=1,f;for(;++w<s&&w<o&&!((f=a.get(t[w]))==null||f!==u+y);)y++;if(y>u-i){const d=t[l];for(;i<u;)e.insertBefore(r[i++],d)}else e.replaceChild(r[i++],t[l++])}else l++;else t[l++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,t,r,n={}){let s;return createRoot(o=>{s=o,t===document?e():insert(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{s(),t.textContent=""}}function template(e,t,r){const n=document.createElement("template");n.innerHTML=e;let s=n.content.firstChild;return r&&(s=s.firstChild),s}function delegateEvents(e,t=window.document){const r=t[$$EVENTS]||(t[$$EVENTS]=new Set);for(let n=0,s=e.length;n<s;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,eventHandler))}}function setAttribute(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function setAttributeNS(e,t,r,n){n==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,n)}function className(e,t){t==null?e.removeAttribute("class"):e.className=t}function addEventListener$1(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const s=r[0];e.addEventListener(t,r[0]=o=>s.call(e,r[1],o))}else e.addEventListener(t,r)}function classList(e,t,r={}){const n=Object.keys(t||{}),s=Object.keys(r);let o,l;for(o=0,l=s.length;o<l;o++){const i=s[o];!i||i==="undefined"||t[i]||(toggleClassKey(e,i,!1),delete r[i])}for(o=0,l=n.length;o<l;o++){const i=n[o],c=!!t[i];!i||i==="undefined"||r[i]===c||!c||(toggleClassKey(e,i,!0),r[i]=c)}return r}function style(e,t,r){if(!t)return r?setAttribute(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let s,o;for(o in r)t[o]==null&&n.removeProperty(o),delete r[o];for(o in t)s=t[o],s!==r[o]&&(n.setProperty(o,s),r[o]=s);return r}function spread(e,t={},r,n){const s={};return n||createRenderEffect(()=>s.children=insertExpression(e,t.children,s.children)),createRenderEffect(()=>t.ref&&t.ref(e)),createRenderEffect(()=>assign(e,t,r,!0,s,!0)),s}function use(e,t,r){return untrack(()=>e(t,r))}function insert(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return insertExpression(e,t,n,r);createRenderEffect(s=>insertExpression(e,t(),s,r),n)}function assign(e,t,r,n,s={},o=!1){t||(t={});for(const l in s)if(!(l in t)){if(l==="children")continue;s[l]=assignProp(e,l,null,s[l],r,o)}for(const l in t){if(l==="children"){n||insertExpression(e,t.children);continue}const i=t[l];s[l]=assignProp(e,l,i,s[l],r,o)}}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function toggleClassKey(e,t,r){const n=t.trim().split(/\s+/);for(let s=0,o=n.length;s<o;s++)e.classList.toggle(n[s],r)}function assignProp(e,t,r,n,s,o){let l,i,c;if(t==="style")return style(e,r,n);if(t==="classList")return classList(e,r,n);if(r===n)return n;if(t==="ref")o||r(e);else if(t.slice(0,3)==="on:"){const a=t.slice(3);n&&e.removeEventListener(a,n),r&&e.addEventListener(a,r)}else if(t.slice(0,10)==="oncapture:"){const a=t.slice(10);n&&e.removeEventListener(a,n,!0),r&&e.addEventListener(a,r,!0)}else if(t.slice(0,2)==="on"){const a=t.slice(2).toLowerCase(),u=DelegatedEvents.has(a);if(!u&&n){const w=Array.isArray(n)?n[0]:n;e.removeEventListener(a,w)}(u||r)&&(addEventListener$1(e,a,r,u),u&&delegateEvents([a]))}else if((c=ChildProperties.has(t))||!s&&(PropAliases[t]||(i=Properties.has(t)))||(l=e.nodeName.includes("-")))t==="class"||t==="className"?className(e,r):l&&!i&&!c?e[toPropertyName(t)]=r:e[PropAliases[t]||t]=r;else{const a=s&&t.indexOf(":")>-1&&SVGNamespace[t.split(":")[0]];a?setAttributeNS(e,a,t,r):setAttribute(e,Aliases[t]||t,r)}return r}function eventHandler(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}}),sharedConfig.registry&&!sharedConfig.done&&(sharedConfig.done=!0,document.querySelectorAll("[id^=pl-]").forEach(n=>n.remove()));r!==null;){const n=r[t];if(n&&!r.disabled){const s=r[`${t}Data`];if(s!==void 0?n.call(r,s,e):n.call(r,e),e.cancelBubble)return}r=r.host&&r.host!==r&&r.host instanceof Node?r.host:r.parentNode}}function insertExpression(e,t,r,n,s){for(sharedConfig.context&&!r&&(r=[...e.childNodes]);typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,l=n!==void 0;if(e=l&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(sharedConfig.context)return r;if(o==="number"&&(t=t.toString()),l){let i=r[0];i&&i.nodeType===3?i.data=t:i=document.createTextNode(t),r=cleanChildren(e,r,n,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean"){if(sharedConfig.context)return r;r=cleanChildren(e,r,n)}else{if(o==="function")return createRenderEffect(()=>{let i=t();for(;typeof i=="function";)i=i();r=insertExpression(e,i,r,n)}),()=>r;if(Array.isArray(t)){const i=[],c=r&&Array.isArray(r);if(normalizeIncomingArray(i,t,r,s))return createRenderEffect(()=>r=insertExpression(e,i,r,n,!0)),()=>r;if(sharedConfig.context){if(!i.length)return r;for(let a=0;a<i.length;a++)if(i[a].parentNode)return r=i}if(i.length===0){if(r=cleanChildren(e,r,n),l)return r}else c?r.length===0?appendNodes(e,i,n):reconcileArrays(e,r,i):(r&&cleanChildren(e),appendNodes(e,i));r=i}else if(t instanceof Node){if(sharedConfig.context&&t.parentNode)return r=l?[t]:t;if(Array.isArray(r)){if(l)return r=cleanChildren(e,r,n,t);cleanChildren(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function normalizeIncomingArray(e,t,r,n){let s=!1;for(let o=0,l=t.length;o<l;o++){let i=t[o],c=r&&r[o];if(i instanceof Node)e.push(i);else if(!(i==null||i===!0||i===!1))if(Array.isArray(i))s=normalizeIncomingArray(e,i,c)||s;else if(typeof i=="function")if(n){for(;typeof i=="function";)i=i();s=normalizeIncomingArray(e,Array.isArray(i)?i:[i],Array.isArray(c)?c:[c])||s}else e.push(i),s=!0;else{const a=String(i);c&&c.nodeType===3&&c.data===a?e.push(c):e.push(document.createTextNode(a))}}return s}function appendNodes(e,t,r=null){for(let n=0,s=t.length;n<s;n++)e.insertBefore(t[n],r)}function cleanChildren(e,t,r,n){if(r===void 0)return e.textContent="";const s=n||document.createTextNode("");if(t.length){let o=!1;for(let l=t.length-1;l>=0;l--){const i=t[l];if(s!==i){const c=i.parentNode===e;!o&&!l?c?e.replaceChild(s,i):e.insertBefore(s,r):c&&i.remove()}else o=!0}}else e.insertBefore(s,r);return[s]}function unmute(e,t=!1,r=!1){let n;document.hidden!==void 0?n={hidden:"hidden",visibilitychange:"visibilitychange"}:document.webkitHidden!==void 0?n={hidden:"webkitHidden",visibilitychange:"webkitvisibilitychange"}:document.mozHidden!==void 0?n={hidden:"mozHidden",visibilitychange:"mozvisibilitychange"}:document.msHidden!==void 0&&(n={hidden:"msHidden",visibilitychange:"msvisibilitychange"});function s(O,W,M,L,p){for(let g=0;g<W.length;++g)O.addEventListener(W[g],M,{capture:L,passive:p})}function o(O,W,M,L,p){for(let g=0;g<W.length;++g)O.removeEventListener(W[g],M,{capture:L,passive:p})}function l(){}let i=navigator.userAgent.toLowerCase(),c=r||i.indexOf("iphone")>=0&&i.indexOf("like iphone")<0||i.indexOf("ipad")>=0&&i.indexOf("like ipad")<0||i.indexOf("ipod")>=0&&i.indexOf("like ipod")<0||i.indexOf("mac os x")>=0&&navigator.maxTouchPoints>0,a=!0;function u(){let O=!!(t||(!n||!document[n.hidden])&&(!c||document.hasFocus()));O!==a&&(a=O,E(!1),f())}function w(){u()}n&&s(document,[n.visibilitychange],w,!0,!0);function y(O){O&&O.target!==window||u()}c&&s(window,["focus","blur"],y,!0,!0);function f(){if(a){if(e.state!=="running"&&e.state!=="closed"&&T){let O=e.resume();O&&O.then(l,l).catch(l)}}else if(e.state==="running"){let O=e.suspend();O&&O.then(l,l).catch(l)}}function d(O){(!O||!O.unmute_handled)&&(O.unmute_handled=!0,f())}s(e,["statechange"],d,!0,!0),e.onstatechange||(e.onstatechange=d);let m=null;function k(O,W){let M=W;for(;O>1;O--)M+=W;return M}let _="data:audio/mpeg;base64,//uQx"+k(23,"A")+"WGluZwAAAA8AAAACAAACcQCA"+k(16,"gICA")+k(66,"/")+"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI"+k(320,"A")+"//sQxAADgnABGiAAQBCqgCRMAAgEAH"+k(15,"/")+"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq"+k(18,"/")+"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw"+k(97,"V")+"Q==";function E(O){if(c)if(a){if(O){if(!m){let W=document.createElement("div");W.innerHTML="<audio x-webkit-airplay='deny'></audio>",m=W.children.item(0),m.controls=!1,m.disableRemotePlayback=!0,m.preload="auto",m.src=_,m.loop=!0,m.load()}if(m.paused){let W=m.play();W&&W.then(l,A).catch(A)}}}else A()}function A(){m&&(m.src="about:blank",m.load(),m=null)}const P=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let T=!1;function R(){T=!0,E(!0),f()}return s(window,P,R,!0,!0),{dispose:function(){A(),n&&o(document,[n.visibilitychange],w,!0,!0),c&&o(window,["focus","blur"],y,!0,!0),o(window,P,R,!0,!0),o(e,["statechange"],d,!0,!0),e.onstatechange===d&&(e.onstatechange=null)}}}const audioContext=new AudioContext;unmute(audioContext);const _tmpl$$3=template('<label role="button" tabindex="0" class="audio-input"><span>load audio</span><input type="file" style="display: none;" accept=".mp3, .wav, .m4a"></label>'),AudioInput=e=>{let t;return(()=>{const r=_tmpl$$3.cloneNode(!0),n=r.firstChild,s=n.nextSibling;r.addEventListener("keypress",l=>{["Space","Enter"].includes(l.code)&&(l.preventDefault(),t?.click())}),s.addEventListener("change",l=>{const[i]=[...l.currentTarget.files||[]];clipOfFile(i).then(e.onChange)});const o=t;return typeof o=="function"?use(o,s):t=s,r})()},clipOfFile=async e=>({name:e.name,buffer:await audioContext.decodeAudioData(await arrayBufferOfFile(e))}),arrayBufferOfFile=e=>new Promise((t,r)=>{const n=new FileReader;n.onloadend=s=>{if(!(s.target?.result instanceof ArrayBuffer)){r();return}t(s.target.result)},n.readAsArrayBuffer(e)}),useAnimationFrame=e=>{let t;const r=()=>{e(),t=requestAnimationFrame(r)};onMount(()=>{t=requestAnimationFrame(r)}),onCleanup(()=>{cancelAnimationFrame(t)})},player=function(){const[r,n]=createSignal(void 0),[s,o]=createSignal(0);let l,i;const c=(f,d={start:0,end:1})=>{const m=f.duration*d.start,_=f.duration*d.end-m;a(),o(m),n(audioContext.currentTime),i=audioContext.createGain(),i.connect(audioContext.destination),i.gain.setValueAtTime(0,audioContext.currentTime),i.gain.linearRampToValueAtTime(1,audioContext.currentTime+.001);const E=audioContext.currentTime+_;i.gain.setValueAtTime(1,E-.001),i.gain.linearRampToValueAtTime(0,E);const A=audioContext.createBufferSource();A.buffer=f,A.connect(i),A.onended=a,A.start(0,m,_),l=A},a=()=>{if(!l||!i)return;const f=audioContext.currentTime+.001;i.gain.cancelScheduledValues(audioContext.currentTime),i.gain.setValueAtTime(1,audioContext.currentTime),i.gain.linearRampToValueAtTime(0,f),l.onended=null,l.stop(f),l=void 0,n(void 0)},u=()=>r()!==void 0,[w,y]=createSignal(0);return useAnimationFrame(()=>{const f=r();if(!f||!l?.buffer)return 0;const m=audioContext.currentTime-f+s();y(m/l.buffer.duration)}),{play:c,playing:u,stop:a,startedAt:r,progress:w}}(),sortedIndex=(e,t)=>{let r=0,n=e.length;for(;r<=n;){const s=Math.floor((r+n)/2);if(e[s]<t)r=s+1;else if(e[s]>t)n=s-1;else return s}return r},$RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$NAME=Symbol("store-name");function wrap$1(e,t){let r=e[$PROXY];if(!r&&(Object.defineProperty(e,$PROXY,{value:r=new Proxy(e,proxyTraps$1)}),!Array.isArray(e))){const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let o=0,l=n.length;o<l;o++){const i=n[o];if(s[i].get){const c=s[i].get.bind(r);Object.defineProperty(e,i,{enumerable:s[i].enumerable,get:c})}}}return r}function isWrappable(e){let t;return e!=null&&typeof e=="object"&&(e[$PROXY]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function unwrap(e,t=new Set){let r,n,s,o;if(r=e!=null&&e[$RAW])return r;if(!isWrappable(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let l=0,i=e.length;l<i;l++)s=e[l],(n=unwrap(s,t))!==s&&(e[l]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const l=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let c=0,a=l.length;c<a;c++)o=l[c],!i[o].get&&(s=e[o],(n=unwrap(s,t))!==s&&(e[o]=n))}return e}function getDataNodes(e){let t=e[$NODE];return t||Object.defineProperty(e,$NODE,{value:t={}}),t}function getDataNode(e,t,r){return e[t]||(e[t]=createDataNode(r))}function proxyDescriptor$1(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===$PROXY||t===$NODE||t===$NAME||(delete r.value,delete r.writable,r.get=()=>e[$PROXY][t]),r}function trackSelf(e){if(getListener()){const t=getDataNodes(e);(t._||(t._=createDataNode()))()}}function ownKeys(e){return trackSelf(e),Reflect.ownKeys(e)}function createDataNode(e){const[t,r]=createSignal(e,{equals:!1,internal:!0});return t.$=r,t}const proxyTraps$1={get(e,t,r){if(t===$RAW)return e;if(t===$PROXY)return r;if(t===$TRACK)return trackSelf(e),r;const n=getDataNodes(e),s=n.hasOwnProperty(t);let o=s?n[t]():e[t];if(t===$NODE||t==="__proto__")return o;if(!s){const l=Object.getOwnPropertyDescriptor(e,t);getListener()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(l&&l.get)&&(o=getDataNode(n,t,o)())}return isWrappable(o)?wrap$1(o):o},has(e,t){return t===$RAW||t===$PROXY||t===$TRACK||t===$NODE||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(e,t,r,n=!1){if(!n&&e[t]===r)return;const s=e[t],o=e.length;r===void 0?delete e[t]:e[t]=r;let l=getDataNodes(e),i;(i=getDataNode(l,t,s))&&i.$(()=>r),Array.isArray(e)&&e.length!==o&&(i=getDataNode(l,"length",o))&&i.$(e.length),(i=l._)&&i.$()}function mergeStoreNode(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const s=r[n];setProperty(e,s,t[s])}}function updateArray(e,t){if(typeof t=="function"&&(t=t(e)),t=unwrap(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const s=t[r];e[r]!==s&&setProperty(e,r,s)}setProperty(e,"length",n)}else mergeStoreNode(e,t)}function updatePath(e,t,r=[]){let n,s=e;if(t.length>1){n=t.shift();const l=typeof n,i=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)updatePath(e,[n[c]].concat(t),r);return}else if(i&&l==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&updatePath(e,[c].concat(t),r);return}else if(i&&l==="object"){const{from:c=0,to:a=e.length-1,by:u=1}=n;for(let w=c;w<=a;w+=u)updatePath(e,[w].concat(t),r);return}else if(t.length>1){updatePath(e[n],t,[n].concat(r));return}s=e[n],r=[n].concat(r)}let o=t[0];typeof o=="function"&&(o=o(s,r),o===s)||n===void 0&&o==null||(o=unwrap(o),n===void 0||isWrappable(s)&&isWrappable(o)&&!Array.isArray(o)?mergeStoreNode(s,o):setProperty(e,n,o))}function createStore(...[e,t]){const r=unwrap(e||{}),n=Array.isArray(r),s=wrap$1(r);function o(...l){batch(()=>{n&&l.length===1?updateArray(r,l[0]):updatePath(r,l)})}return[s,o]}const $ROOT=Symbol("store-root");function applyState(e,t,r,n,s){const o=t[r];if(e===o)return;if(!isWrappable(e)||!isWrappable(o)||s&&e[s]!==o[s]){if(e!==o){if(r===$ROOT)return e;setProperty(t,r,e)}return}if(Array.isArray(e)){if(e.length&&o.length&&(!n||s&&e[0][s]!=null)){let c,a,u,w,y,f,d,m;for(u=0,w=Math.min(o.length,e.length);u<w&&(o[u]===e[u]||s&&o[u][s]===e[u][s]);u++)applyState(e[u],o,u,n,s);const k=new Array(e.length),_=new Map;for(w=o.length-1,y=e.length-1;w>=u&&y>=u&&(o[w]===e[y]||s&&o[w][s]===e[y][s]);w--,y--)k[y]=o[w];if(u>y||u>w){for(a=u;a<=y;a++)setProperty(o,a,e[a]);for(;a<e.length;a++)setProperty(o,a,k[a]),applyState(e[a],o,a,n,s);o.length>e.length&&setProperty(o,"length",e.length);return}for(d=new Array(y+1),a=y;a>=u;a--)f=e[a],m=s?f[s]:f,c=_.get(m),d[a]=c===void 0?-1:c,_.set(m,a);for(c=u;c<=w;c++)f=o[c],m=s?f[s]:f,a=_.get(m),a!==void 0&&a!==-1&&(k[a]=o[c],a=d[a],_.set(m,a));for(a=u;a<e.length;a++)a in k?(setProperty(o,a,k[a]),applyState(e[a],o,a,n,s)):setProperty(o,a,e[a])}else for(let c=0,a=e.length;c<a;c++)applyState(e[c],o,c,n,s);o.length>e.length&&setProperty(o,"length",e.length);return}const l=Object.keys(e);for(let c=0,a=l.length;c<a;c++)applyState(e[l[c]],o,l[c],n,s);const i=Object.keys(o);for(let c=0,a=i.length;c<a;c++)e[i[c]]===void 0&&setProperty(o,i[c],void 0)}function reconcile(e,t={}){const{merge:r,key:n="id"}=t,s=unwrap(e);return o=>{if(!isWrappable(o)||!isWrappable(s))return s;const l=applyState(s,{[$ROOT]:o},$ROOT,r,n);return l===void 0?o:l}}const defaultState={cursor:0,deleting:!1,editing:!1,cursorControlsVisible:!1,clip:void 0,regions:[{start:0,end:1}]},[store,setStore]=createStore(defaultState),state=store,dispatch={setClip:e=>setStore("clip",e),clearClip:()=>setStore(defaultState),setCursor:e=>setStore("cursor",e),showCursorControls:()=>setStore("cursorControlsVisible",!0),hideCursorControls:()=>setStore("cursorControlsVisible",!1),startEditing:()=>setStore("editing",!0),stopEditing:()=>setStore("editing",!1),startDeleting:()=>setStore("deleting",!0),stopDeleting:()=>setStore("deleting",!1),slice:e=>{const t=sortedIndex(store.regions.map(r=>r.start),e);store.regions[t]?.start!==e&&setStore("regions",r=>[...r.slice(0,t).map((n,s)=>s===t-1?{start:n.start,end:e}:n),{start:e,end:r[t]?.start||1},...r.slice(t)])},healSlice:e=>{setStore("regions",t=>[...t.slice(0,e).map((r,n)=>n===e-1?{start:r.start,end:t[e+1]?.start||1}:r),...t.slice(e+1)])},clearSlices:()=>setStore("regions",defaultState.regions)};window.state=state;window.dispatch=dispatch;/**
 * solid-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 *//**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var props=["bottom","height","left","right","top","width"],rectChanged=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),props.some(function(n){return t[n]!==r[n]})},observedNodes=new Map,rafId,run=function e(){var t=[];observedNodes.forEach(function(r,n){var s=n.getBoundingClientRect();rectChanged(s,r.rect)&&(r.rect=s,t.push(r))}),t.forEach(function(r){r.callbacks.forEach(function(n){return n(r.rect)})}),rafId=window.requestAnimationFrame(e)};function observeRect(e,t){return{observe:function(){var n=observedNodes.size===0;observedNodes.has(e)?observedNodes.get(e).callbacks.push(t):observedNodes.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&run()},unobserve:function(){var n=observedNodes.get(e);if(n){var s=n.callbacks.indexOf(t);s>=0&&n.callbacks.splice(s,1),n.callbacks.length||observedNodes.delete(e),observedNodes.size||cancelAnimationFrame(rafId)}}}}function memo(e,t,r){let n=[],s;return()=>{let o;r.key&&r.debug!=null&&r.debug()&&(o=Date.now());const l=e();if(!(l.length!==n.length||l.some((a,u)=>n[u]!==a)))return s;n=l;let c;if(r.key&&r.debug!=null&&r.debug()&&(c=Date.now()),s=t(...l),r==null||r.onChange==null||r.onChange(s),r.key&&r.debug!=null&&r.debug()){const a=Math.round((Date.now()-o)*100)/100,u=Math.round((Date.now()-c)*100)/100,w=u/16,y=(f,d)=>{for(f=String(f);f.length<d;)f=" "+f;return f};console.info("%c\u23F1 "+y(u,5)+" /"+y(a,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*w,120))+"deg 100% 31%);",r?.key)}return s}}const defaultKeyExtractor=e=>e,defaultRangeExtractor=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let s=t;s<=r;s++)n.push(s);return n},observeElementRect=(e,t)=>{const r=observeRect(e.scrollElement,n=>{t(n)});if(!!e.scrollElement)return t(e.scrollElement.getBoundingClientRect()),r.observe(),()=>{r.unobserve()}},observeElementOffset=(e,t)=>{const r=()=>t(e.scrollElement[e.options.horizontal?"scrollLeft":"scrollTop"]);if(!!e.scrollElement)return r(),e.scrollElement.addEventListener("scroll",r,{capture:!1,passive:!0}),()=>{e.scrollElement.removeEventListener("scroll",r)}},measureElement=(e,t)=>e.getBoundingClientRect()[t.options.horizontal?"width":"height"],elementScroll=(e,t,r)=>{var n;(n=r.scrollElement)==null||n.scrollTo({[r.options.horizontal?"left":"top"]:e,behavior:t?"smooth":void 0})};class Virtualizer{constructor(t){var r=this;this.unsubs=[],this.scrollElement=null,this.measurementsCache=[],this.itemMeasurementsCache={},this.pendingMeasuredCacheIndexes=[],this.measureElementCache={},this.setOptions=n=>{Object.entries(n).forEach(s=>{let[o,l]=s;typeof l>"u"&&delete n[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:defaultKeyExtractor,rangeExtractor:defaultRangeExtractor,enableSmoothScroll:!0,onChange:()=>{},measureElement,initialRect:{width:0,height:0},...n}},this.notify=()=>{var n,s;(n=(s=this.options).onChange)==null||n.call(s,this)},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[]},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{const n=this.options.getScrollElement();this.scrollElement!==n&&(this.cleanup(),this.scrollElement=n,this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.notify()})),this.unsubs.push(this.options.observeElementOffset(this,s=>{this.scrollOffset=s,this.notify()})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurements=memo(()=>[this.options.count,this.options.paddingStart,this.options.getItemKey,this.itemMeasurementsCache],(n,s,o,l)=>{const i=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,i);for(let a=i;a<n;a++){const u=o(a),w=l[u],y=c[a-1]?c[a-1].end:s,f=typeof w=="number"?w:this.options.estimateSize(a),d=y+f;c[a]={index:a,start:y,size:f,end:d,key:u}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=memo(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,s,o)=>calculateRange({measurements:n,outerSize:s,scrollOffset:o}),{key:!1,debug:()=>this.options.debug}),this.getIndexes=memo(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,s,o,l)=>n({...s,overscan:o,count:l}),{key:!1}),this.getVirtualItems=memo(()=>[this.getIndexes(),this.getMeasurements(),this.options.measureElement],(n,s,o)=>{const l=u=>w=>{var y;const f=this.measurementsCache[u];if(!w)return;const d=o(w,this),m=(y=this.itemMeasurementsCache[f.key])!=null?y:f.size;d!==m&&(f.start<this.scrollOffset&&(this.destinationOffset||this._scrollToOffset(this.scrollOffset+(d-m),!1)),this.pendingMeasuredCacheIndexes.push(u),this.itemMeasurementsCache={...this.itemMeasurementsCache,[f.key]:d},this.notify())},i=[],c={};for(let u=0,w=n.length;u<w;u++){var a;const y=n[u],d={...s[y],measureElement:c[y]=(a=this.measureElementCache[y])!=null?a:l(y)};i.push(d)}return this.measureElementCache=c,i},{key:!1}),this.scrollToOffset=function(n,s){let{align:o}=s===void 0?{align:"start"}:s;const l=()=>{const i=r.scrollOffset,c=r.getSize();o==="auto"&&(n<=i?o="start":n>=i+c?o="end":o="start"),o==="start"?r._scrollToOffset(n,!0):o==="end"?r._scrollToOffset(n-c,!0):o==="center"&&r._scrollToOffset(n-c/2,!0)};l(),requestAnimationFrame(()=>{l()})},this.scrollToIndex=function(n,s){let{align:o,...l}=s===void 0?{align:"auto"}:s;const i=r.getMeasurements(),c=r.scrollOffset,a=r.getSize(),{count:u}=r.options,w=i[Math.max(0,Math.min(n,u-1))];if(!w)return;if(o==="auto")if(w.end>=c+a-r.options.scrollPaddingEnd)o="end";else if(w.start<=c+r.options.scrollPaddingStart)o="start";else return;const y=o==="end"?w.end+r.options.scrollPaddingEnd:w.start-r.options.scrollPaddingStart;r.scrollToOffset(y,{align:o,...l})},this.getTotalSize=()=>{var n;return(((n=this.getMeasurements()[this.options.count-1])==null?void 0:n.end)||this.options.paddingStart)+this.options.paddingEnd},this._scrollToOffset=(n,s)=>{clearTimeout(this.scrollCheckFrame),this.destinationOffset=n,this.options.scrollToFn(n,this.options.enableSmoothScroll&&s,this);let o;const l=()=>{let i=this.scrollOffset;this.scrollCheckFrame=o=setTimeout(()=>{if(this.scrollCheckFrame===o){if(this.scrollOffset===i){this.destinationOffset=void 0;return}i=this.scrollOffset,l()}},100)};l()},this.measure=()=>{this.itemMeasurementsCache={},this.notify()},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset}}const findNearestBinarySearch=(e,t,r,n)=>{for(;e<=t;){const s=(e+t)/2|0,o=r(s);if(o<n)e=s+1;else if(o>n)t=s-1;else return s}return e>0?e-1:0};function calculateRange(e){let{measurements:t,outerSize:r,scrollOffset:n}=e;const s=t.length-1,l=findNearestBinarySearch(0,s,c=>t[c].start,n);let i=l;for(;i<s&&t[i].end<n+r;)i++;return{startIndex:l,endIndex:i}}function createVirtualizerBase(e){const t=mergeProps(e),r=new Virtualizer(t),[n,s]=createStore(r.getVirtualItems()),[o,l]=createSignal(r.getTotalSize()),i={get(a,u){switch(u){case"getVirtualItems":return()=>n;case"getTotalSize":return()=>o();default:return Reflect.get(a,u)}}},c=new Proxy(r,i);return c.setOptions(t),onMount(()=>{const a=c._didMount();c._willUpdate(),onCleanup(a)}),createComputed(()=>{c.setOptions(mergeProps(t,e,{onChange:a=>{a._willUpdate(),s(reconcile(a.getVirtualItems(),{key:"index"})),l(a.getTotalSize()),e.onChange==null||e.onChange(a)}})),c.measure()}),c}function createVirtualizer(e){return createVirtualizerBase(mergeProps({observeElementRect,observeElementOffset,scrollToFn:elementScroll},e))}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},workerpool$1={exports:{}};/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 6.4.0
 * @date    2023-02-24
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */(function(module,exports){(function(t,r){module.exports=r()})(typeof self<"u"?self:commonjsGlobal,function(){return function(){var __webpack_modules__={345:function(e,t,r){var n=r(219),s=r(751),o=r(828),l=r(833),i=new l;function c(f,d){typeof f=="string"?this.script=f||null:(this.script=null,d=f),this.workers=[],this.tasks=[],d=d||{},this.forkArgs=Object.freeze(d.forkArgs||[]),this.forkOpts=Object.freeze(d.forkOpts||{}),this.workerThreadOpts=Object.freeze(d.workerThreadOpts||{}),this.debugPortStart=d.debugPortStart||43210,this.nodeWorker=d.nodeWorker,this.workerType=d.workerType||d.nodeWorker||"auto",this.maxQueueSize=d.maxQueueSize||1/0,this.workerTerminateTimeout=d.workerTerminateTimeout||1e3,this.onCreateWorker=d.onCreateWorker||function(){return null},this.onTerminateWorker=d.onTerminateWorker||function(){return null},d&&"maxWorkers"in d?(a(d.maxWorkers),this.maxWorkers=d.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),d&&"minWorkers"in d&&(d.minWorkers==="max"?this.minWorkers=this.maxWorkers:(u(d.minWorkers),this.minWorkers=d.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&s.ensureWorkerThreads()}c.prototype.exec=function(f,d,m){if(d&&!Array.isArray(d))throw new TypeError('Array expected as argument "params"');if(typeof f=="string"){var k=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var _=this.tasks,E={method:f,params:d,resolver:k,timeout:null,options:m};_.push(E);var A=k.promise.timeout;return k.promise.timeout=function(T){return _.indexOf(E)!==-1?(E.timeout=T,k.promise):A.call(k.promise,T)},this._next(),k.promise}else{if(typeof f=="function")return this.exec("run",[String(f),d]);throw new TypeError('Function or string expected as argument "method"')}},c.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var f=this;return this.exec("methods").then(function(d){var m={};return d.forEach(function(k){m[k]=function(){return f.exec(k,Array.prototype.slice.call(arguments))}}),m})},c.prototype._next=function(){if(this.tasks.length>0){var f=this._getWorker();if(f){var d=this,m=this.tasks.shift();if(m.resolver.promise.pending){var k=f.exec(m.method,m.params,m.resolver,m.options).then(d._boundNext).catch(function(){if(f.terminated)return d._removeWorker(f)}).then(function(){d._next()});typeof m.timeout=="number"&&k.timeout(m.timeout)}else d._next()}}},c.prototype._getWorker=function(){for(var f=this.workers,d=0;d<f.length;d++){var m=f[d];if(m.busy()===!1)return m}return f.length<this.maxWorkers?(m=this._createWorkerHandler(),f.push(m),m):null},c.prototype._removeWorker=function(f){var d=this;return i.releasePort(f.debugPort),this._removeWorkerFromList(f),this._ensureMinWorkers(),new n(function(m,k){f.terminate(!1,function(_){d.onTerminateWorker({forkArgs:f.forkArgs,forkOpts:f.forkOpts,workerThreadOpts:f.workerThreadOpts,script:f.script}),_?k(_):m(f)})})},c.prototype._removeWorkerFromList=function(f){var d=this.workers.indexOf(f);d!==-1&&this.workers.splice(d,1)},c.prototype.terminate=function(f,d){var m=this;this.tasks.forEach(function(P){P.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var k=function(T){i.releasePort(T.debugPort),this._removeWorkerFromList(T)},_=k.bind(this),E=[],A=this.workers.slice();return A.forEach(function(P){var T=P.terminateAndNotify(f,d).then(_).always(function(){m.onTerminateWorker({forkArgs:P.forkArgs,forkOpts:P.forkOpts,workerThreadOpts:P.workerThreadOpts,script:P.script})});E.push(T)}),n.all(E)},c.prototype.stats=function(){var f=this.workers.length,d=this.workers.filter(function(m){return m.busy()}).length;return{totalWorkers:f,busyWorkers:d,idleWorkers:f-d,pendingTasks:this.tasks.length,activeTasks:d}},c.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var f=this.workers.length;f<this.minWorkers;f++)this.workers.push(this._createWorkerHandler())},c.prototype._createWorkerHandler=function(){var f=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new s(f.script||this.script,{forkArgs:f.forkArgs||this.forkArgs,forkOpts:f.forkOpts||this.forkOpts,workerThreadOpts:f.workerThreadOpts||this.workerThreadOpts,debugPort:i.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout})};function a(f){if(!w(f)||!y(f)||f<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function u(f){if(!w(f)||!y(f)||f<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function w(f){return typeof f=="number"}function y(f){return Math.round(f)==f}e.exports=c},219:function(e){function t(o,l){var i=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var c=[],a=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var u=function(d,m){c.push(d),a.push(m)};this.then=function(f,d){return new t(function(m,k){var _=f?r(f,m,k):m,E=d?r(d,m,k):k;u(_,E)},i)};var w=function(d){return i.resolved=!0,i.rejected=!1,i.pending=!1,c.forEach(function(m){m(d)}),u=function(k,_){k(d)},w=y=function(){},i},y=function(d){return i.resolved=!1,i.rejected=!0,i.pending=!1,a.forEach(function(m){m(d)}),u=function(k,_){_(d)},w=y=function(){},i};this.cancel=function(){return l?l.cancel():y(new n),i},this.timeout=function(f){if(l)l.timeout(f);else{var d=setTimeout(function(){y(new s("Promise timed out after "+f+" ms"))},f);i.always(function(){clearTimeout(d)})}return i},o(function(f){w(f)},function(f){y(f)})}function r(o,l,i){return function(c){try{var a=o(c);a&&typeof a.then=="function"&&typeof a.catch=="function"?a.then(l,i):l(a)}catch(u){i(u)}}}t.prototype.catch=function(o){return this.then(null,o)},t.prototype.always=function(o){return this.then(o,o)},t.all=function(o){return new t(function(l,i){var c=o.length,a=[];c?o.forEach(function(u,w){u.then(function(y){a[w]=y,c--,c==0&&l(a)},function(y){c=0,i(y)})}):l(a)})},t.defer=function(){var o={};return o.promise=new t(function(l,i){o.resolve=l,o.reject=i}),o};function n(o){this.message=o||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function s(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}s.prototype=new Error,s.prototype.constructor=Error,s.prototype.name="TimeoutError",t.TimeoutError=s,e.exports=t},751:function(e,t,r){function n(p,g){var h=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!h){if(Array.isArray(p)||(h=s(p))||g&&p&&typeof p.length=="number"){h&&(p=h);var b=0,v=function(){};return{s:v,n:function(){return b>=p.length?{done:!0}:{done:!1,value:p[b++]}},e:function(C){throw C},f:v}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=!0,N=!1,x;return{s:function(){h=h.call(p)},n:function(){var C=h.next();return S=C.done,C},e:function(C){N=!0,x=C},f:function(){try{!S&&h.return!=null&&h.return()}finally{if(N)throw x}}}}function s(p,g){if(!!p){if(typeof p=="string")return o(p,g);var h=Object.prototype.toString.call(p).slice(8,-1);if(h==="Object"&&p.constructor&&(h=p.constructor.name),h==="Map"||h==="Set")return Array.from(p);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(p,g)}}function o(p,g){(g==null||g>p.length)&&(g=p.length);for(var h=0,b=new Array(g);h<g;h++)b[h]=p[h];return b}function l(p,g){var h=Object.keys(p);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(p);g&&(b=b.filter(function(v){return Object.getOwnPropertyDescriptor(p,v).enumerable})),h.push.apply(h,b)}return h}function i(p){for(var g=1;g<arguments.length;g++){var h=arguments[g]!=null?arguments[g]:{};g%2?l(Object(h),!0).forEach(function(b){c(p,b,h[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(h)):l(Object(h)).forEach(function(b){Object.defineProperty(p,b,Object.getOwnPropertyDescriptor(h,b))})}return p}function c(p,g,h){return g=a(g),g in p?Object.defineProperty(p,g,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[g]=h,p}function a(p){var g=u(p,"string");return w(g)==="symbol"?g:String(g)}function u(p,g){if(w(p)!=="object"||p===null)return p;var h=p[Symbol.toPrimitive];if(h!==void 0){var b=h.call(p,g||"default");if(w(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(p)}function w(p){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},w(p)}var y=r(219),f=r(828),d=r(397),m="__workerpool-terminate__";function k(){var p=E();if(!p)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return p}function _(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":w(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function E(){try{return d("worker_threads")}catch(p){if(w(p)==="object"&&p!==null&&p.code==="MODULE_NOT_FOUND")return null;throw p}}function A(){if(f.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var p=new Blob([r(670)],{type:"text/javascript"});return window.URL.createObjectURL(p)}else return __dirname+"/worker.js"}function P(p,g){if(g.workerType==="web")return _(),T(p,Worker);if(g.workerType==="thread")return h=k(),R(p,h,g.workerThreadOpts);if(g.workerType==="process"||!g.workerType)return O(p,W(g),d("child_process"));if(f.platform==="browser")return _(),T(p,Worker);var h=E();return h?R(p,h):O(p,W(g),d("child_process"))}function T(p,g){var h=new g(p);return h.isBrowserWorker=!0,h.on=function(b,v){this.addEventListener(b,function(S){v(S.data)})},h.send=function(b,v){this.postMessage(b,v)},h}function R(p,g,h){var b=new g.Worker(p,i({stdout:!1,stderr:!1},h));return b.isWorkerThread=!0,b.send=function(v,S){this.postMessage(v,S)},b.kill=function(){return this.terminate(),!0},b.disconnect=function(){this.terminate()},b}function O(p,g,h){var b=h.fork(p,g.forkArgs,g.forkOpts),v=b.send;return b.send=function(S){return v.call(b,S)},b.isChildProcess=!0,b}function W(p){p=p||{};var g=process.execArgv.join(" "),h=g.indexOf("--inspect")!==-1,b=g.indexOf("--debug-brk")!==-1,v=[];return h&&(v.push("--inspect="+p.debugPort),b&&v.push("--debug-brk")),process.execArgv.forEach(function(S){S.indexOf("--max-old-space-size")>-1&&v.push(S)}),Object.assign({},p,{forkArgs:p.forkArgs,forkOpts:Object.assign({},p.forkOpts,{execArgv:(p.forkOpts&&p.forkOpts.execArgv||[]).concat(v)})})}function M(p){for(var g=new Error(""),h=Object.keys(p),b=0;b<h.length;b++)g[h[b]]=p[h[b]];return g}function L(p,g){var h=this,b=g||{};this.script=p||A(),this.worker=P(this.script,b),this.debugPort=b.debugPort,this.forkOpts=b.forkOpts,this.forkArgs=b.forkArgs,this.workerThreadOpts=b.workerThreadOpts,this.workerTerminateTimeout=b.workerTerminateTimeout,p||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(x){if(!h.terminated)if(typeof x=="string"&&x==="ready")h.worker.ready=!0,S();else{var $=x.id,C=h.processing[$];C!==void 0&&(x.isEvent?C.options&&typeof C.options.on=="function"&&C.options.on(x.payload):(delete h.processing[$],h.terminating===!0&&h.terminate(),x.error?C.resolver.reject(M(x.error)):C.resolver.resolve(x.result)))}});function v(x){h.terminated=!0;for(var $ in h.processing)h.processing[$]!==void 0&&h.processing[$].resolver.reject(x);h.processing=Object.create(null)}function S(){var x=n(h.requestQueue.splice(0)),$;try{for(x.s();!($=x.n()).done;){var C=$.value;h.worker.send(C.message,C.transfer)}}catch(I){x.e(I)}finally{x.f()}}var N=this.worker;this.worker.on("error",v),this.worker.on("exit",function(x,$){var C=`Workerpool Worker terminated Unexpectedly
`;C+="    exitCode: `"+x+"`\n",C+="    signalCode: `"+$+"`\n",C+="    workerpool.script: `"+h.script+"`\n",C+="    spawnArgs: `"+N.spawnargs+"`\n",C+="    spawnfile: `"+N.spawnfile+"`\n",C+="    stdout: `"+N.stdout+"`\n",C+="    stderr: `"+N.stderr+"`\n",v(new Error(C))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}L.prototype.methods=function(){return this.exec("methods")},L.prototype.exec=function(p,g,h,b){h||(h=y.defer());var v=++this.lastId;this.processing[v]={id:v,resolver:h,options:b};var S={message:{id:v,method:p,params:g},transfer:b&&b.transfer};this.terminated?h.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(S.message,S.transfer):this.requestQueue.push(S);var N=this;return h.promise.catch(function(x){if(x instanceof y.CancellationError||x instanceof y.TimeoutError)return delete N.processing[v],N.terminateAndNotify(!0).then(function(){throw x},function($){throw $});throw x})},L.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},L.prototype.terminate=function(p,g){var h=this;if(p){for(var b in this.processing)this.processing[b]!==void 0&&this.processing[b].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof g=="function"&&(this.terminationHandler=g),this.busy())this.terminating=!0;else{var v=function(x){if(h.terminated=!0,h.cleaning=!1,h.worker!=null&&h.worker.removeAllListeners&&h.worker.removeAllListeners("message"),h.worker=null,h.terminating=!1,h.terminationHandler)h.terminationHandler(x,h);else if(x)throw x};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){v(new Error("worker already killed!"));return}var S=setTimeout(function(){h.worker&&h.worker.kill()},this.workerTerminateTimeout);this.worker.once("exit",function(){clearTimeout(S),h.worker&&(h.worker.killed=!0),v()}),this.worker.ready?this.worker.send(m):this.requestQueue.push(m),this.cleaning=!0;return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");v()}},L.prototype.terminateAndNotify=function(p,g){var h=y.defer();return g&&(h.promise.timeout=g),this.terminate(p,function(b,v){b?h.reject(b):h.resolve(v)}),h.promise},e.exports=L,e.exports._tryRequireWorkerThreads=E,e.exports._setupProcessWorker=O,e.exports._setupBrowserWorker=T,e.exports._setupWorkerThreadWorker=R,e.exports.ensureWorkerThreads=k},833:function(e){var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},828:function(e,t,r){var n=r(397),s=function(c){return typeof c<"u"&&c.versions!=null&&c.versions.node!=null};e.exports.isNode=s,e.exports.platform=typeof process<"u"&&s(process)?"node":"browser";var o=l("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function l(i){try{return n(i)}catch{return null}}},670:function(e){e.exports=`!function(){var __webpack_modules__={577:function(e){e.exports=function(e,r){this.message=e,this.transfer=r}}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];return void 0!==r||(r=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](r,r.exports,__webpack_require__)),r.exports}var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(e,r){addEventListener(e,function(e){r(e.data)})},worker.send=function(e){postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",function(){process.exit(1)})),worker.exit=process.exit.bind(process)}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(e,r){return Object.defineProperty(e,r,{value:o[r],enumerable:!0})},{})}function isPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}worker.methods={},worker.methods.run=function(e,r){e=new Function("return ("+e+").apply(null, arguments);");return e.apply(e,r)},worker.methods.methods=function(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){function r(){worker.exit(e)}if(!worker.terminationHandler)return r();var o=worker.terminationHandler(e);isPromise(o)?o.then(r,r):r()};var currentRequestId=null;worker.on("message",function(r){if(r===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var e=worker.methods[r.method];if(!e)throw new Error('Unknown method "'+r.method+'"');currentRequestId=r.id;var o=e.apply(e,r.params);isPromise(o)?o.then(function(e){e instanceof Transfer?worker.send({id:r.id,result:e.message,error:null},e.transfer):worker.send({id:r.id,result:e,error:null}),currentRequestId=null}).catch(function(e){worker.send({id:r.id,result:null,error:convertError(e)}),currentRequestId=null}):(o instanceof Transfer?worker.send({id:r.id,result:o.message,error:null},o.transfer):worker.send({id:r.id,result:o,error:null}),currentRequestId=null)}catch(e){worker.send({id:r.id,result:null,error:convertError(e)})}}),worker.register=function(e,r){if(e)for(var o in e)e.hasOwnProperty(o)&&(worker.methods[o]=e[o]);r&&(worker.terminationHandler=r.onTerminate),worker.send("ready")},worker.emit=function(e){currentRequestId&&(e instanceof Transfer?worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer):worker.send({id:currentRequestId,isEvent:!0,payload:e}))},__webpack_unused_export__=worker.register,worker.emit}()}();`},397:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},577:function(e){function t(r,n){this.message=r,this.transfer=n}e.exports=t},744:function(__unused_webpack_module,exports,__webpack_require__){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort),worker.exit=process.exit.bind(process)}else worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){var t=function(){worker.exit(e)};if(!worker.terminationHandler)return t();var r=worker.terminationHandler(e);isPromise(r)?r.then(t,t):t()};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){n instanceof Transfer?worker.send({id:e.id,result:n.message,error:null},n.transfer):worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(r instanceof Transfer?worker.send({id:e.id,result:r.message,error:null},r.transfer):worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e,t){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);t&&(worker.terminationHandler=t.onTerminate),worker.send("ready")},worker.emit=function(e){if(currentRequestId){if(e instanceof Transfer){worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer);return}worker.send({id:currentRequestId,isEvent:!0,payload:e})}},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(828);e.pool=function(n,s){var o=__webpack_require__(345);return new o(n,s)},e.worker=function(n,s){var o=__webpack_require__(744);o.add(n,s)},e.workerEmit=function(n){var s=__webpack_require__(744);s.emit(n)},e.Promise=__webpack_require__(219),e.Transfer=__webpack_require__(577),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})})(workerpool$1);const workerpool=workerpool$1.exports,_tmpl$$2=template("<canvas></canvas>"),ChannelSegment=e=>{let t,r;return onCleanup(()=>{r?.cancel()}),createEffect(async()=>{r?.cancel(),r=pool.exec(computeBuckets,[e.data,e.numBuckets]).then(n=>{t&&drawBars(t,n)}).catch(n=>{n.message!=="promise cancelled"&&console.error(n)})}),(()=>{const n=_tmpl$$2.cloneNode(!0),s=t;return typeof s=="function"?use(s,n):t=n,createRenderEffect(o=>{const l=e.width,i=e.height,c={width:"100%",height:"100%",...e.style};return l!==o._v$&&setAttribute(n,"width",o._v$=l),i!==o._v$2&&setAttribute(n,"height",o._v$2=i),o._v$3=style(n,c,o._v$3),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()},pool=workerpool.pool();function computeBuckets(e,t){const r=Math.ceil(e.length/t),n=[];let s=0;for(let o=0;o<t;o++){const l=s+r,i=e.subarray(s,l);let c=1/0;for(const u of i)c=Math.min(u,c);let a=-1/0;for(const u of i)a=Math.max(u,a);n.push({min:c,max:a}),s=l}return n}const drawBars=(e,t)=>{const r=e.getContext("2d");if(!r)return;const n=2;r.lineWidth=n,r.clearRect(0,0,e.width,e.height),r.translate(0,e.height/2);for(let s=0;s<t.length;s++){const{min:o,max:l}=t[s];r.beginPath(),r.moveTo(s,l*(e.height/2)+n/2),r.lineTo(s,o*(e.height/2)-n/2),r.stroke()}r.translate(0,-e.height/2)},createDrag=e=>{let t;const[r,n]=createSignal(0),s=i=>{e.onStart?.(i),t=i.clientX,document.body.addEventListener("pointerup",o),document.body.addEventListener("pointerleave",o),document.body.addEventListener("pointermove",l)},o=i=>{e.onFinished?.(i),t=void 0,document.body.removeEventListener("pointerup",o),document.body.removeEventListener("pointerleave",o),document.body.removeEventListener("pointermove",l),n(0)},l=i=>{t!==void 0&&(e.onDrag?.(i),n(i.clientX-t))};return{offset:r,start:s}},_tmpl$$1=template("<div data-scroll-element></div>"),_tmpl$2$1=template("<div data-content-element></div>"),_tmpl$3$1=template("<div><button>slice</button><button>play</button></div>"),_tmpl$4$1=template("<div></div>"),_tmpl$5$1=template("<button>delete</button>"),_tmpl$6=template('<div><button style="flex-grow: 1;">&#9654; </button></div>'),_tmpl$7=template("<div data-summary-element></div>"),TILE_WIDTH=400,TILE_HEIGHT=100;let scrollElement,contentElement;const zoom=function e(){const r=Math.pow(2,10),[n,s]=createSignal(32),o=2,l=i=>{if(!scrollElement)return;const c=scrollElement.scrollLeft+scrollElement.clientWidth/2,a=i==="in"?c*o:c/o;s(u=>i==="in"?Math.max(1,u/o):Math.min(r,u*o)),scrollElement.scrollLeft=a-scrollElement.clientWidth/2};return{in:()=>l("in"),out:()=>l("out"),samplesPerPixel:n,inDisabled:()=>n()===1,outDisabled:()=>n()===r}}(),Waveform=e=>(()=>{const t=_tmpl$$1.cloneNode(!0),r=scrollElement;return typeof r=="function"?use(r,t):scrollElement=t,t.style.setProperty("overflow","auto"),insert(t,createComponent(Triggers,{get buffer(){return e.buffer}}),null),insert(t,createComponent(WaveformContent,{get buffer(){return e.buffer}}),null),insert(t,createComponent(WaveformSummary,{get buffer(){return e.buffer}}),null),t})(),WaveformContent=e=>{const t=createVirtualizer(()=>({count:range(0,e.buffer.length/zoom.samplesPerPixel(),TILE_WIDTH).length,getScrollElement:()=>scrollElement,estimateSize:()=>TILE_WIDTH,horizontal:!0})),r=n=>{if(!contentElement)return;const s=contentElement.getBoundingClientRect(),o=n.clientX-s.left;dispatch.setCursor(o/contentElement.clientWidth),dispatch.showCursorControls()};return(()=>{const n=_tmpl$2$1.cloneNode(!0);n.$$dblclick=r;const s=contentElement;return typeof s=="function"?use(s,n):contentElement=n,n.style.setProperty("display","flex"),n.style.setProperty("position","relative"),n.style.setProperty("overflow","hidden"),n.style.setProperty("container-type","inline-size"),insert(n,createComponent(For,{get each(){return t.getVirtualItems()},children:o=>createComponent(WaveformTile,{get buffer(){return e.buffer},get start(){return o.start},length:TILE_WIDTH})}),null),insert(n,createComponent(For,{get each(){return state.regions},children:(o,l)=>createComponent(Slice,{get pos(){return o.start},get index(){return l()},get id(){return o.start.toString()}})}),null),insert(n,createComponent(Cursor,{}),null),insert(n,createComponent(Playhead,{}),null),createRenderEffect(o=>{const l=`${e.buffer.length/zoom.samplesPerPixel()}px`,i=e.buffer.numberOfChannels*TILE_HEIGHT+"px";return l!==o._v$&&n.style.setProperty("width",o._v$=l),i!==o._v$2&&n.style.setProperty("height",o._v$2=i),o},{_v$:void 0,_v$2:void 0}),n})()},Triggers=e=>{const t=createMemo(()=>state.regions[sortedIndex(state.regions.map(r=>r.start),state.cursor)]?.start||1);return(()=>{const r=_tmpl$4$1.cloneNode(!0);return r.style.setProperty("container-type","inline-size"),r.style.setProperty("height","var(--min-btn-dimension"),insert(r,createComponent(For,{get each(){return state.regions},children:(n,s)=>(()=>{const o=_tmpl$6.cloneNode(!0),l=o.firstChild;return l.firstChild,o.style.setProperty("position","absolute"),o.style.setProperty("height","100%"),o.style.setProperty("display","flex"),insert(o,createComponent(Show,{get when(){return state.deleting},get children(){const i=_tmpl$5$1.cloneNode(!0);return i.$$click=()=>{dispatch.healSlice(s())},i}}),l),l.$$dblclick=i=>i.stopPropagation(),l.$$click=()=>{player.play(e.buffer,n)},insert(l,()=>n.start.toFixed(5),null),createRenderEffect(()=>o.style.setProperty("transform",`translateX(${n.start*100}cqi)`)),o})()}),null),insert(r,createComponent(Show,{get when(){return state.cursorControlsVisible},get children(){const n=_tmpl$3$1.cloneNode(!0),s=n.firstChild,o=s.nextSibling;return n.style.setProperty("position","absolute"),n.style.setProperty("height","100%"),n.style.setProperty("display","flex"),s.$$click=()=>{dispatch.slice(state.cursor),dispatch.hideCursorControls()},o.$$click=()=>{player.play(e.buffer,{start:state.cursor,end:t()})},createRenderEffect(()=>n.style.setProperty("transform",`translateX(${state.cursor*100}cqi)`)),n}}),null),createRenderEffect(()=>r.style.setProperty("width",`${e.buffer.length/zoom.samplesPerPixel()}px`)),r})()},Stick=e=>{const[,t]=splitProps(e,["pos"]);return(()=>{const r=_tmpl$4$1.cloneNode(!0);return spread(r,mergeProps(t,{get style(){return{position:"absolute",top:0,left:`${e.width/-2}px`,transform:`translateX(${e.pos*100}cqi)`,width:`${e.width}px`,height:"100%",background:e.background,opacity:e.opacity}}}),!1,!0),r})()},Slice=e=>{const t=s=>s.preventDefault(),r=createDrag({onStart:()=>{scrollElement?.addEventListener("touchmove",t)},onFinished:()=>{dispatch.healSlice(e.index),dispatch.slice(n()),scrollElement?.removeEventListener("touchmove",t)}}),n=()=>contentElement?e.pos+r.offset()/contentElement.clientWidth:e.pos;return[createComponent(Show,{get when(){return state.editing},get children(){return createComponent(Stick,{get pos(){return n()},width:30,opacity:.5,background:"purple",get onPointerDown(){return r.start}})}}),createComponent(Stick,{get pos(){return n()},width:2,background:"purple",opacity:.75,get onPointerDown(){return state.editing?r.start:void 0}})]},Cursor=()=>(()=>{const e=_tmpl$4$1.cloneNode(!0);return e.style.setProperty("pointer-events","none"),insert(e,createComponent(Stick,{get pos(){return state.cursor},width:2,background:"repeating-linear-gradient(orange 0px, orange 4px, transparent 4px, transparent 8px)"})),e})(),Playhead=()=>createComponent(Show,{get when(){return player.playing()},get children(){return createComponent(Stick,{get pos(){return player.progress()},width:2,background:"orange"})}}),WaveformSummary=e=>{let t;const r=()=>{const[o,l]=createSignal(0),[i,c]=createSignal(0);return useAnimationFrame(()=>{scrollElement&&contentElement&&(l(scrollElement.scrollLeft/contentElement.clientWidth*100),c(scrollElement.clientWidth/contentElement.clientWidth*100))}),(()=>{const a=_tmpl$4$1.cloneNode(!0);return a.style.setProperty("position","absolute"),a.style.setProperty("height","50px"),a.style.setProperty("background","#8888"),createRenderEffect(u=>{const w=`min(100cqi, max(${i()}cqi, 2px))`,y=o()+"cqi";return w!==u._v$3&&a.style.setProperty("width",u._v$3=w),y!==u._v$4&&a.style.setProperty("left",u._v$4=y),u},{_v$3:void 0,_v$4:void 0}),a})()},n=o=>{if(!t||!contentElement||!scrollElement)return;const l=t.getBoundingClientRect(),c=(o.clientX-l.left)/l.width;scrollElement.scrollLeft=contentElement.getBoundingClientRect().width*c-scrollElement.getBoundingClientRect().width/2},s=createDrag({onStart:n,onDrag:n});return(()=>{const o=_tmpl$7.cloneNode(!0);addEventListener$1(o,"pointerdown",s.start,!0);const l=t;return typeof l=="function"?use(l,o):t=o,o.style.setProperty("position","sticky"),o.style.setProperty("left","0"),o.style.setProperty("height","50px"),o.style.setProperty("touch-action","none"),o.style.setProperty("container-type","inline-size"),insert(o,createComponent(For,{get each(){return range(0,e.buffer.numberOfChannels)},children:i=>createComponent(ChannelSegment,{get data(){return e.buffer.getChannelData(i)},width:800,height:50,numBuckets:800,style:{position:"absolute"}})}),null),insert(o,createComponent(For,{get each(){return state.regions},children:({start:i})=>createComponent(Stick,{pos:i,background:"purple",opacity:.75,width:2})}),null),insert(o,createComponent(r,{}),null),insert(o,createComponent(Cursor,{}),null),insert(o,createComponent(Playhead,{}),null),o})()},WaveformTile=e=>(()=>{const t=_tmpl$4$1.cloneNode(!0);return t.style.setProperty("display","flex"),t.style.setProperty("flex-direction","column"),t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("left","0"),t.style.setProperty("width","400px"),insert(t,createComponent(For,{get each(){return range(0,e.buffer.numberOfChannels)},children:r=>{const n=createMemo(()=>e.buffer.getChannelData(r).slice(e.start*zoom.samplesPerPixel(),(e.start+e.length)*zoom.samplesPerPixel()));return createComponent(ChannelSegment,{get data(){return n()},width:TILE_WIDTH,height:TILE_HEIGHT,get numBuckets(){return n().length/zoom.samplesPerPixel()}})}})),createRenderEffect(()=>t.style.setProperty("transform",`translateX(${e.start}px)`)),t})(),range=(e,t,r=1)=>[...new Array(Math.ceil((t-e)/r))].map((n,s)=>s*r);delegateEvents(["dblclick","click","pointerdown"]);const _tmpl$=template("<button>clear</button>"),_tmpl$2=template("<div></div>"),_tmpl$3=template("<div><button></button><button></button><button>zoom in</button><button>zoom out</button><button></button></div>"),_tmpl$4=template("<div><p></p><p>s</p><p></p></div>"),_tmpl$5=template("<button>&#9654; </button>"),App=()=>createComponent(Show,{get when(){return state.clip},get fallback(){return createComponent(AudioInput,{get onChange(){return dispatch.setClip}})},get children(){return[(()=>{const e=_tmpl$.cloneNode(!0);return e.$$click=()=>{confirm("clear for real?")&&(dispatch.clearClip(),dispatch.setCursor(0),dispatch.clearSlices(),player.stop())},e})(),createComponent(Details,{get clip(){return state.clip}}),(()=>{const e=_tmpl$2.cloneNode(!0);return e.style.setProperty("position","sticky"),e.style.setProperty("top","0"),e.style.setProperty("background","white"),insert(e,createComponent(Controls,{get clip(){return state.clip}}),null),insert(e,createComponent(Waveform,{get buffer(){return state.clip.buffer}}),null),e})(),createComponent(Regions,{get buffer(){return state.clip.buffer}})]}}),Controls=e=>(()=>{const t=_tmpl$3.cloneNode(!0),r=t.firstChild,n=r.nextSibling,s=n.nextSibling,o=s.nextSibling,l=o.nextSibling;return r.$$click=()=>{state.deleting?dispatch.stopDeleting():dispatch.startDeleting()},insert(r,()=>state.deleting?"done deleting":"delete"),n.$$click=()=>{state.editing?dispatch.stopEditing():dispatch.startEditing()},insert(n,()=>state.editing?"done editing":"edit"),addEventListener$1(s,"click",zoom.in,!0),addEventListener$1(o,"click",zoom.out,!0),l.$$click=()=>{player.playing()?player.stop():player.play(e.clip.buffer)},insert(l,()=>player.playing()?"stop":"play"),createRenderEffect(i=>{const c=zoom.inDisabled(),a=zoom.outDisabled();return c!==i._v$&&(s.disabled=i._v$=c),a!==i._v$2&&(o.disabled=i._v$2=a),i},{_v$:void 0,_v$2:void 0}),t})(),formatOf=e=>{switch(e.numberOfChannels){case 1:return"mono";case 2:return"stereo";default:return e.numberOfChannels+" channels"}},Details=e=>(()=>{const t=_tmpl$4.cloneNode(!0),r=t.firstChild,n=r.nextSibling,s=n.firstChild,o=n.nextSibling;return insert(r,()=>e.clip.name),insert(n,()=>(e.clip.buffer.length/e.clip.buffer.sampleRate).toFixed(2),s),insert(o,()=>formatOf(e.clip.buffer)),t})(),Regions=e=>(()=>{const t=_tmpl$2.cloneNode(!0);return t.style.setProperty("display","grid"),t.style.setProperty("grid-template-columns","repeat( auto-fit, minmax(100px, 1fr) )"),t.style.setProperty("grid-auto-rows","100px"),insert(t,createComponent(For,{get each(){return state.regions},children:r=>(()=>{const n=_tmpl$5.cloneNode(!0);return n.firstChild,n.$$click=()=>{player.play(e.buffer,r),scrollElement&&contentElement&&(scrollElement.scrollLeft=r.start*contentElement.clientWidth-scrollElement.clientWidth/2)},n.style.setProperty("height","100%"),n.style.setProperty("width","100%"),insert(n,()=>r.start.toFixed(5),null),n})()})),t})();delegateEvents(["click"]);const Blah=()=>createComponent(App,{});render(Blah,document.getElementById("root"));
