(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const style$2="",sharedConfig={};function setHydrateContext(e){sharedConfig.context=e}const equalFn=(e,t)=>e===t,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null};var Owner=null;let Transition=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,t){const n=Listener,r=Owner,i=e.length===0,o=i?UNOWNED:{owned:null,cleanups:null,context:null,owner:t||r},s=i?e:()=>e(()=>untrack(()=>cleanNode(o)));Owner=o,Listener=null;try{return runUpdates(s,!0)}finally{Listener=n,Owner=r}}function createSignal(e,t){t=t?Object.assign({},signalOptions,t):signalOptions;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=i=>(typeof i=="function"&&(i=i(n.value)),writeSignal(n,i));return[readSignal.bind(n),r]}function createComputed(e,t,n){const r=createComputation(e,t,!0,STALE);updateComputation(r)}function createRenderEffect(e,t,n){const r=createComputation(e,t,!1,STALE);updateComputation(r)}function createEffect(e,t,n){runEffects=runUserEffects;const r=createComputation(e,t,!1,STALE),i=SuspenseContext&&lookup(Owner,SuspenseContext.id);i&&(r.suspense=i),r.user=!0,Effects?Effects.push(r):updateComputation(r)}function createMemo(e,t,n){n=n?Object.assign({},signalOptions,n):signalOptions;const r=createComputation(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,updateComputation(r),readSignal.bind(r)}function batch(e){return runUpdates(e,!1)}function untrack(e){const t=Listener;Listener=null;try{return e()}finally{Listener=t}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function getListener(){return Listener}let SuspenseContext;function readSignal(){const e=Transition;if(this.sources&&(this.state||e))if(this.state===STALE||e)updateComputation(this);else{const t=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=t}if(Listener){const t=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(t)):(Listener.sources=[this],Listener.sourceSlots=[t]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&runUpdates(()=>{for(let i=0;i<e.observers.length;i+=1){const o=e.observers[i],s=Transition&&Transition.running;s&&Transition.disposed.has(o),(s&&!o.tState||!s&&!o.state)&&(o.pure?Updates.push(o):Effects.push(o),o.observers&&markDownstream(o)),s||(o.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),t}function updateComputation(e){if(!e.fn)return;cleanNode(e);const t=Owner,n=Listener,r=ExecCount;Listener=Owner=e,runComputation(e,e.value,r),Listener=n,Owner=t}function runComputation(e,t,n){let r;try{r=e.fn(t)}catch(i){e.pure&&(e.state=STALE),handleError(i)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,r):e.value=r,e.updatedAt=n)}function createComputation(e,t,n,r=STALE,i){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Owner,context:null,pure:n};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(o):Owner.owned=[o]),o}function runTop(e){const t=Transition;if(e.state===0||t)return;if(e.state===PENDING||t)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)(e.state||t)&&n.push(e);for(let r=n.length-1;r>=0;r--)if(e=n[r],e.state===STALE||t)updateComputation(e);else if(e.state===PENDING||t){const i=Updates;Updates=null,runUpdates(()=>lookUpstream(e,n[0]),!1),Updates=i}}function runUpdates(e,t){if(Updates)return e();let n=!1;t||(Updates=[]),Effects?n=!0:Effects=[],ExecCount++;try{const r=e();return completeUpdates(n),r}catch(r){Updates||(Effects=null),handleError(r)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const t=Effects;Effects=null,t.length&&runUpdates(()=>runEffects(t),!1)}function runQueue(e){for(let t=0;t<e.length;t++)runTop(e[t])}function runUserEffects(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:runTop(r)}for(sharedConfig.context&&setHydrateContext(),t=0;t<n;t++)runTop(e[t])}function lookUpstream(e,t){const n=Transition;e.state=0;for(let r=0;r<e.sources.length;r+=1){const i=e.sources[r];i.sources&&(i.state===STALE||n?i!==t&&runTop(i):(i.state===PENDING||n)&&lookUpstream(i,t))}}function markDownstream(e){const t=Transition;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(!r.state||t)&&(r.state=PENDING,r.pure?Updates.push(r):Effects.push(r),r.observers&&markDownstream(r))}}function cleanNode(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),i=n.observers;if(i&&i.length){const o=i.pop(),s=n.observerSlots.pop();r<i.length&&(o.sourceSlots[s]=r,i[r]=o,n.observerSlots[r]=s)}}if(e.owned){for(t=0;t<e.owned.length;t++)cleanNode(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function castError(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function handleError(e){throw e=castError(e),e}function lookup(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:lookup(e.owner,t):void 0}const FALLBACK=Symbol("fallback");function dispose(e){for(let t=0;t<e.length;t++)e[t]()}function mapArray(e,t,n={}){let r=[],i=[],o=[],s=0,l=t.length>1?[]:null;return onCleanup(()=>dispose(o)),()=>{let c=e()||[],d,f;return c[$TRACK],untrack(()=>{let b=c.length,v,w,$,T,I,N,F,B,E;if(b===0)s!==0&&(dispose(o),o=[],r=[],i=[],s=0,l&&(l=[])),n.fallback&&(r=[FALLBACK],i[0]=createRoot(D=>(o[0]=D,n.fallback())),s=1);else if(s===0){for(i=new Array(b),f=0;f<b;f++)r[f]=c[f],i[f]=createRoot(m);s=b}else{for($=new Array(b),T=new Array(b),l&&(I=new Array(b)),N=0,F=Math.min(s,b);N<F&&r[N]===c[N];N++);for(F=s-1,B=b-1;F>=N&&B>=N&&r[F]===c[B];F--,B--)$[B]=i[F],T[B]=o[F],l&&(I[B]=l[F]);for(v=new Map,w=new Array(B+1),f=B;f>=N;f--)E=c[f],d=v.get(E),w[f]=d===void 0?-1:d,v.set(E,f);for(d=N;d<=F;d++)E=r[d],f=v.get(E),f!==void 0&&f!==-1?($[f]=i[d],T[f]=o[d],l&&(I[f]=l[d]),f=w[f],v.set(E,f)):o[d]();for(f=N;f<b;f++)f in $?(i[f]=$[f],o[f]=T[f],l&&(l[f]=I[f],l[f](f))):i[f]=createRoot(m);i=i.slice(0,s=b),r=c.slice(0)}return i});function m(b){if(o[f]=b,l){const[v,w]=createSignal(f);return l[f]=w,t(c[f],v)}return t(c[f])}}}function createComponent(e,t){return untrack(()=>e(t||{}))}function trueFn(){return!0}const propTraps={get(e,t,n){return t===$PROXY?n:e.get(t)},has(e,t){return e.has(t)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:trueFn,deleteProperty:trueFn}},ownKeys(e){return e.keys()}};function resolveSource(e){return(e=typeof e=="function"?e():e)?e:{}}function mergeProps(...e){if(e.some(n=>n&&($PROXY in n||typeof n=="function")))return new Proxy({get(n){for(let r=e.length-1;r>=0;r--){const i=resolveSource(e[r])[n];if(i!==void 0)return i}},has(n){for(let r=e.length-1;r>=0;r--)if(n in resolveSource(e[r]))return!0;return!1},keys(){const n=[];for(let r=0;r<e.length;r++)n.push(...Object.keys(resolveSource(e[r])));return[...new Set(n)]}},propTraps);const t={};for(let n=e.length-1;n>=0;n--)if(e[n]){const r=Object.getOwnPropertyDescriptors(e[n]);for(const i in r)i in t||Object.defineProperty(t,i,{enumerable:!0,get(){for(let o=e.length-1;o>=0;o--){const s=(e[o]||{})[i];if(s!==void 0)return s}}})}return t}function splitProps(e,...t){const n=new Set(t.flat()),r=Object.getOwnPropertyDescriptors(e),i=$PROXY in e;i||t.push(Object.keys(r).filter(s=>!n.has(s)));const o=t.map(s=>{const l={};for(let c=0;c<s.length;c++){const d=s[c];!i&&!(d in e)||Object.defineProperty(l,d,r[d]?r[d]:{get(){return e[d]},set(){return!0},enumerable:!0})}return l});return i&&o.push(new Proxy({get(s){return n.has(s)?void 0:e[s]},has(s){return n.has(s)?!1:s in e},keys(){return Object.keys(e).filter(s=>!n.has(s))}},propTraps)),o}function For(e){const t="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,t||void 0))}function Show(e){let t=!1;const n=e.keyed,r=createMemo(()=>e.when,void 0,{equals:(i,o)=>t?i===o:!i==!o});return createMemo(()=>{const i=r();if(i){const o=e.children,s=typeof o=="function"&&o.length>0;return t=n||s,s?untrack(()=>o(i)):o}return e.fallback})}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function reconcileArrays(e,t,n){let r=n.length,i=t.length,o=r,s=0,l=0,c=t[i-1].nextSibling,d=null;for(;s<i||l<o;){if(t[s]===n[l]){s++,l++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===s){const f=o<r?l?n[l-1].nextSibling:n[o-l]:c;for(;l<o;)e.insertBefore(n[l++],f)}else if(o===l)for(;s<i;)(!d||!d.has(t[s]))&&t[s].remove(),s++;else if(t[s]===n[o-1]&&n[l]===t[i-1]){const f=t[--i].nextSibling;e.insertBefore(n[l++],t[s++].nextSibling),e.insertBefore(n[--o],f),t[i]=n[o]}else{if(!d){d=new Map;let m=l;for(;m<o;)d.set(n[m],m++)}const f=d.get(t[s]);if(f!=null)if(l<f&&f<o){let m=s,b=1,v;for(;++m<i&&m<o&&!((v=d.get(t[m]))==null||v!==f+b);)b++;if(b>f-l){const w=t[s];for(;l<f;)e.insertBefore(n[l++],w)}else e.replaceChild(n[l++],t[s++])}else s++;else t[s++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,t,n,r={}){let i;return createRoot(o=>{i=o,t===document?e():insert(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function template(e,t,n){const r=document.createElement("template");r.innerHTML=e;let i=r.content.firstChild;return n&&(i=i.firstChild),i}function delegateEvents(e,t=window.document){const n=t[$$EVENTS]||(t[$$EVENTS]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,eventHandler))}}function setAttribute(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function setAttributeNS(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function className(e,t){t==null?e.removeAttribute("class"):e.className=t}function addEventListener$1(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n)}function classList(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,s;for(o=0,s=i.length;o<s;o++){const l=i[o];!l||l==="undefined"||t[l]||(toggleClassKey(e,l,!1),delete n[l])}for(o=0,s=r.length;o<s;o++){const l=r[o],c=!!t[l];!l||l==="undefined"||n[l]===c||!c||(toggleClassKey(e,l,!0),n[l]=c)}return n}function style$1(e,t,n){if(!t)return n?setAttribute(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function spread(e,t={},n,r){const i={};return r||createRenderEffect(()=>i.children=insertExpression(e,t.children,i.children)),createRenderEffect(()=>t.ref&&t.ref(e)),createRenderEffect(()=>assign(e,t,n,!0,i,!0)),i}function use(e,t,n){return untrack(()=>e(t,n))}function insert(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return insertExpression(e,t,r,n);createRenderEffect(i=>insertExpression(e,t(),i,n),r)}function assign(e,t,n,r,i={},o=!1){t||(t={});for(const s in i)if(!(s in t)){if(s==="children")continue;i[s]=assignProp(e,s,null,i[s],n,o)}for(const s in t){if(s==="children"){r||insertExpression(e,t.children);continue}const l=t[s];i[s]=assignProp(e,s,l,i[s],n,o)}}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function toggleClassKey(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function assignProp(e,t,n,r,i,o){let s,l,c;if(t==="style")return style$1(e,n,r);if(t==="classList")return classList(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const d=t.slice(3);r&&e.removeEventListener(d,r),n&&e.addEventListener(d,n)}else if(t.slice(0,10)==="oncapture:"){const d=t.slice(10);r&&e.removeEventListener(d,r,!0),n&&e.addEventListener(d,n,!0)}else if(t.slice(0,2)==="on"){const d=t.slice(2).toLowerCase(),f=DelegatedEvents.has(d);if(!f&&r){const m=Array.isArray(r)?r[0]:r;e.removeEventListener(d,m)}(f||n)&&(addEventListener$1(e,d,n,f),f&&delegateEvents([d]))}else if((c=ChildProperties.has(t))||!i&&(PropAliases[t]||(l=Properties.has(t)))||(s=e.nodeName.includes("-")))t==="class"||t==="className"?className(e,n):s&&!l&&!c?e[toPropertyName(t)]=n:e[PropAliases[t]||t]=n;else{const d=i&&t.indexOf(":")>-1&&SVGNamespace[t.split(":")[0]];d?setAttributeNS(e,d,t,n):setAttribute(e,Aliases[t]||t,n)}return n}function eventHandler(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),sharedConfig.registry&&!sharedConfig.done&&(sharedConfig.done=!0,document.querySelectorAll("[id^=pl-]").forEach(r=>r.remove()));n!==null;){const r=n[t];if(r&&!n.disabled){const i=n[`${t}Data`];if(i!==void 0?r.call(n,i,e):r.call(n,e),e.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function insertExpression(e,t,n,r,i){for(sharedConfig.context&&!n&&(n=[...e.childNodes]);typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,s=r!==void 0;if(e=s&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(sharedConfig.context)return n;if(o==="number"&&(t=t.toString()),s){let l=n[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),n=cleanChildren(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(sharedConfig.context)return n;n=cleanChildren(e,n,r)}else{if(o==="function")return createRenderEffect(()=>{let l=t();for(;typeof l=="function";)l=l();n=insertExpression(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(normalizeIncomingArray(l,t,n,i))return createRenderEffect(()=>n=insertExpression(e,l,n,r,!0)),()=>n;if(sharedConfig.context){if(!l.length)return n;for(let d=0;d<l.length;d++)if(l[d].parentNode)return n=l}if(l.length===0){if(n=cleanChildren(e,n,r),s)return n}else c?n.length===0?appendNodes(e,l,r):reconcileArrays(e,n,l):(n&&cleanChildren(e),appendNodes(e,l));n=l}else if(t instanceof Node){if(sharedConfig.context&&t.parentNode)return n=s?[t]:t;if(Array.isArray(n)){if(s)return n=cleanChildren(e,n,r,t);cleanChildren(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function normalizeIncomingArray(e,t,n,r){let i=!1;for(let o=0,s=t.length;o<s;o++){let l=t[o],c=n&&n[o];if(l instanceof Node)e.push(l);else if(!(l==null||l===!0||l===!1))if(Array.isArray(l))i=normalizeIncomingArray(e,l,c)||i;else if(typeof l=="function")if(r){for(;typeof l=="function";)l=l();i=normalizeIncomingArray(e,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||i}else e.push(l),i=!0;else{const d=String(l);c&&c.nodeType===3&&c.data===d?e.push(c):e.push(document.createTextNode(d))}}return i}function appendNodes(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function cleanChildren(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let s=t.length-1;s>=0;s--){const l=t[s];if(i!==l){const c=l.parentNode===e;!o&&!s?c?e.replaceChild(i,l):e.insertBefore(i,n):c&&l.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}const _tmpl$$8=template("<button>from file</button>"),_tmpl$2$2=template('<input type="file" style="display: none;" accept=".mp3, .wav, .m4a">'),AudioInput=e=>{let t;return[(()=>{const n=_tmpl$$8.cloneNode(!0);return n.$$click=()=>t?.click(),n})(),(()=>{const n=_tmpl$2$2.cloneNode(!0);n.addEventListener("change",i=>{const[o]=[...i.currentTarget.files||[]];!o||e.onChange(o)});const r=t;return typeof r=="function"?use(r,n):t=n,n})()]};delegateEvents(["click"]);function unmute(e,t=!1,n=!1){let r;document.hidden!==void 0?r={hidden:"hidden",visibilitychange:"visibilitychange"}:document.webkitHidden!==void 0?r={hidden:"webkitHidden",visibilitychange:"webkitvisibilitychange"}:document.mozHidden!==void 0?r={hidden:"mozHidden",visibilitychange:"mozvisibilitychange"}:document.msHidden!==void 0&&(r={hidden:"msHidden",visibilitychange:"msvisibilitychange"});function i(R,W,q,X,_){for(let P=0;P<W.length;++P)R.addEventListener(W[P],q,{capture:X,passive:_})}function o(R,W,q,X,_){for(let P=0;P<W.length;++P)R.removeEventListener(W[P],q,{capture:X,passive:_})}function s(){}let l=navigator.userAgent.toLowerCase(),c=n||l.indexOf("iphone")>=0&&l.indexOf("like iphone")<0||l.indexOf("ipad")>=0&&l.indexOf("like ipad")<0||l.indexOf("ipod")>=0&&l.indexOf("like ipod")<0||l.indexOf("mac os x")>=0&&navigator.maxTouchPoints>0,d=!0;function f(){let R=!!(t||(!r||!document[r.hidden])&&(!c||document.hasFocus()));R!==d&&(d=R,N(!1),v())}function m(){f()}r&&i(document,[r.visibilitychange],m,!0,!0);function b(R){R&&R.target!==window||f()}c&&i(window,["focus","blur"],b,!0,!0);function v(){if(d){if(e.state!=="running"&&e.state!=="closed"&&E){let R=e.resume();R&&R.then(s,s).catch(s)}}else if(e.state==="running"){let R=e.suspend();R&&R.then(s,s).catch(s)}}function w(R){(!R||!R.unmute_handled)&&(R.unmute_handled=!0,v())}i(e,["statechange"],w,!0,!0),e.onstatechange||(e.onstatechange=w);let $=null;function T(R,W){let q=W;for(;R>1;R--)q+=W;return q}let I="data:audio/mpeg;base64,//uQx"+T(23,"A")+"WGluZwAAAA8AAAACAAACcQCA"+T(16,"gICA")+T(66,"/")+"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI"+T(320,"A")+"//sQxAADgnABGiAAQBCqgCRMAAgEAH"+T(15,"/")+"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq"+T(18,"/")+"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw"+T(97,"V")+"Q==";function N(R){if(c)if(d){if(R){if(!$){let W=document.createElement("div");W.innerHTML="<audio x-webkit-airplay='deny'></audio>",$=W.children.item(0),$.controls=!1,$.disableRemotePlayback=!0,$.preload="auto",$.src=I,$.loop=!0,$.load()}if($.paused){let W=$.play();W&&W.then(s,F).catch(F)}}}else F()}function F(){$&&($.src="about:blank",$.load(),$=null)}const B=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let E=!1;function D(){E=!0,N(!0),v()}return i(window,B,D,!0,!0),{dispose:function(){F(),r&&o(document,[r.visibilitychange],m,!0,!0),c&&o(window,["focus","blur"],b,!0,!0),o(window,B,D,!0,!0),o(e,["statechange"],w,!0,!0),e.onstatechange===w&&(e.onstatechange=null)}}}const audioContext=new AudioContext;unmute(audioContext);const useAnimationFrame=e=>{let t;const n=()=>{e(),t=requestAnimationFrame(n)};onMount(()=>{t=requestAnimationFrame(n)}),onCleanup(()=>{cancelAnimationFrame(t)})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},audiobufferToWav=audioBufferToWav;function audioBufferToWav(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,o=i===3?32:16,s;return n===2?s=interleave(e.getChannelData(0),e.getChannelData(1)):s=e.getChannelData(0),encodeWAV(s,i,r,n,o)}function encodeWAV(e,t,n,r,i){var o=i/8,s=r*o,l=new ArrayBuffer(44+e.length*o),c=new DataView(l);return writeString(c,0,"RIFF"),c.setUint32(4,36+e.length*o,!0),writeString(c,8,"WAVE"),writeString(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,t,!0),c.setUint16(22,r,!0),c.setUint32(24,n,!0),c.setUint32(28,n*s,!0),c.setUint16(32,s,!0),c.setUint16(34,i,!0),writeString(c,36,"data"),c.setUint32(40,e.length*o,!0),t===1?floatTo16BitPCM(c,44,e):writeFloat32(c,44,e),l}function interleave(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,o=0;i<n;)r[i++]=e[o],r[i++]=t[o],o++;return r}function writeFloat32(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function floatTo16BitPCM(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function writeString(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const player=createPlayer(audioContext);window.player=player;function createFxAssembly(e){const t=e.createBiquadFilter();t.type="lowpass",t.Q.value=0;const n=e.createBiquadFilter();n.type="highpass",n.Q.value=0;const r=e.createDynamicsCompressor(),i=e.createGain();return t.connect(n).connect(r).connect(i),{in:t,out:i,loPassFreq:t.frequency,hiPassFreq:n.frequency,compressionThreshold:r.threshold,gain:i.gain}}function createPlayer(e){const[t,n]=createSignal(void 0),[r,i]=createSignal({start:0,end:1});let o;const[s,l]=createSignal(!1),[c,d]=createSignal(0),[f,m]=createSignal(0),[b,v]=createSignal(100),[w,$]=createSignal(0),[T,I]=createSignal(0),[N,F]=createSignal(0),B=()=>{const _=f()+100*c();return Math.pow(2,_/1200)},E=createFxAssembly(e);E.out.connect(e.destination),createEffect(()=>{rampTo(E.gain,Math.pow(10,N()/20))}),createEffect(()=>{rampTo(E.hiPassFreq,mapLinearToLogarithmic(w()))}),createEffect(()=>{rampTo(E.loPassFreq,mapLinearToLogarithmic(b()))}),createEffect(()=>{rampTo(E.compressionThreshold,T())}),createEffect(()=>{B();const _=o?.sourceAssembly.sourceNode.buffer;_&&(R(),D(_,r()))});const D=(_,P={start:0,end:1})=>{R(),i(P),n(e.currentTime),s()?o=schedulePlaybackLoop(e,_,P,B(),E.in):o={sourceAssembly:schedulePlaybackSingle(e,_,P,B(),E.in,R)}},R=()=>{!o||(clearInterval(o.gainEnvelopeScheduler),smoothStop(o.sourceAssembly),o=void 0,n(void 0))},W=()=>t()!==void 0,[q,X]=createSignal(0);return useAnimationFrame(()=>{const _=t();if(!_||!o?.sourceAssembly.sourceNode.buffer)return;const P=(r().end-r().start)*o.sourceAssembly.sourceNode.buffer.duration,L=(e.currentTime-_)*B()%P,U=o.sourceAssembly.sourceNode.buffer.duration*r().start,Y=L+U;X(Y/o.sourceAssembly.sourceNode.buffer.duration)}),{play:D,playing:W,region:r,stop:R,progress:q,loop:s,setLoop:l,pitchOffsetSemis:c,setPitchOffsetSemis:d,pitchOffsetCents:f,setPitchOffsetCents:m,loPass:b,setLoPass:_=>{_<w()&&$(_),v(_)},hiPass:w,setHiPass:_=>{b()<_&&v(_),$(_)},speed:B,compressionThreshold:T,setCompressionThreshold:I,gain:N,setGain:F}}window.createPlayer=createPlayer;function rampTo(e,t,n=.001){e.cancelScheduledValues(audioContext.currentTime),e.value=e.value,e.linearRampToValueAtTime(t,audioContext.currentTime+n)}const smoothStop=(e,t=.001)=>{const n=audioContext.currentTime+t;e.gainNode.gain.cancelScheduledValues(audioContext.currentTime),e.gainNode.gain.setValueAtTime(1,audioContext.currentTime),e.gainNode.gain.linearRampToValueAtTime(0,n),e.sourceNode.onended=null,e.sourceNode.stop(n)},schedulePlaybackSingle=(e,t,n,r,i,o)=>{const s=e.currentTime,l=t.duration*n.start,c=t.duration*(n.end-n.start),d=e.createGain();d.connect(i);const f=e.createBufferSource();return f.playbackRate.value=r,f.buffer=t,f.connect(d),o&&(f.onended=o),scheduleEnvelope(d,{start:s,end:s+c/r,ramp:.001}),f.start(s,l,c),{sourceNode:f,gainNode:d}},schedulePlaybackLoop=(e,t,n,r,i)=>{const o=e.currentTime,s=t.duration*n.start,l=t.duration*n.end,c=e.createGain();c.connect(i);const d=e.createBufferSource();d.buffer=t,d.loop=!0,d.loopStart=s,d.loopEnd=l,d.playbackRate.value=r,d.connect(c);const f={sourceNode:d,gainNode:c},m=startEnvelopeScheduler(f,n,o,r);return d.start(o,s),{sourceAssembly:f,gainEnvelopeScheduler:m}},startEnvelopeScheduler=(e,t,n,r)=>{const i=(t.end-t.start)*(e.sourceNode.buffer?.duration||1)/r;let o=-1;const s=()=>{const l=audioContext.currentTime+1;for(let c=o+1;c*i+n<l;c++)o=c,scheduleEnvelope(e.gainNode,{start:n+c*i,end:n+(c+1)*i,ramp:.001})};return s(),setInterval(s,300)},scheduleEnvelope=(e,t)=>{e.gain.setValueAtTime(0,t.start),e.gain.linearRampToValueAtTime(1,t.start+t.ramp),e.gain.setValueAtTime(1,t.end-t.ramp),e.gain.linearRampToValueAtTime(0,t.end)},print=async(e,t,n,r,i,o,s)=>{const l=new OfflineAudioContext(e.numberOfChannels,e.duration*e.sampleRate*(t.end-t.start)/n,e.sampleRate),c=createFxAssembly(l);c.hiPassFreq.value=mapLinearToLogarithmic(r),c.loPassFreq.value=mapLinearToLogarithmic(i),c.compressionThreshold.value=o,c.gain.value=Math.pow(10,s/20),c.out.connect(l.destination),schedulePlaybackSingle(l,e,t,n,c.in);const d=await l.startRendering(),f=audiobufferToWav(d),m=await crypto.subtle.digest("SHA-256",f),v=Array.from(new Uint8Array(m)).map(w=>w.toString(16).padStart(2,"0")).join("")+".wav";return{wav:f,fileName:v}};function mapLinearToLogarithmic(e){const o=(Math.log10(2e4)-Math.log10(20))*((e-0)/100);return Math.pow(10,Math.log10(20)+o)}const download=async(e,t,n,r,i,o,s)=>{const{wav:l,fileName:c}=await print(e,t,n,i,r,o,s),d=URL.createObjectURL(new Blob([l],{type:"audio/wav"})),f=document.createElement("a");f.href=d,f.setAttribute("download",c),f.click(),URL.revokeObjectURL(d)},share=async(e,t,n,r,i,o,s)=>{const{wav:l,fileName:c}=await print(e,t,n,i,r,o,s),d=new File([l],c,{type:"audio/wav"});navigator.share({files:[d]})},$RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$NAME=Symbol("store-name");function wrap$1(e,t){let n=e[$PROXY];if(!n&&(Object.defineProperty(e,$PROXY,{value:n=new Proxy(e,proxyTraps$1)}),!Array.isArray(e))){const r=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let o=0,s=r.length;o<s;o++){const l=r[o];if(i[l].get){const c=i[l].get.bind(n);Object.defineProperty(e,l,{enumerable:i[l].enumerable,get:c})}}}return n}function isWrappable(e){let t;return e!=null&&typeof e=="object"&&(e[$PROXY]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function unwrap(e,t=new Set){let n,r,i,o;if(n=e!=null&&e[$RAW])return n;if(!isWrappable(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,l=e.length;s<l;s++)i=e[s],(r=unwrap(i,t))!==i&&(e[s]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let c=0,d=s.length;c<d;c++)o=s[c],!l[o].get&&(i=e[o],(r=unwrap(i,t))!==i&&(e[o]=r))}return e}function getDataNodes(e){let t=e[$NODE];return t||Object.defineProperty(e,$NODE,{value:t={}}),t}function getDataNode(e,t,n){return e[t]||(e[t]=createDataNode(n))}function proxyDescriptor$1(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===$PROXY||t===$NODE||t===$NAME||(delete n.value,delete n.writable,n.get=()=>e[$PROXY][t]),n}function trackSelf(e){if(getListener()){const t=getDataNodes(e);(t._||(t._=createDataNode()))()}}function ownKeys(e){return trackSelf(e),Reflect.ownKeys(e)}function createDataNode(e){const[t,n]=createSignal(e,{equals:!1,internal:!0});return t.$=n,t}const proxyTraps$1={get(e,t,n){if(t===$RAW)return e;if(t===$PROXY)return n;if(t===$TRACK)return trackSelf(e),n;const r=getDataNodes(e),i=r.hasOwnProperty(t);let o=i?r[t]():e[t];if(t===$NODE||t==="__proto__")return o;if(!i){const s=Object.getOwnPropertyDescriptor(e,t);getListener()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(s&&s.get)&&(o=getDataNode(r,t,o)())}return isWrappable(o)?wrap$1(o):o},has(e,t){return t===$RAW||t===$PROXY||t===$TRACK||t===$NODE||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(e,t,n,r=!1){if(!r&&e[t]===n)return;const i=e[t],o=e.length;n===void 0?delete e[t]:e[t]=n;let s=getDataNodes(e),l;(l=getDataNode(s,t,i))&&l.$(()=>n),Array.isArray(e)&&e.length!==o&&(l=getDataNode(s,"length",o))&&l.$(e.length),(l=s._)&&l.$()}function mergeStoreNode(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];setProperty(e,i,t[i])}}function updateArray(e,t){if(typeof t=="function"&&(t=t(e)),t=unwrap(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const i=t[n];e[n]!==i&&setProperty(e,n,i)}setProperty(e,"length",r)}else mergeStoreNode(e,t)}function updatePath(e,t,n=[]){let r,i=e;if(t.length>1){r=t.shift();const s=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let c=0;c<r.length;c++)updatePath(e,[r[c]].concat(t),n);return}else if(l&&s==="function"){for(let c=0;c<e.length;c++)r(e[c],c)&&updatePath(e,[c].concat(t),n);return}else if(l&&s==="object"){const{from:c=0,to:d=e.length-1,by:f=1}=r;for(let m=c;m<=d;m+=f)updatePath(e,[m].concat(t),n);return}else if(t.length>1){updatePath(e[r],t,[r].concat(n));return}i=e[r],n=[r].concat(n)}let o=t[0];typeof o=="function"&&(o=o(i,n),o===i)||r===void 0&&o==null||(o=unwrap(o),r===void 0||isWrappable(i)&&isWrappable(o)&&!Array.isArray(o)?mergeStoreNode(i,o):setProperty(e,r,o))}function createStore(...[e,t]){const n=unwrap(e||{}),r=Array.isArray(n),i=wrap$1(n);function o(...s){batch(()=>{r&&s.length===1?updateArray(n,s[0]):updatePath(n,s)})}return[i,o]}const $ROOT=Symbol("store-root");function applyState(e,t,n,r,i){const o=t[n];if(e===o)return;if(!isWrappable(e)||!isWrappable(o)||i&&e[i]!==o[i]){if(e!==o){if(n===$ROOT)return e;setProperty(t,n,e)}return}if(Array.isArray(e)){if(e.length&&o.length&&(!r||i&&e[0][i]!=null)){let c,d,f,m,b,v,w,$;for(f=0,m=Math.min(o.length,e.length);f<m&&(o[f]===e[f]||i&&o[f][i]===e[f][i]);f++)applyState(e[f],o,f,r,i);const T=new Array(e.length),I=new Map;for(m=o.length-1,b=e.length-1;m>=f&&b>=f&&(o[m]===e[b]||i&&o[m][i]===e[b][i]);m--,b--)T[b]=o[m];if(f>b||f>m){for(d=f;d<=b;d++)setProperty(o,d,e[d]);for(;d<e.length;d++)setProperty(o,d,T[d]),applyState(e[d],o,d,r,i);o.length>e.length&&setProperty(o,"length",e.length);return}for(w=new Array(b+1),d=b;d>=f;d--)v=e[d],$=i?v[i]:v,c=I.get($),w[d]=c===void 0?-1:c,I.set($,d);for(c=f;c<=m;c++)v=o[c],$=i?v[i]:v,d=I.get($),d!==void 0&&d!==-1&&(T[d]=o[c],d=w[d],I.set($,d));for(d=f;d<e.length;d++)d in T?(setProperty(o,d,T[d]),applyState(e[d],o,d,r,i)):setProperty(o,d,e[d])}else for(let c=0,d=e.length;c<d;c++)applyState(e[c],o,c,r,i);o.length>e.length&&setProperty(o,"length",e.length);return}const s=Object.keys(e);for(let c=0,d=s.length;c<d;c++)applyState(e[s[c]],o,s[c],r,i);const l=Object.keys(o);for(let c=0,d=l.length;c<d;c++)e[l[c]]===void 0&&setProperty(o,l[c],void 0)}function reconcile(e,t={}){const{merge:n,key:r="id"}=t,i=unwrap(e);return o=>{if(!isWrappable(o)||!isWrappable(i))return i;const s=applyState(i,{[$ROOT]:o},$ROOT,n,r);return s===void 0?o:s}}const range=(e,t,n=1)=>[...new Array(Math.ceil((t-e)/n))].map((r,i)=>i*n);function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage$1={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,o){function s(d,f){if(!i[d]){if(!r[d]){var m=typeof commonjsRequire=="function"&&commonjsRequire;if(!f&&m)return m(d,!0);if(l)return l(d,!0);var b=new Error("Cannot find module '"+d+"'");throw b.code="MODULE_NOT_FOUND",b}var v=i[d]={exports:{}};r[d][0].call(v.exports,function(w){var $=r[d][1][w];return s($||w)},v,v.exports,n,r,i,o)}return i[d].exports}for(var l=typeof commonjsRequire=="function"&&commonjsRequire,c=0;c<o.length;c++)s(o[c]);return s}({1:[function(n,r,i){(function(o){var s=o.MutationObserver||o.WebKitMutationObserver,l;if(s){var c=0,d=new s(w),f=o.document.createTextNode("");d.observe(f,{characterData:!0}),l=function(){f.data=c=++c%2}}else if(!o.setImmediate&&typeof o.MessageChannel<"u"){var m=new o.MessageChannel;m.port1.onmessage=w,l=function(){m.port2.postMessage(0)}}else"document"in o&&"onreadystatechange"in o.document.createElement("script")?l=function(){var T=o.document.createElement("script");T.onreadystatechange=function(){w(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},o.document.documentElement.appendChild(T)}:l=function(){setTimeout(w,0)};var b,v=[];function w(){b=!0;for(var T,I,N=v.length;N;){for(I=v,v=[],T=-1;++T<N;)I[T]();N=v.length}b=!1}r.exports=$;function $(T){v.push(T)===1&&!b&&l()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var o=n(1);function s(){}var l={},c=["REJECTED"],d=["FULFILLED"],f=["PENDING"];r.exports=m;function m(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,E!==s&&$(this,E)}m.prototype.catch=function(E){return this.then(null,E)},m.prototype.then=function(E,D){if(typeof E!="function"&&this.state===d||typeof D!="function"&&this.state===c)return this;var R=new this.constructor(s);if(this.state!==f){var W=this.state===d?E:D;v(R,W,this.outcome)}else this.queue.push(new b(R,E,D));return R};function b(E,D,R){this.promise=E,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}b.prototype.callFulfilled=function(E){l.resolve(this.promise,E)},b.prototype.otherCallFulfilled=function(E){v(this.promise,this.onFulfilled,E)},b.prototype.callRejected=function(E){l.reject(this.promise,E)},b.prototype.otherCallRejected=function(E){v(this.promise,this.onRejected,E)};function v(E,D,R){o(function(){var W;try{W=D(R)}catch(q){return l.reject(E,q)}W===E?l.reject(E,new TypeError("Cannot resolve promise with itself")):l.resolve(E,W)})}l.resolve=function(E,D){var R=T(w,D);if(R.status==="error")return l.reject(E,R.value);var W=R.value;if(W)$(E,W);else{E.state=d,E.outcome=D;for(var q=-1,X=E.queue.length;++q<X;)E.queue[q].callFulfilled(D)}return E},l.reject=function(E,D){E.state=c,E.outcome=D;for(var R=-1,W=E.queue.length;++R<W;)E.queue[R].callRejected(D);return E};function w(E){var D=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof D=="function")return function(){D.apply(E,arguments)}}function $(E,D){var R=!1;function W(P){R||(R=!0,l.reject(E,P))}function q(P){R||(R=!0,l.resolve(E,P))}function X(){D(q,W)}var _=T(X);_.status==="error"&&W(_.value)}function T(E,D){var R={};try{R.value=E(D),R.status="success"}catch(W){R.status="error",R.value=W}return R}m.resolve=I;function I(E){return E instanceof this?E:l.resolve(new this(s),E)}m.reject=N;function N(E){var D=new this(s);return l.reject(D,E)}m.all=F;function F(E){var D=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=E.length,W=!1;if(!R)return this.resolve([]);for(var q=new Array(R),X=0,_=-1,P=new this(s);++_<R;)x(E[_],_);return P;function x(L,U){D.resolve(L).then(Y,function(J){W||(W=!0,l.reject(P,J))});function Y(J){q[U]=J,++X===R&&!W&&(W=!0,l.resolve(P,q))}}}m.race=B;function B(E){var D=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=E.length,W=!1;if(!R)return this.resolve([]);for(var q=-1,X=new this(s);++q<R;)_(E[q]);return X;function _(P){D.resolve(P).then(function(x){W||(W=!0,l.resolve(X,x))},function(x){W||(W=!0,l.reject(X,x))})}}},{1:1}],3:[function(n,r,i){(function(o){typeof o.Promise!="function"&&(o.Promise=n(2))}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function s(a,h){if(!(a instanceof h))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=l();function d(){try{if(!c||!c.open)return!1;var a=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),h=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!a||h)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(a,h){a=a||[],h=h||{};try{return new Blob(a,h)}catch(p){if(p.name!=="TypeError")throw p;for(var u=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,g=new u,y=0;y<a.length;y+=1)g.append(a[y]);return g.getBlob(h.type)}}typeof Promise>"u"&&n(3);var m=Promise;function b(a,h){h&&a.then(function(u){h(null,u)},function(u){h(u)})}function v(a,h,u){typeof h=="function"&&a.then(h),typeof u=="function"&&a.catch(u)}function w(a){return typeof a!="string"&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function $(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var T="local-forage-detect-blob-support",I=void 0,N={},F=Object.prototype.toString,B="readonly",E="readwrite";function D(a){for(var h=a.length,u=new ArrayBuffer(h),g=new Uint8Array(u),y=0;y<h;y++)g[y]=a.charCodeAt(y);return u}function R(a){return new m(function(h){var u=a.transaction(T,E),g=f([""]);u.objectStore(T).put(g,"key"),u.onabort=function(y){y.preventDefault(),y.stopPropagation(),h(!1)},u.oncomplete=function(){var y=navigator.userAgent.match(/Chrome\/(\d+)/),p=navigator.userAgent.match(/Edge\//);h(p||!y||parseInt(y[1],10)>=43)}}).catch(function(){return!1})}function W(a){return typeof I=="boolean"?m.resolve(I):R(a).then(function(h){return I=h,I})}function q(a){var h=N[a.name],u={};u.promise=new m(function(g,y){u.resolve=g,u.reject=y}),h.deferredOperations.push(u),h.dbReady?h.dbReady=h.dbReady.then(function(){return u.promise}):h.dbReady=u.promise}function X(a){var h=N[a.name],u=h.deferredOperations.pop();if(u)return u.resolve(),u.promise}function _(a,h){var u=N[a.name],g=u.deferredOperations.pop();if(g)return g.reject(h),g.promise}function P(a,h){return new m(function(u,g){if(N[a.name]=N[a.name]||ve(),a.db)if(h)q(a),a.db.close();else return u(a.db);var y=[a.name];h&&y.push(a.version);var p=c.open.apply(c,y);h&&(p.onupgradeneeded=function(k){var S=p.result;try{S.createObjectStore(a.storeName),k.oldVersion<=1&&S.createObjectStore(T)}catch(C){if(C.name==="ConstraintError")console.warn('The database "'+a.name+'" has been upgraded from version '+k.oldVersion+" to version "+k.newVersion+', but the storage "'+a.storeName+'" already exists.');else throw C}}),p.onerror=function(k){k.preventDefault(),g(p.error)},p.onsuccess=function(){var k=p.result;k.onversionchange=function(S){S.target.close()},u(k),X(a)}})}function x(a){return P(a,!1)}function L(a){return P(a,!0)}function U(a,h){if(!a.db)return!0;var u=!a.db.objectStoreNames.contains(a.storeName),g=a.version<a.db.version,y=a.version>a.db.version;if(g&&(a.version!==h&&console.warn('The database "'+a.name+`" can't be downgraded from version `+a.db.version+" to version "+a.version+"."),a.version=a.db.version),y||u){if(u){var p=a.db.version+1;p>a.version&&(a.version=p)}return!0}return!1}function Y(a){return new m(function(h,u){var g=new FileReader;g.onerror=u,g.onloadend=function(y){var p=btoa(y.target.result||"");h({__local_forage_encoded_blob:!0,data:p,type:a.type})},g.readAsBinaryString(a)})}function J(a){var h=D(atob(a.data));return f([h],{type:a.type})}function z(a){return a&&a.__local_forage_encoded_blob}function G(a){var h=this,u=h._initReady().then(function(){var g=N[h._dbInfo.name];if(g&&g.dbReady)return g.dbReady});return v(u,a,a),u}function K(a){q(a);for(var h=N[a.name],u=h.forages,g=0;g<u.length;g++){var y=u[g];y._dbInfo.db&&(y._dbInfo.db.close(),y._dbInfo.db=null)}return a.db=null,x(a).then(function(p){return a.db=p,U(a)?L(a):p}).then(function(p){a.db=h.db=p;for(var k=0;k<u.length;k++)u[k]._dbInfo.db=p}).catch(function(p){throw _(a,p),p})}function te(a,h,u,g){g===void 0&&(g=1);try{var y=a.db.transaction(a.storeName,h);u(null,y)}catch(p){if(g>0&&(!a.db||p.name==="InvalidStateError"||p.name==="NotFoundError"))return m.resolve().then(function(){if(!a.db||p.name==="NotFoundError"&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),L(a)}).then(function(){return K(a).then(function(){te(a,h,u,g-1)})}).catch(u);u(p)}}function ve(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function We(a){var h=this,u={db:null};if(a)for(var g in a)u[g]=a[g];var y=N[u.name];y||(y=ve(),N[u.name]=y),y.forages.push(h),h._initReady||(h._initReady=h.ready,h.ready=G);var p=[];function k(){return m.resolve()}for(var S=0;S<y.forages.length;S++){var C=y.forages[S];C!==h&&p.push(C._initReady().catch(k))}var A=y.forages.slice(0);return m.all(p).then(function(){return u.db=y.db,x(u)}).then(function(O){return u.db=O,U(u,h._defaultConfig.version)?L(u):O}).then(function(O){u.db=y.db=O,h._dbInfo=u;for(var M=0;M<A.length;M++){var j=A[M];j!==h&&(j._dbInfo.db=u.db,j._dbInfo.version=u.version)}})}function Be(a,h){var u=this;a=w(a);var g=new m(function(y,p){u.ready().then(function(){te(u._dbInfo,B,function(k,S){if(k)return p(k);try{var C=S.objectStore(u._dbInfo.storeName),A=C.get(a);A.onsuccess=function(){var O=A.result;O===void 0&&(O=null),z(O)&&(O=J(O)),y(O)},A.onerror=function(){p(A.error)}}catch(O){p(O)}})}).catch(p)});return b(g,h),g}function Fe(a,h){var u=this,g=new m(function(y,p){u.ready().then(function(){te(u._dbInfo,B,function(k,S){if(k)return p(k);try{var C=S.objectStore(u._dbInfo.storeName),A=C.openCursor(),O=1;A.onsuccess=function(){var M=A.result;if(M){var j=M.value;z(j)&&(j=J(j));var H=a(j,M.key,O++);H!==void 0?y(H):M.continue()}else y()},A.onerror=function(){p(A.error)}}catch(M){p(M)}})}).catch(p)});return b(g,h),g}function Ue(a,h,u){var g=this;a=w(a);var y=new m(function(p,k){var S;g.ready().then(function(){return S=g._dbInfo,F.call(h)==="[object Blob]"?W(S.db).then(function(C){return C?h:Y(h)}):h}).then(function(C){te(g._dbInfo,E,function(A,O){if(A)return k(A);try{var M=O.objectStore(g._dbInfo.storeName);C===null&&(C=void 0);var j=M.put(C,a);O.oncomplete=function(){C===void 0&&(C=null),p(C)},O.onabort=O.onerror=function(){var H=j.error?j.error:j.transaction.error;k(H)}}catch(H){k(H)}})}).catch(k)});return b(y,u),y}function je(a,h){var u=this;a=w(a);var g=new m(function(y,p){u.ready().then(function(){te(u._dbInfo,E,function(k,S){if(k)return p(k);try{var C=S.objectStore(u._dbInfo.storeName),A=C.delete(a);S.oncomplete=function(){y()},S.onerror=function(){p(A.error)},S.onabort=function(){var O=A.error?A.error:A.transaction.error;p(O)}}catch(O){p(O)}})}).catch(p)});return b(g,h),g}function ze(a){var h=this,u=new m(function(g,y){h.ready().then(function(){te(h._dbInfo,E,function(p,k){if(p)return y(p);try{var S=k.objectStore(h._dbInfo.storeName),C=S.clear();k.oncomplete=function(){g()},k.onabort=k.onerror=function(){var A=C.error?C.error:C.transaction.error;y(A)}}catch(A){y(A)}})}).catch(y)});return b(u,a),u}function qe(a){var h=this,u=new m(function(g,y){h.ready().then(function(){te(h._dbInfo,B,function(p,k){if(p)return y(p);try{var S=k.objectStore(h._dbInfo.storeName),C=S.count();C.onsuccess=function(){g(C.result)},C.onerror=function(){y(C.error)}}catch(A){y(A)}})}).catch(y)});return b(u,a),u}function He(a,h){var u=this,g=new m(function(y,p){if(a<0){y(null);return}u.ready().then(function(){te(u._dbInfo,B,function(k,S){if(k)return p(k);try{var C=S.objectStore(u._dbInfo.storeName),A=!1,O=C.openKeyCursor();O.onsuccess=function(){var M=O.result;if(!M){y(null);return}a===0||A?y(M.key):(A=!0,M.advance(a))},O.onerror=function(){p(O.error)}}catch(M){p(M)}})}).catch(p)});return b(g,h),g}function Ve(a){var h=this,u=new m(function(g,y){h.ready().then(function(){te(h._dbInfo,B,function(p,k){if(p)return y(p);try{var S=k.objectStore(h._dbInfo.storeName),C=S.openKeyCursor(),A=[];C.onsuccess=function(){var O=C.result;if(!O){g(A);return}A.push(O.key),O.continue()},C.onerror=function(){y(C.error)}}catch(O){y(O)}})}).catch(y)});return b(u,a),u}function Ke(a,h){h=$.apply(this,arguments);var u=this.config();a=typeof a!="function"&&a||{},a.name||(a.name=a.name||u.name,a.storeName=a.storeName||u.storeName);var g=this,y;if(!a.name)y=m.reject("Invalid arguments");else{var p=a.name===u.name&&g._dbInfo.db,k=p?m.resolve(g._dbInfo.db):x(a).then(function(S){var C=N[a.name],A=C.forages;C.db=S;for(var O=0;O<A.length;O++)A[O]._dbInfo.db=S;return S});a.storeName?y=k.then(function(S){if(!!S.objectStoreNames.contains(a.storeName)){var C=S.version+1;q(a);var A=N[a.name],O=A.forages;S.close();for(var M=0;M<O.length;M++){var j=O[M];j._dbInfo.db=null,j._dbInfo.version=C}var H=new m(function(V,Z){var Q=c.open(a.name,C);Q.onerror=function(ee){var se=Q.result;se.close(),Z(ee)},Q.onupgradeneeded=function(){var ee=Q.result;ee.deleteObjectStore(a.storeName)},Q.onsuccess=function(){var ee=Q.result;ee.close(),V(ee)}});return H.then(function(V){A.db=V;for(var Z=0;Z<O.length;Z++){var Q=O[Z];Q._dbInfo.db=V,X(Q._dbInfo)}}).catch(function(V){throw(_(a,V)||m.resolve()).catch(function(){}),V})}}):y=k.then(function(S){q(a);var C=N[a.name],A=C.forages;S.close();for(var O=0;O<A.length;O++){var M=A[O];M._dbInfo.db=null}var j=new m(function(H,V){var Z=c.deleteDatabase(a.name);Z.onerror=function(){var Q=Z.result;Q&&Q.close(),V(Z.error)},Z.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},Z.onsuccess=function(){var Q=Z.result;Q&&Q.close(),H(Q)}});return j.then(function(H){C.db=H;for(var V=0;V<A.length;V++){var Z=A[V];X(Z._dbInfo)}}).catch(function(H){throw(_(a,H)||m.resolve()).catch(function(){}),H})})}return b(y,h),y}var Xe={_driver:"asyncStorage",_initStorage:We,_support:d(),iterate:Fe,getItem:Be,setItem:Ue,removeItem:je,clear:ze,length:qe,key:He,keys:Ve,dropInstance:Ke};function Ye(){return typeof openDatabase=="function"}var ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ge="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,ae="__lfsc__:",ce=ae.length,ue="arbf",fe="blob",we="si08",_e="ui08",ke="uic8",xe="si16",Ee="si32",Se="ur16",$e="ui32",Pe="fl32",Ce="fl64",Ae=ce+ue.length,Te=Object.prototype.toString;function Oe(a){var h=a.length*.75,u=a.length,g,y=0,p,k,S,C;a[a.length-1]==="="&&(h--,a[a.length-2]==="="&&h--);var A=new ArrayBuffer(h),O=new Uint8Array(A);for(g=0;g<u;g+=4)p=ne.indexOf(a[g]),k=ne.indexOf(a[g+1]),S=ne.indexOf(a[g+2]),C=ne.indexOf(a[g+3]),O[y++]=p<<2|k>>4,O[y++]=(k&15)<<4|S>>2,O[y++]=(S&3)<<6|C&63;return A}function de(a){var h=new Uint8Array(a),u="",g;for(g=0;g<h.length;g+=3)u+=ne[h[g]>>2],u+=ne[(h[g]&3)<<4|h[g+1]>>4],u+=ne[(h[g+1]&15)<<2|h[g+2]>>6],u+=ne[h[g+2]&63];return h.length%3===2?u=u.substring(0,u.length-1)+"=":h.length%3===1&&(u=u.substring(0,u.length-2)+"=="),u}function Qe(a,h){var u="";if(a&&(u=Te.call(a)),a&&(u==="[object ArrayBuffer]"||a.buffer&&Te.call(a.buffer)==="[object ArrayBuffer]")){var g,y=ae;a instanceof ArrayBuffer?(g=a,y+=ue):(g=a.buffer,u==="[object Int8Array]"?y+=we:u==="[object Uint8Array]"?y+=_e:u==="[object Uint8ClampedArray]"?y+=ke:u==="[object Int16Array]"?y+=xe:u==="[object Uint16Array]"?y+=Se:u==="[object Int32Array]"?y+=Ee:u==="[object Uint32Array]"?y+=$e:u==="[object Float32Array]"?y+=Pe:u==="[object Float64Array]"?y+=Ce:h(new Error("Failed to get type for BinaryArray"))),h(y+de(g))}else if(u==="[object Blob]"){var p=new FileReader;p.onload=function(){var k=Ge+a.type+"~"+de(this.result);h(ae+fe+k)},p.readAsArrayBuffer(a)}else try{h(JSON.stringify(a))}catch(k){console.error("Couldn't convert value into a JSON string: ",a),h(null,k)}}function Ze(a){if(a.substring(0,ce)!==ae)return JSON.parse(a);var h=a.substring(Ae),u=a.substring(ce,Ae),g;if(u===fe&&be.test(h)){var y=h.match(be);g=y[1],h=h.substring(y[0].length)}var p=Oe(h);switch(u){case ue:return p;case fe:return f([p],{type:g});case we:return new Int8Array(p);case _e:return new Uint8Array(p);case ke:return new Uint8ClampedArray(p);case xe:return new Int16Array(p);case Se:return new Uint16Array(p);case Ee:return new Int32Array(p);case $e:return new Uint32Array(p);case Pe:return new Float32Array(p);case Ce:return new Float64Array(p);default:throw new Error("Unkown type: "+u)}}var he={serialize:Qe,deserialize:Ze,stringToBuffer:Oe,bufferToString:de};function Re(a,h,u,g){a.executeSql("CREATE TABLE IF NOT EXISTS "+h.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],u,g)}function Je(a){var h=this,u={db:null};if(a)for(var g in a)u[g]=typeof a[g]!="string"?a[g].toString():a[g];var y=new m(function(p,k){try{u.db=openDatabase(u.name,String(u.version),u.description,u.size)}catch(S){return k(S)}u.db.transaction(function(S){Re(S,u,function(){h._dbInfo=u,p()},function(C,A){k(A)})},k)});return u.serializer=he,y}function re(a,h,u,g,y,p){a.executeSql(u,g,y,function(k,S){S.code===S.SYNTAX_ERR?k.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[h.storeName],function(C,A){A.rows.length?p(C,S):Re(C,h,function(){C.executeSql(u,g,y,p)},p)},p):p(k,S)},p)}function et(a,h){var u=this;a=w(a);var g=new m(function(y,p){u.ready().then(function(){var k=u._dbInfo;k.db.transaction(function(S){re(S,k,"SELECT * FROM "+k.storeName+" WHERE key = ? LIMIT 1",[a],function(C,A){var O=A.rows.length?A.rows.item(0).value:null;O&&(O=k.serializer.deserialize(O)),y(O)},function(C,A){p(A)})})}).catch(p)});return b(g,h),g}function tt(a,h){var u=this,g=new m(function(y,p){u.ready().then(function(){var k=u._dbInfo;k.db.transaction(function(S){re(S,k,"SELECT * FROM "+k.storeName,[],function(C,A){for(var O=A.rows,M=O.length,j=0;j<M;j++){var H=O.item(j),V=H.value;if(V&&(V=k.serializer.deserialize(V)),V=a(V,H.key,j+1),V!==void 0){y(V);return}}y()},function(C,A){p(A)})})}).catch(p)});return b(g,h),g}function Ie(a,h,u,g){var y=this;a=w(a);var p=new m(function(k,S){y.ready().then(function(){h===void 0&&(h=null);var C=h,A=y._dbInfo;A.serializer.serialize(h,function(O,M){M?S(M):A.db.transaction(function(j){re(j,A,"INSERT OR REPLACE INTO "+A.storeName+" (key, value) VALUES (?, ?)",[a,O],function(){k(C)},function(H,V){S(V)})},function(j){if(j.code===j.QUOTA_ERR){if(g>0){k(Ie.apply(y,[a,C,u,g-1]));return}S(j)}})})}).catch(S)});return b(p,u),p}function nt(a,h,u){return Ie.apply(this,[a,h,u,1])}function rt(a,h){var u=this;a=w(a);var g=new m(function(y,p){u.ready().then(function(){var k=u._dbInfo;k.db.transaction(function(S){re(S,k,"DELETE FROM "+k.storeName+" WHERE key = ?",[a],function(){y()},function(C,A){p(A)})})}).catch(p)});return b(g,h),g}function ot(a){var h=this,u=new m(function(g,y){h.ready().then(function(){var p=h._dbInfo;p.db.transaction(function(k){re(k,p,"DELETE FROM "+p.storeName,[],function(){g()},function(S,C){y(C)})})}).catch(y)});return b(u,a),u}function it(a){var h=this,u=new m(function(g,y){h.ready().then(function(){var p=h._dbInfo;p.db.transaction(function(k){re(k,p,"SELECT COUNT(key) as c FROM "+p.storeName,[],function(S,C){var A=C.rows.item(0).c;g(A)},function(S,C){y(C)})})}).catch(y)});return b(u,a),u}function st(a,h){var u=this,g=new m(function(y,p){u.ready().then(function(){var k=u._dbInfo;k.db.transaction(function(S){re(S,k,"SELECT key FROM "+k.storeName+" WHERE id = ? LIMIT 1",[a+1],function(C,A){var O=A.rows.length?A.rows.item(0).key:null;y(O)},function(C,A){p(A)})})}).catch(p)});return b(g,h),g}function at(a){var h=this,u=new m(function(g,y){h.ready().then(function(){var p=h._dbInfo;p.db.transaction(function(k){re(k,p,"SELECT key FROM "+p.storeName,[],function(S,C){for(var A=[],O=0;O<C.rows.length;O++)A.push(C.rows.item(O).key);g(A)},function(S,C){y(C)})})}).catch(y)});return b(u,a),u}function lt(a){return new m(function(h,u){a.transaction(function(g){g.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(y,p){for(var k=[],S=0;S<p.rows.length;S++)k.push(p.rows.item(S).name);h({db:a,storeNames:k})},function(y,p){u(p)})},function(g){u(g)})})}function ct(a,h){h=$.apply(this,arguments);var u=this.config();a=typeof a!="function"&&a||{},a.name||(a.name=a.name||u.name,a.storeName=a.storeName||u.storeName);var g=this,y;return a.name?y=new m(function(p){var k;a.name===u.name?k=g._dbInfo.db:k=openDatabase(a.name,"","",0),a.storeName?p({db:k,storeNames:[a.storeName]}):p(lt(k))}).then(function(p){return new m(function(k,S){p.db.transaction(function(C){function A(H){return new m(function(V,Z){C.executeSql("DROP TABLE IF EXISTS "+H,[],function(){V()},function(Q,ee){Z(ee)})})}for(var O=[],M=0,j=p.storeNames.length;M<j;M++)O.push(A(p.storeNames[M]));m.all(O).then(function(){k()}).catch(function(H){S(H)})},function(C){S(C)})})}):y=m.reject("Invalid arguments"),b(y,h),y}var ut={_driver:"webSQLStorage",_initStorage:Je,_support:Ye(),iterate:tt,getItem:et,setItem:nt,removeItem:rt,clear:ot,length:it,key:st,keys:at,dropInstance:ct};function ft(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ne(a,h){var u=a.name+"/";return a.storeName!==h.storeName&&(u+=a.storeName+"/"),u}function dt(){var a="_localforage_support_test";try{return localStorage.setItem(a,!0),localStorage.removeItem(a),!1}catch{return!0}}function ht(){return!dt()||localStorage.length>0}function pt(a){var h=this,u={};if(a)for(var g in a)u[g]=a[g];return u.keyPrefix=Ne(a,h._defaultConfig),ht()?(h._dbInfo=u,u.serializer=he,m.resolve()):m.reject()}function mt(a){var h=this,u=h.ready().then(function(){for(var g=h._dbInfo.keyPrefix,y=localStorage.length-1;y>=0;y--){var p=localStorage.key(y);p.indexOf(g)===0&&localStorage.removeItem(p)}});return b(u,a),u}function gt(a,h){var u=this;a=w(a);var g=u.ready().then(function(){var y=u._dbInfo,p=localStorage.getItem(y.keyPrefix+a);return p&&(p=y.serializer.deserialize(p)),p});return b(g,h),g}function yt(a,h){var u=this,g=u.ready().then(function(){for(var y=u._dbInfo,p=y.keyPrefix,k=p.length,S=localStorage.length,C=1,A=0;A<S;A++){var O=localStorage.key(A);if(O.indexOf(p)===0){var M=localStorage.getItem(O);if(M&&(M=y.serializer.deserialize(M)),M=a(M,O.substring(k),C++),M!==void 0)return M}}});return b(g,h),g}function vt(a,h){var u=this,g=u.ready().then(function(){var y=u._dbInfo,p;try{p=localStorage.key(a)}catch{p=null}return p&&(p=p.substring(y.keyPrefix.length)),p});return b(g,h),g}function bt(a){var h=this,u=h.ready().then(function(){for(var g=h._dbInfo,y=localStorage.length,p=[],k=0;k<y;k++){var S=localStorage.key(k);S.indexOf(g.keyPrefix)===0&&p.push(S.substring(g.keyPrefix.length))}return p});return b(u,a),u}function wt(a){var h=this,u=h.keys().then(function(g){return g.length});return b(u,a),u}function _t(a,h){var u=this;a=w(a);var g=u.ready().then(function(){var y=u._dbInfo;localStorage.removeItem(y.keyPrefix+a)});return b(g,h),g}function kt(a,h,u){var g=this;a=w(a);var y=g.ready().then(function(){h===void 0&&(h=null);var p=h;return new m(function(k,S){var C=g._dbInfo;C.serializer.serialize(h,function(A,O){if(O)S(O);else try{localStorage.setItem(C.keyPrefix+a,A),k(p)}catch(M){(M.name==="QuotaExceededError"||M.name==="NS_ERROR_DOM_QUOTA_REACHED")&&S(M),S(M)}})})});return b(y,u),y}function xt(a,h){if(h=$.apply(this,arguments),a=typeof a!="function"&&a||{},!a.name){var u=this.config();a.name=a.name||u.name,a.storeName=a.storeName||u.storeName}var g=this,y;return a.name?y=new m(function(p){a.storeName?p(Ne(a,g._defaultConfig)):p(a.name+"/")}).then(function(p){for(var k=localStorage.length-1;k>=0;k--){var S=localStorage.key(k);S.indexOf(p)===0&&localStorage.removeItem(S)}}):y=m.reject("Invalid arguments"),b(y,h),y}var Et={_driver:"localStorageWrapper",_initStorage:pt,_support:ft(),iterate:yt,getItem:gt,setItem:kt,removeItem:_t,clear:mt,length:wt,key:vt,keys:bt,dropInstance:xt},St=function(h,u){return h===u||typeof h=="number"&&typeof u=="number"&&isNaN(h)&&isNaN(u)},$t=function(h,u){for(var g=h.length,y=0;y<g;){if(St(h[y],u))return!0;y++}return!1},Le=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"},ie={},De={},oe={INDEXEDDB:Xe,WEBSQL:ut,LOCALSTORAGE:Et},Pt=[oe.INDEXEDDB._driver,oe.WEBSQL._driver,oe.LOCALSTORAGE._driver],le=["dropInstance"],pe=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(le),Ct={description:"",driver:Pt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function At(a,h){a[h]=function(){var u=arguments;return a.ready().then(function(){return a[h].apply(a,u)})}}function me(){for(var a=1;a<arguments.length;a++){var h=arguments[a];if(h)for(var u in h)h.hasOwnProperty(u)&&(Le(h[u])?arguments[0][u]=h[u].slice():arguments[0][u]=h[u])}return arguments[0]}var Tt=function(){function a(h){s(this,a);for(var u in oe)if(oe.hasOwnProperty(u)){var g=oe[u],y=g._driver;this[u]=y,ie[y]||this.defineDriver(g)}this._defaultConfig=me({},Ct),this._config=me({},this._defaultConfig,h),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(u){if((typeof u>"u"?"undefined":o(u))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var g in u){if(g==="storeName"&&(u[g]=u[g].replace(/\W/g,"_")),g==="version"&&typeof u[g]!="number")return new Error("Database version must be a number.");this._config[g]=u[g]}return"driver"in u&&u.driver?this.setDriver(this._config.driver):!0}else return typeof u=="string"?this._config[u]:this._config},a.prototype.defineDriver=function(u,g,y){var p=new m(function(k,S){try{var C=u._driver,A=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!u._driver){S(A);return}for(var O=pe.concat("_initStorage"),M=0,j=O.length;M<j;M++){var H=O[M],V=!$t(le,H);if((V||u[H])&&typeof u[H]!="function"){S(A);return}}var Z=function(){for(var se=function(It){return function(){var Nt=new Error("Method "+It+" is not implemented by the current driver"),Me=m.reject(Nt);return b(Me,arguments[arguments.length-1]),Me}},ge=0,Rt=le.length;ge<Rt;ge++){var ye=le[ge];u[ye]||(u[ye]=se(ye))}};Z();var Q=function(se){ie[C]&&console.info("Redefining LocalForage driver: "+C),ie[C]=u,De[C]=se,k()};"_support"in u?u._support&&typeof u._support=="function"?u._support().then(Q,S):Q(!!u._support):Q(!0)}catch(ee){S(ee)}});return v(p,g,y),p},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(u,g,y){var p=ie[u]?m.resolve(ie[u]):m.reject(new Error("Driver not found."));return v(p,g,y),p},a.prototype.getSerializer=function(u){var g=m.resolve(he);return v(g,u),g},a.prototype.ready=function(u){var g=this,y=g._driverSet.then(function(){return g._ready===null&&(g._ready=g._initDriver()),g._ready});return v(y,u,u),y},a.prototype.setDriver=function(u,g,y){var p=this;Le(u)||(u=[u]);var k=this._getSupportedDrivers(u);function S(){p._config.driver=p.driver()}function C(M){return p._extend(M),S(),p._ready=p._initStorage(p._config),p._ready}function A(M){return function(){var j=0;function H(){for(;j<M.length;){var V=M[j];return j++,p._dbInfo=null,p._ready=null,p.getDriver(V).then(C).catch(H)}S();var Z=new Error("No available storage method found.");return p._driverSet=m.reject(Z),p._driverSet}return H()}}var O=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=O.then(function(){var M=k[0];return p._dbInfo=null,p._ready=null,p.getDriver(M).then(function(j){p._driver=j._driver,S(),p._wrapLibraryMethodsWithReady(),p._initDriver=A(k)})}).catch(function(){S();var M=new Error("No available storage method found.");return p._driverSet=m.reject(M),p._driverSet}),v(this._driverSet,g,y),this._driverSet},a.prototype.supports=function(u){return!!De[u]},a.prototype._extend=function(u){me(this,u)},a.prototype._getSupportedDrivers=function(u){for(var g=[],y=0,p=u.length;y<p;y++){var k=u[y];this.supports(k)&&g.push(k)}return g},a.prototype._wrapLibraryMethodsWithReady=function(){for(var u=0,g=pe.length;u<g;u++)At(this,pe[u])},a.prototype.createInstance=function(u){return new a(u)},a}(),Ot=new Tt;r.exports=Ot},{3:3}]},{},[4])(4)})})(localforage$1);const localforage=localforage$1.exports;var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce$1(e,t,n){var r,i,o,s,l,c,d=0,f=!1,m=!1,b=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);t=toNumber(t)||0,isObject(n)&&(f=!!n.leading,m="maxWait"in n,o=m?nativeMax(toNumber(n.maxWait)||0,t):o,b="trailing"in n?!!n.trailing:b);function v(D){var R=r,W=i;return r=i=void 0,d=D,s=e.apply(W,R),s}function w(D){return d=D,l=setTimeout(I,t),f?v(D):s}function $(D){var R=D-c,W=D-d,q=t-R;return m?nativeMin(q,o-W):q}function T(D){var R=D-c,W=D-d;return c===void 0||R>=t||R<0||m&&W>=o}function I(){var D=now();if(T(D))return N(D);l=setTimeout(I,$(D))}function N(D){return l=void 0,b&&r?v(D):(r=i=void 0,s)}function F(){l!==void 0&&clearTimeout(l),d=0,r=c=i=l=void 0}function B(){return l===void 0?s:N(now())}function E(){var D=now(),R=T(D);if(r=arguments,i=this,c=D,R){if(l===void 0)return w(c);if(m)return l=setTimeout(I,t),v(c)}return l===void 0&&(l=setTimeout(I,t)),s}return E.cancel=F,E.flush=B,E}function isObject(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(reTrim,"");var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce$1;const defaultState=Object.freeze({cursor:0,mode:"slice",cursorControlsVisible:!1,clip:void 0,regions:[{start:0,end:1}],selectedRegion:void 0}),[store,setStore]=createStore(defaultState),state=store,[undoStack,setUndoStack]=createSignal([],{equals:!1}),[redoStack,setRedoStack]=createSignal([],{equals:!1});let lastModified;window.localforage=localforage;const reset=()=>{setUndoStack([]),setRedoStack([]),setStore(defaultState)},dispatch=e=>{switch(e.type){case"reset":{syncStorage().then(reset);break}case"setClip":{setUndoStack([]),setRedoStack([]),setStore("clip",e.clip),localforage.getItem("sessions").then(t=>{const n=t,r=n.get(e.clip.hash);r?loadSession(r):(n.set(e.clip.hash,{alias:e.clip.name,hash:e.clip.hash,lastModified:Date.now(),numberOfChannels:e.clip.buffer.numberOfChannels,sampleRate:e.clip.buffer.sampleRate,length:e.clip.buffer.length}),localforage.setItem("sessions",n))}),saveChannels(e.clip);break}case"setCursor":{setStore("cursor",Math.max(0,Math.min(e.pos,1)));break}case"showCursorControls":{setStore("cursorControlsVisible",!0);break}case"hideCursorControls":{setStore("cursorControlsVisible",!1);break}case"setMode":{setStore("mode",e.mode);break}case"selectRegion":{setStore("selectedRegion",e.index);break}default:{const t=undoStack()[undoStack().length-1];lastModified!==void 0&&e.type==="moveSlice"&&t?.forward.type==="moveSlice"&&e.index===t?.forward.index&&Date.now()-lastModified<1e3?setUndoStack(n=>(n[n.length-1]={forward:e,backward:t.backward},n)):setUndoStack(n=>(n.push(migrationOfEvent(e)),n)),setRedoStack([]),updateRegions(e)}}},migrationOfEvent=e=>{switch(e.type){case"slice":return{forward:e,backward:{type:"healSlice",index:e.index+1}};case"segmentRegion":return{forward:e,backward:{type:"combineRegions",startIndex:e.index,endIndex:e.index+e.pieces-1}};case"combineRegions":return{forward:e,backward:{type:"segmentRegion",index:e.startIndex,pieces:e.endIndex-e.startIndex}};case"healSlice":return{forward:e,backward:{type:"slice",index:e.index-1,pos:state.regions[e.index].start}};case"moveSlice":return{forward:e,backward:{...e,pos:state.regions[e.index].start}}}},updateRegions=e=>{switch(e.type){case"slice":{const t=store.regions[e.index];if(!t||e.pos<=t.start||e.pos>=t.end)return;same(player.region(),t)&&player.stop(),setStore("regions",n=>[...n.slice(0,e.index),{start:t.start,end:e.pos},{start:e.pos,end:t.end},...n.slice(e.index+1)]);break}case"segmentRegion":{const t=store.regions[e.index];if(!t)return;const n=(t.end-t.start)/e.pieces;same(player.region(),t)&&player.stop(),setStore("regions",r=>[...r.slice(0,e.index),...range(0,e.pieces).map(i=>({start:t.start+n*i,end:t.start+n*(i+1)})),...r.slice(e.index+1)]);break}case"combineRegions":{if(!state.regions[e.startIndex]||!state.regions[e.endIndex]||e.endIndex<=e.startIndex)return;state.selectedRegion&&state.selectedRegion>e.startIndex&&(state.selectedRegion<=e.endIndex?setStore("selectedRegion",e.startIndex):setStore("selectedRegion",state.selectedRegion-(e.endIndex-e.startIndex))),setStore("regions",t=>{const n=t[e.startIndex],r=t[e.endIndex];return!n||!r?t:[...t.slice(0,e.startIndex),{start:n.start,end:r.end},...t.slice(e.endIndex+1)]});break}case"healSlice":{const t=store.regions[e.index],n=store.regions[e.index-1];if(!t||!n)return;(same(player.region(),t)||same(player.region(),n))&&player.stop(),setStore("regions",r=>[...r.slice(0,e.index).map((i,o)=>o===e.index-1?{start:i.start,end:r[e.index+1]?.start||1}:i),...r.slice(e.index+1)]);break}case"moveSlice":{const t=store.regions[e.index],n=store.regions[e.index-1];if(!t||!n||e.pos<=n.start||e.pos>=t.end)return;(same(player.region(),t)||same(player.region(),n))&&player.stop(),setStore("regions",e.index-1,r=>({start:r.start,end:e.pos})),setStore("regions",e.index,r=>({start:e.pos,end:r.end}));break}}lastModified=Date.now(),lodash_debounce(syncStorage)()};window.dispatch=dispatch;window.state=state;const same=(e,t)=>e.start===t.start&&e.end===t.end,tabSyncChannel=new BroadcastChannel("tab-sync");tabSyncChannel.addEventListener("message",e=>{!state.clip?.hash||e.data!==state.clip.hash||lodash_debounce(syncState,1e3)()});tabSyncChannel.addEventListener("message",e=>{e.data==="DELETE_SESSIONS"&&state.clip&&reset()});const undo={execute:()=>{const e=undoStack().pop();setUndoStack(t=>t),e&&(setRedoStack(t=>(t.push(e),t)),updateRegions(e.backward),state.selectedRegion&&state.selectedRegion>=state.regions.length&&setStore("selectedRegion",state.regions.length-1)),lodash_debounce(syncStorage)(),lastModified=Date.now()},disabled:()=>undoStack().length===0},redo={execute:()=>{const e=redoStack().pop();console.log(e),setRedoStack(t=>t),e&&(updateRegions(e.forward),undoStack().push(e),setUndoStack(t=>t)),lodash_debounce(syncStorage)(),lastModified=Date.now()},disabled:()=>redoStack().length===0},[busy,setBusy]=createSignal(!1),syncState=async()=>{setBusy(!0);try{const e=state.clip;if(!e)return;const n=(await localforage.getItem("sessions")).get(e.hash);if(!n||lastModified===void 0||n.lastModified<=lastModified)return;await loadSession(n),lastModified=n.lastModified}finally{setBusy(!1)}};async function loadSession(e){const t=e.sampleRate,n=e.numberOfChannels,r=e.alias;if(state.clip?.hash!==e.hash){const i=await localforage.getItem(e.hash+"_0"),o=await localforage.getItem(e.hash+"_0"),l=[i,o].filter(Boolean)[0]?.length;if(!l)throw new Error("no channel data for "+e.hash);const c=audioContext.createBuffer(n,l,t);for(let d=0;d<n;d++){const f=await localforage.getItem(e.hash+"_"+d);c.copyToChannel(f,d)}setStore("clip",{name:r,buffer:c,hash:e.hash})}await localforage.getItem(e.hash+"_regions").then(i=>{if(!Array.isArray(i))return;const o=i.map((s,l,c)=>({start:s,end:c[l+1]||1}));setStore("regions",o)}),setUndoStack(await localforage.getItem(e.hash+"_undoStack")||[]),setRedoStack(await localforage.getItem(e.hash+"_redoStack")||[])}const syncStorage=async()=>{const e=state.clip;!e||(await localforage.setItem(e.hash+"_redoStack",redoStack()),await localforage.setItem(e.hash+"_undoStack",undoStack()),await localforage.setItem(e.hash+"_regions",store.regions.map(t=>t.start)),await localforage.getItem("sessions").then(t=>{const n=t===null?new Map:t,r=n.get(e.hash),i={hash:e.hash,alias:e.name,sampleRate:e.buffer.sampleRate,numberOfChannels:e.buffer.numberOfChannels,lastModified:lastModified||r?.lastModified||Date.now(),length:e.buffer.length};n.set(e.hash,i),localforage.setItem("sessions",n)}),tabSyncChannel.postMessage(e.hash))},saveChannels=e=>{for(let t=0;t<e.buffer.numberOfChannels;t++)localforage.setItem(e.hash+"_"+t,e.buffer.getChannelData(t))};await localforage.keys().then(e=>!e.includes("sessions"))&&localforage.setItem("sessions",new Map);const deleteSessions=async()=>{tabSyncChannel.postMessage("DELETE_SESSIONS"),await localforage.clear(),await localforage.setItem("sessions",new Map)};/**
 * solid-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 *//**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var props=["bottom","height","left","right","top","width"],rectChanged=function(t,n){return t===void 0&&(t={}),n===void 0&&(n={}),props.some(function(r){return t[r]!==n[r]})},observedNodes=new Map,rafId,run=function e(){var t=[];observedNodes.forEach(function(n,r){var i=r.getBoundingClientRect();rectChanged(i,n.rect)&&(n.rect=i,t.push(n))}),t.forEach(function(n){n.callbacks.forEach(function(r){return r(n.rect)})}),rafId=window.requestAnimationFrame(e)};function observeRect(e,t){return{observe:function(){var r=observedNodes.size===0;observedNodes.has(e)?observedNodes.get(e).callbacks.push(t):observedNodes.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),r&&run()},unobserve:function(){var r=observedNodes.get(e);if(r){var i=r.callbacks.indexOf(t);i>=0&&r.callbacks.splice(i,1),r.callbacks.length||observedNodes.delete(e),observedNodes.size||cancelAnimationFrame(rafId)}}}}function memo(e,t,n){let r=[],i;return()=>{let o;n.key&&n.debug!=null&&n.debug()&&(o=Date.now());const s=e();if(!(s.length!==r.length||s.some((d,f)=>r[f]!==d)))return i;r=s;let c;if(n.key&&n.debug!=null&&n.debug()&&(c=Date.now()),i=t(...s),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug!=null&&n.debug()){const d=Math.round((Date.now()-o)*100)/100,f=Math.round((Date.now()-c)*100)/100,m=f/16,b=(v,w)=>{for(v=String(v);v.length<w;)v=" "+v;return v};console.info("%c\u23F1 "+b(f,5)+" /"+b(d,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*m,120))+"deg 100% 31%);",n?.key)}return i}}const defaultKeyExtractor=e=>e,defaultRangeExtractor=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},observeElementRect=(e,t)=>{const n=observeRect(e.scrollElement,r=>{t(r)});if(!!e.scrollElement)return t(e.scrollElement.getBoundingClientRect()),n.observe(),()=>{n.unobserve()}},observeElementOffset=(e,t)=>{const n=()=>t(e.scrollElement[e.options.horizontal?"scrollLeft":"scrollTop"]);if(!!e.scrollElement)return n(),e.scrollElement.addEventListener("scroll",n,{capture:!1,passive:!0}),()=>{e.scrollElement.removeEventListener("scroll",n)}},measureElement=(e,t)=>e.getBoundingClientRect()[t.options.horizontal?"width":"height"],elementScroll=(e,t,n)=>{var r;(r=n.scrollElement)==null||r.scrollTo({[n.options.horizontal?"left":"top"]:e,behavior:t?"smooth":void 0})};class Virtualizer{constructor(t){var n=this;this.unsubs=[],this.scrollElement=null,this.measurementsCache=[],this.itemMeasurementsCache={},this.pendingMeasuredCacheIndexes=[],this.measureElementCache={},this.setOptions=r=>{Object.entries(r).forEach(i=>{let[o,s]=i;typeof s>"u"&&delete r[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:defaultKeyExtractor,rangeExtractor:defaultRangeExtractor,enableSmoothScroll:!0,onChange:()=>{},measureElement,initialRect:{width:0,height:0},...r}},this.notify=()=>{var r,i;(r=(i=this.options).onChange)==null||r.call(i,this)},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(r=>r()),this.unsubs=[]},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{const r=this.options.getScrollElement();this.scrollElement!==r&&(this.cleanup(),this.scrollElement=r,this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.notify()})),this.unsubs.push(this.options.observeElementOffset(this,i=>{this.scrollOffset=i,this.notify()})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurements=memo(()=>[this.options.count,this.options.paddingStart,this.options.getItemKey,this.itemMeasurementsCache],(r,i,o,s)=>{const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let d=l;d<r;d++){const f=o(d),m=s[f],b=c[d-1]?c[d-1].end:i,v=typeof m=="number"?m:this.options.estimateSize(d),w=b+v;c[d]={index:d,start:b,size:v,end:w,key:f}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=memo(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(r,i,o)=>calculateRange({measurements:r,outerSize:i,scrollOffset:o}),{key:!1,debug:()=>this.options.debug}),this.getIndexes=memo(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(r,i,o,s)=>r({...i,overscan:o,count:s}),{key:!1}),this.getVirtualItems=memo(()=>[this.getIndexes(),this.getMeasurements(),this.options.measureElement],(r,i,o)=>{const s=f=>m=>{var b;const v=this.measurementsCache[f];if(!m)return;const w=o(m,this),$=(b=this.itemMeasurementsCache[v.key])!=null?b:v.size;w!==$&&(v.start<this.scrollOffset&&(this.destinationOffset||this._scrollToOffset(this.scrollOffset+(w-$),!1)),this.pendingMeasuredCacheIndexes.push(f),this.itemMeasurementsCache={...this.itemMeasurementsCache,[v.key]:w},this.notify())},l=[],c={};for(let f=0,m=r.length;f<m;f++){var d;const b=r[f],w={...i[b],measureElement:c[b]=(d=this.measureElementCache[b])!=null?d:s(b)};l.push(w)}return this.measureElementCache=c,l},{key:!1}),this.scrollToOffset=function(r,i){let{align:o}=i===void 0?{align:"start"}:i;const s=()=>{const l=n.scrollOffset,c=n.getSize();o==="auto"&&(r<=l?o="start":r>=l+c?o="end":o="start"),o==="start"?n._scrollToOffset(r,!0):o==="end"?n._scrollToOffset(r-c,!0):o==="center"&&n._scrollToOffset(r-c/2,!0)};s(),requestAnimationFrame(()=>{s()})},this.scrollToIndex=function(r,i){let{align:o,...s}=i===void 0?{align:"auto"}:i;const l=n.getMeasurements(),c=n.scrollOffset,d=n.getSize(),{count:f}=n.options,m=l[Math.max(0,Math.min(r,f-1))];if(!m)return;if(o==="auto")if(m.end>=c+d-n.options.scrollPaddingEnd)o="end";else if(m.start<=c+n.options.scrollPaddingStart)o="start";else return;const b=o==="end"?m.end+n.options.scrollPaddingEnd:m.start-n.options.scrollPaddingStart;n.scrollToOffset(b,{align:o,...s})},this.getTotalSize=()=>{var r;return(((r=this.getMeasurements()[this.options.count-1])==null?void 0:r.end)||this.options.paddingStart)+this.options.paddingEnd},this._scrollToOffset=(r,i)=>{clearTimeout(this.scrollCheckFrame),this.destinationOffset=r,this.options.scrollToFn(r,this.options.enableSmoothScroll&&i,this);let o;const s=()=>{let l=this.scrollOffset;this.scrollCheckFrame=o=setTimeout(()=>{if(this.scrollCheckFrame===o){if(this.scrollOffset===l){this.destinationOffset=void 0;return}l=this.scrollOffset,s()}},100)};s()},this.measure=()=>{this.itemMeasurementsCache={},this.notify()},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset}}const findNearestBinarySearch=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else if(o>r)t=i-1;else return i}return e>0?e-1:0};function calculateRange(e){let{measurements:t,outerSize:n,scrollOffset:r}=e;const i=t.length-1,s=findNearestBinarySearch(0,i,c=>t[c].start,r);let l=s;for(;l<i&&t[l].end<r+n;)l++;return{startIndex:s,endIndex:l}}function createVirtualizerBase(e){const t=mergeProps(e),n=new Virtualizer(t),[r,i]=createStore(n.getVirtualItems()),[o,s]=createSignal(n.getTotalSize()),l={get(d,f){switch(f){case"getVirtualItems":return()=>r;case"getTotalSize":return()=>o();default:return Reflect.get(d,f)}}},c=new Proxy(n,l);return c.setOptions(t),onMount(()=>{const d=c._didMount();c._willUpdate(),onCleanup(d)}),createComputed(()=>{c.setOptions(mergeProps(t,e,{onChange:d=>{d._willUpdate(),i(reconcile(d.getVirtualItems(),{key:"index"})),s(d.getTotalSize()),e.onChange==null||e.onChange(d)}})),c.measure()}),c}function createVirtualizer(e){return createVirtualizerBase(mergeProps({observeElementRect,observeElementOffset,scrollToFn:elementScroll},e))}var workerpool$1={exports:{}};/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 6.4.0
 * @date    2023-02-24
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */(function(module,exports){(function(t,n){module.exports=n()})(typeof self<"u"?self:commonjsGlobal,function(){return function(){var __webpack_modules__={345:function(e,t,n){var r=n(219),i=n(751),o=n(828),s=n(833),l=new s;function c(v,w){typeof v=="string"?this.script=v||null:(this.script=null,w=v),this.workers=[],this.tasks=[],w=w||{},this.forkArgs=Object.freeze(w.forkArgs||[]),this.forkOpts=Object.freeze(w.forkOpts||{}),this.workerThreadOpts=Object.freeze(w.workerThreadOpts||{}),this.debugPortStart=w.debugPortStart||43210,this.nodeWorker=w.nodeWorker,this.workerType=w.workerType||w.nodeWorker||"auto",this.maxQueueSize=w.maxQueueSize||1/0,this.workerTerminateTimeout=w.workerTerminateTimeout||1e3,this.onCreateWorker=w.onCreateWorker||function(){return null},this.onTerminateWorker=w.onTerminateWorker||function(){return null},w&&"maxWorkers"in w?(d(w.maxWorkers),this.maxWorkers=w.maxWorkers):this.maxWorkers=Math.max((o.cpus||4)-1,1),w&&"minWorkers"in w&&(w.minWorkers==="max"?this.minWorkers=this.maxWorkers:(f(w.minWorkers),this.minWorkers=w.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&i.ensureWorkerThreads()}c.prototype.exec=function(v,w,$){if(w&&!Array.isArray(w))throw new TypeError('Array expected as argument "params"');if(typeof v=="string"){var T=r.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var I=this.tasks,N={method:v,params:w,resolver:T,timeout:null,options:$};I.push(N);var F=T.promise.timeout;return T.promise.timeout=function(E){return I.indexOf(N)!==-1?(N.timeout=E,T.promise):F.call(T.promise,E)},this._next(),T.promise}else{if(typeof v=="function")return this.exec("run",[String(v),w]);throw new TypeError('Function or string expected as argument "method"')}},c.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var v=this;return this.exec("methods").then(function(w){var $={};return w.forEach(function(T){$[T]=function(){return v.exec(T,Array.prototype.slice.call(arguments))}}),$})},c.prototype._next=function(){if(this.tasks.length>0){var v=this._getWorker();if(v){var w=this,$=this.tasks.shift();if($.resolver.promise.pending){var T=v.exec($.method,$.params,$.resolver,$.options).then(w._boundNext).catch(function(){if(v.terminated)return w._removeWorker(v)}).then(function(){w._next()});typeof $.timeout=="number"&&T.timeout($.timeout)}else w._next()}}},c.prototype._getWorker=function(){for(var v=this.workers,w=0;w<v.length;w++){var $=v[w];if($.busy()===!1)return $}return v.length<this.maxWorkers?($=this._createWorkerHandler(),v.push($),$):null},c.prototype._removeWorker=function(v){var w=this;return l.releasePort(v.debugPort),this._removeWorkerFromList(v),this._ensureMinWorkers(),new r(function($,T){v.terminate(!1,function(I){w.onTerminateWorker({forkArgs:v.forkArgs,forkOpts:v.forkOpts,workerThreadOpts:v.workerThreadOpts,script:v.script}),I?T(I):$(v)})})},c.prototype._removeWorkerFromList=function(v){var w=this.workers.indexOf(v);w!==-1&&this.workers.splice(w,1)},c.prototype.terminate=function(v,w){var $=this;this.tasks.forEach(function(B){B.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var T=function(E){l.releasePort(E.debugPort),this._removeWorkerFromList(E)},I=T.bind(this),N=[],F=this.workers.slice();return F.forEach(function(B){var E=B.terminateAndNotify(v,w).then(I).always(function(){$.onTerminateWorker({forkArgs:B.forkArgs,forkOpts:B.forkOpts,workerThreadOpts:B.workerThreadOpts,script:B.script})});N.push(E)}),r.all(N)},c.prototype.stats=function(){var v=this.workers.length,w=this.workers.filter(function($){return $.busy()}).length;return{totalWorkers:v,busyWorkers:w,idleWorkers:v-w,pendingTasks:this.tasks.length,activeTasks:w}},c.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var v=this.workers.length;v<this.minWorkers;v++)this.workers.push(this._createWorkerHandler())},c.prototype._createWorkerHandler=function(){var v=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new i(v.script||this.script,{forkArgs:v.forkArgs||this.forkArgs,forkOpts:v.forkOpts||this.forkOpts,workerThreadOpts:v.workerThreadOpts||this.workerThreadOpts,debugPort:l.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout})};function d(v){if(!m(v)||!b(v)||v<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function f(v){if(!m(v)||!b(v)||v<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function m(v){return typeof v=="number"}function b(v){return Math.round(v)==v}e.exports=c},219:function(e){function t(o,s){var l=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof o!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var c=[],d=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var f=function(w,$){c.push(w),d.push($)};this.then=function(v,w){return new t(function($,T){var I=v?n(v,$,T):$,N=w?n(w,$,T):T;f(I,N)},l)};var m=function(w){return l.resolved=!0,l.rejected=!1,l.pending=!1,c.forEach(function($){$(w)}),f=function(T,I){T(w)},m=b=function(){},l},b=function(w){return l.resolved=!1,l.rejected=!0,l.pending=!1,d.forEach(function($){$(w)}),f=function(T,I){I(w)},m=b=function(){},l};this.cancel=function(){return s?s.cancel():b(new r),l},this.timeout=function(v){if(s)s.timeout(v);else{var w=setTimeout(function(){b(new i("Promise timed out after "+v+" ms"))},v);l.always(function(){clearTimeout(w)})}return l},o(function(v){m(v)},function(v){b(v)})}function n(o,s,l){return function(c){try{var d=o(c);d&&typeof d.then=="function"&&typeof d.catch=="function"?d.then(s,l):s(d)}catch(f){l(f)}}}t.prototype.catch=function(o){return this.then(null,o)},t.prototype.always=function(o){return this.then(o,o)},t.all=function(o){return new t(function(s,l){var c=o.length,d=[];c?o.forEach(function(f,m){f.then(function(b){d[m]=b,c--,c==0&&s(d)},function(b){c=0,l(b)})}):s(d)})},t.defer=function(){var o={};return o.promise=new t(function(s,l){o.resolve=s,o.reject=l}),o};function r(o){this.message=o||"promise cancelled",this.stack=new Error().stack}r.prototype=new Error,r.prototype.constructor=Error,r.prototype.name="CancellationError",t.CancellationError=r;function i(o){this.message=o||"timeout exceeded",this.stack=new Error().stack}i.prototype=new Error,i.prototype.constructor=Error,i.prototype.name="TimeoutError",t.TimeoutError=i,e.exports=t},751:function(e,t,n){function r(_,P){var x=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(!x){if(Array.isArray(_)||(x=i(_))||P&&_&&typeof _.length=="number"){x&&(_=x);var L=0,U=function(){};return{s:U,n:function(){return L>=_.length?{done:!0}:{done:!1,value:_[L++]}},e:function(K){throw K},f:U}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Y=!0,J=!1,z;return{s:function(){x=x.call(_)},n:function(){var K=x.next();return Y=K.done,K},e:function(K){J=!0,z=K},f:function(){try{!Y&&x.return!=null&&x.return()}finally{if(J)throw z}}}}function i(_,P){if(!!_){if(typeof _=="string")return o(_,P);var x=Object.prototype.toString.call(_).slice(8,-1);if(x==="Object"&&_.constructor&&(x=_.constructor.name),x==="Map"||x==="Set")return Array.from(_);if(x==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x))return o(_,P)}}function o(_,P){(P==null||P>_.length)&&(P=_.length);for(var x=0,L=new Array(P);x<P;x++)L[x]=_[x];return L}function s(_,P){var x=Object.keys(_);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(_);P&&(L=L.filter(function(U){return Object.getOwnPropertyDescriptor(_,U).enumerable})),x.push.apply(x,L)}return x}function l(_){for(var P=1;P<arguments.length;P++){var x=arguments[P]!=null?arguments[P]:{};P%2?s(Object(x),!0).forEach(function(L){c(_,L,x[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(x)):s(Object(x)).forEach(function(L){Object.defineProperty(_,L,Object.getOwnPropertyDescriptor(x,L))})}return _}function c(_,P,x){return P=d(P),P in _?Object.defineProperty(_,P,{value:x,enumerable:!0,configurable:!0,writable:!0}):_[P]=x,_}function d(_){var P=f(_,"string");return m(P)==="symbol"?P:String(P)}function f(_,P){if(m(_)!=="object"||_===null)return _;var x=_[Symbol.toPrimitive];if(x!==void 0){var L=x.call(_,P||"default");if(m(L)!=="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(_)}function m(_){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},m(_)}var b=n(219),v=n(828),w=n(397),$="__workerpool-terminate__";function T(){var _=N();if(!_)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return _}function I(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":m(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function N(){try{return w("worker_threads")}catch(_){if(m(_)==="object"&&_!==null&&_.code==="MODULE_NOT_FOUND")return null;throw _}}function F(){if(v.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var _=new Blob([n(670)],{type:"text/javascript"});return window.URL.createObjectURL(_)}else return __dirname+"/worker.js"}function B(_,P){if(P.workerType==="web")return I(),E(_,Worker);if(P.workerType==="thread")return x=T(),D(_,x,P.workerThreadOpts);if(P.workerType==="process"||!P.workerType)return R(_,W(P),w("child_process"));if(v.platform==="browser")return I(),E(_,Worker);var x=N();return x?D(_,x):R(_,W(P),w("child_process"))}function E(_,P){var x=new P(_);return x.isBrowserWorker=!0,x.on=function(L,U){this.addEventListener(L,function(Y){U(Y.data)})},x.send=function(L,U){this.postMessage(L,U)},x}function D(_,P,x){var L=new P.Worker(_,l({stdout:!1,stderr:!1},x));return L.isWorkerThread=!0,L.send=function(U,Y){this.postMessage(U,Y)},L.kill=function(){return this.terminate(),!0},L.disconnect=function(){this.terminate()},L}function R(_,P,x){var L=x.fork(_,P.forkArgs,P.forkOpts),U=L.send;return L.send=function(Y){return U.call(L,Y)},L.isChildProcess=!0,L}function W(_){_=_||{};var P=process.execArgv.join(" "),x=P.indexOf("--inspect")!==-1,L=P.indexOf("--debug-brk")!==-1,U=[];return x&&(U.push("--inspect="+_.debugPort),L&&U.push("--debug-brk")),process.execArgv.forEach(function(Y){Y.indexOf("--max-old-space-size")>-1&&U.push(Y)}),Object.assign({},_,{forkArgs:_.forkArgs,forkOpts:Object.assign({},_.forkOpts,{execArgv:(_.forkOpts&&_.forkOpts.execArgv||[]).concat(U)})})}function q(_){for(var P=new Error(""),x=Object.keys(_),L=0;L<x.length;L++)P[x[L]]=_[x[L]];return P}function X(_,P){var x=this,L=P||{};this.script=_||F(),this.worker=B(this.script,L),this.debugPort=L.debugPort,this.forkOpts=L.forkOpts,this.forkArgs=L.forkArgs,this.workerThreadOpts=L.workerThreadOpts,this.workerTerminateTimeout=L.workerTerminateTimeout,_||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(z){if(!x.terminated)if(typeof z=="string"&&z==="ready")x.worker.ready=!0,Y();else{var G=z.id,K=x.processing[G];K!==void 0&&(z.isEvent?K.options&&typeof K.options.on=="function"&&K.options.on(z.payload):(delete x.processing[G],x.terminating===!0&&x.terminate(),z.error?K.resolver.reject(q(z.error)):K.resolver.resolve(z.result)))}});function U(z){x.terminated=!0;for(var G in x.processing)x.processing[G]!==void 0&&x.processing[G].resolver.reject(z);x.processing=Object.create(null)}function Y(){var z=r(x.requestQueue.splice(0)),G;try{for(z.s();!(G=z.n()).done;){var K=G.value;x.worker.send(K.message,K.transfer)}}catch(te){z.e(te)}finally{z.f()}}var J=this.worker;this.worker.on("error",U),this.worker.on("exit",function(z,G){var K=`Workerpool Worker terminated Unexpectedly
`;K+="    exitCode: `"+z+"`\n",K+="    signalCode: `"+G+"`\n",K+="    workerpool.script: `"+x.script+"`\n",K+="    spawnArgs: `"+J.spawnargs+"`\n",K+="    spawnfile: `"+J.spawnfile+"`\n",K+="    stdout: `"+J.stdout+"`\n",K+="    stderr: `"+J.stderr+"`\n",U(new Error(K))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}X.prototype.methods=function(){return this.exec("methods")},X.prototype.exec=function(_,P,x,L){x||(x=b.defer());var U=++this.lastId;this.processing[U]={id:U,resolver:x,options:L};var Y={message:{id:U,method:_,params:P},transfer:L&&L.transfer};this.terminated?x.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(Y.message,Y.transfer):this.requestQueue.push(Y);var J=this;return x.promise.catch(function(z){if(z instanceof b.CancellationError||z instanceof b.TimeoutError)return delete J.processing[U],J.terminateAndNotify(!0).then(function(){throw z},function(G){throw G});throw z})},X.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},X.prototype.terminate=function(_,P){var x=this;if(_){for(var L in this.processing)this.processing[L]!==void 0&&this.processing[L].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof P=="function"&&(this.terminationHandler=P),this.busy())this.terminating=!0;else{var U=function(z){if(x.terminated=!0,x.cleaning=!1,x.worker!=null&&x.worker.removeAllListeners&&x.worker.removeAllListeners("message"),x.worker=null,x.terminating=!1,x.terminationHandler)x.terminationHandler(z,x);else if(z)throw z};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){U(new Error("worker already killed!"));return}var Y=setTimeout(function(){x.worker&&x.worker.kill()},this.workerTerminateTimeout);this.worker.once("exit",function(){clearTimeout(Y),x.worker&&(x.worker.killed=!0),U()}),this.worker.ready?this.worker.send($):this.requestQueue.push($),this.cleaning=!0;return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");U()}},X.prototype.terminateAndNotify=function(_,P){var x=b.defer();return P&&(x.promise.timeout=P),this.terminate(_,function(L,U){L?x.reject(L):x.resolve(U)}),x.promise},e.exports=X,e.exports._tryRequireWorkerThreads=N,e.exports._setupProcessWorker=R,e.exports._setupBrowserWorker=E,e.exports._setupWorkerThreadWorker=D,e.exports.ensureWorkerThreads=T},833:function(e){var t=65535;e.exports=n;function n(){this.ports=Object.create(null),this.length=0}n.prototype.nextAvailableStartingAt=function(r){for(;this.ports[r]===!0;)r++;if(r>=t)throw new Error("WorkerPool debug port limit reached: "+r+">= "+t);return this.ports[r]=!0,this.length++,r},n.prototype.releasePort=function(r){delete this.ports[r],this.length--}},828:function(e,t,n){var r=n(397),i=function(c){return typeof c<"u"&&c.versions!=null&&c.versions.node!=null};e.exports.isNode=i,e.exports.platform=typeof process<"u"&&i(process)?"node":"browser";var o=s("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!o||o.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:r("os").cpus().length;function s(l){try{return r(l)}catch{return null}}},670:function(e){e.exports=`!function(){var __webpack_modules__={577:function(e){e.exports=function(e,r){this.message=e,this.transfer=r}}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];return void 0!==r||(r=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](r,r.exports,__webpack_require__)),r.exports}var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(e,r){addEventListener(e,function(e){r(e.data)})},worker.send=function(e){postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",function(){process.exit(1)})),worker.exit=process.exit.bind(process)}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(e,r){return Object.defineProperty(e,r,{value:o[r],enumerable:!0})},{})}function isPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}worker.methods={},worker.methods.run=function(e,r){e=new Function("return ("+e+").apply(null, arguments);");return e.apply(e,r)},worker.methods.methods=function(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){function r(){worker.exit(e)}if(!worker.terminationHandler)return r();var o=worker.terminationHandler(e);isPromise(o)?o.then(r,r):r()};var currentRequestId=null;worker.on("message",function(r){if(r===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var e=worker.methods[r.method];if(!e)throw new Error('Unknown method "'+r.method+'"');currentRequestId=r.id;var o=e.apply(e,r.params);isPromise(o)?o.then(function(e){e instanceof Transfer?worker.send({id:r.id,result:e.message,error:null},e.transfer):worker.send({id:r.id,result:e,error:null}),currentRequestId=null}).catch(function(e){worker.send({id:r.id,result:null,error:convertError(e)}),currentRequestId=null}):(o instanceof Transfer?worker.send({id:r.id,result:o.message,error:null},o.transfer):worker.send({id:r.id,result:o,error:null}),currentRequestId=null)}catch(e){worker.send({id:r.id,result:null,error:convertError(e)})}}),worker.register=function(e,r){if(e)for(var o in e)e.hasOwnProperty(o)&&(worker.methods[o]=e[o]);r&&(worker.terminationHandler=r.onTerminate),worker.send("ready")},worker.emit=function(e){currentRequestId&&(e instanceof Transfer?worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer):worker.send({id:currentRequestId,isEvent:!0,payload:e}))},__webpack_unused_export__=worker.register,worker.emit}()}();`},397:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},577:function(e){function t(n,r){this.message=n,this.transfer=r}e.exports=t},744:function(__unused_webpack_module,exports,__webpack_require__){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(n){t(n.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort),worker.exit=process.exit.bind(process)}else worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,n){return Object.defineProperty(t,n,{value:e[n],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,n){var r=new Function("return ("+t+").apply(null, arguments);");return r.apply(r,n)},worker.methods.methods=function e(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){var t=function(){worker.exit(e)};if(!worker.terminationHandler)return t();var n=worker.terminationHandler(e);isPromise(n)?n.then(t,t):t()};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var n=t.apply(t,e.params);isPromise(n)?n.then(function(r){r instanceof Transfer?worker.send({id:e.id,result:r.message,error:null},r.transfer):worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(n instanceof Transfer?worker.send({id:e.id,result:n.message,error:null},n.transfer):worker.send({id:e.id,result:n,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&(worker.methods[n]=e[n]);t&&(worker.terminationHandler=t.onTerminate),worker.send("ready")},worker.emit=function(e){if(currentRequestId){if(e instanceof Transfer){worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer);return}worker.send({id:currentRequestId,isEvent:!0,payload:e})}},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(828);e.pool=function(r,i){var o=__webpack_require__(345);return new o(r,i)},e.worker=function(r,i){var o=__webpack_require__(744);o.add(r,i)},e.workerEmit=function(r){var i=__webpack_require__(744);i.emit(r)},e.Promise=__webpack_require__(219),e.Transfer=__webpack_require__(577),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})})(workerpool$1);const workerpool=workerpool$1.exports,_tmpl$$7=template("<canvas></canvas>"),mediaQuery=window.matchMedia("(prefers-color-scheme: dark)"),[strokeColor,setStrokeColor]=createSignal(mediaQuery.matches?"white":"black");createEffect(()=>console.log(strokeColor()));mediaQuery.addEventListener("change",e=>{console.log(e),e.matches?setStrokeColor("white"):setStrokeColor("black")});const ChannelSegment=e=>{let t,n;return onCleanup(()=>{n?.cancel()}),createEffect(async()=>{const r=strokeColor();n?.cancel(),n=pool.exec(computeBuckets,[e.data,e.numBuckets]).then(i=>{t&&drawBars(t,i,r)}).catch(i=>{i.message!=="promise cancelled"&&console.error(i)})}),(()=>{const r=_tmpl$$7.cloneNode(!0),i=t;return typeof i=="function"?use(i,r):t=r,createRenderEffect(o=>{const s=e.width,l=e.height,c={width:"100%",height:"100%",...e.style};return s!==o._v$&&setAttribute(r,"width",o._v$=s),l!==o._v$2&&setAttribute(r,"height",o._v$2=l),o._v$3=style$1(r,c,o._v$3),o},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()},pool=workerpool.pool();function computeBuckets(e,t){const n=Math.ceil(e.length/t),r=[];let i=0;for(let o=0;o<t;o++){const s=i+n,l=e.subarray(i,s);let c=1/0;for(const f of l)c=Math.min(f,c);let d=-1/0;for(const f of l)d=Math.max(f,d);r.push({min:c,max:d}),i=s}return r}const drawBars=(e,t,n="black")=>{const r=e.getContext("2d");if(!r)return;const i=2;r.lineWidth=i,r.strokeStyle=n,r.clearRect(0,0,e.width,e.height),r.translate(0,e.height/2);for(let o=0;o<t.length;o++){const s=t[o];if(!s)return;const{min:l,max:c}=s;r.beginPath(),r.moveTo(o,c*(e.height/2)+i/2),r.lineTo(o,l*(e.height/2)-i/2),r.stroke()}r.translate(0,-e.height/2)},createDrag=e=>{let t;const[n,r]=createSignal(0),i=l=>{e.onStart?.(l),t=l.clientX,document.body.addEventListener("pointerup",o),document.body.addEventListener("pointerleave",o),document.body.addEventListener("pointermove",s)},o=l=>{e.onFinished?.(l),t=void 0,document.body.removeEventListener("pointerup",o),document.body.removeEventListener("pointerleave",o),document.body.removeEventListener("pointermove",s),r(0)},s=l=>{t!==void 0&&(e.onDrag?.(l),r(l.clientX-t))};return{offset:n,start:i}},_tmpl$$6=template("<div></div>"),Stick=e=>{const[,t]=splitProps(e,["pos"]);return(()=>{const n=_tmpl$$6.cloneNode(!0);return spread(n,mergeProps(t,{get style(){return{position:"absolute",top:0,left:`${e.width/-2}px`,transform:`translateX(${e.pos*100}cqi)`,width:`${e.width}px`,height:"100%",background:e.background,...e.style}}}),!1,!0),n})()},_tmpl$$5=template("<button><span><span></span></span></button>"),Trigger=e=>{const t=createMemo(()=>e.region&&player.playing()&&same(player.region(),e.region));return(()=>{const n=_tmpl$$5.cloneNode(!0),r=n.firstChild,i=r.firstChild;return n.$$dblclick=o=>o.stopPropagation(),n.$$click=()=>{t()?player.stop():(player.play(state.clip.buffer,e.region),e.onTrigger?.())},i.style.setProperty("font-family","monospace"),i.style.setProperty("font-size","1rem"),insert(i,(()=>{const o=createMemo(()=>!!t());return()=>o()?"\u25A0":"\u25B6"})()),insert(r,createComponent(Show,{get when(){return e.text},children:"\xA0"}),null),insert(r,()=>e.text,null),createRenderEffect(o=>{const s=e.style,l=!e.region;return o._v$=style$1(n,s,o._v$),l!==o._v$2&&(n.disabled=o._v$2=l),o},{_v$:void 0,_v$2:void 0}),n})()};delegateEvents(["click","dblclick"]);function createZoom(){const t=Math.pow(2,10),[n,r]=createSignal(32),i=2;return{in:()=>r(o=>Math.max(1,o/i)),out:()=>r(o=>Math.min(t,o*i)),samplesPerPixel:n,inDisabled:()=>n()===1,outDisabled:()=>n()===t}}const debounce=(e,t)=>{let n;return r=>{n===void 0&&(e(r),n=setTimeout(()=>{n=void 0},t))}},_tmpl$$4=template("<div data-scroll-element><div></div></div>"),_tmpl$2$1=template('<div data-content-element><svg id="zoom-dot" viewBox="0 0 2 2" width="1ch"><circle cx="1" cy="1" r="1"></circle></svg></div>'),_tmpl$3$1=template("<div data-active-region></div>"),_tmpl$4$1=template('<div class="hitbox"></div>'),_tmpl$5$1=template("<button>delete</button>"),_tmpl$6$1=template("<div></div>"),_tmpl$7$1=template('<button><svg viewBox="0 0 1 1"><polygon points="0,0 1,0.5 0,1" fill="orange"></polygon></svg></button>'),_tmpl$8$1=template("<button>slice</button>"),_tmpl$9$1=template("<div><button></button></div>"),_tmpl$10$1=template("<div data-summary-element></div>"),TILE_WIDTH=400,TILE_HEIGHT=100;let scrollElement,contentElement;const zoom=createZoom(),Waveform=e=>{const t=debounce(n=>{if(!scrollElement||!contentElement)return;const r=n.clientX-scrollElement.clientLeft,i=(r+scrollElement.scrollLeft)/contentElement.clientWidth;n.deltaY>0&&!zoom.outDisabled()&&zoom.out(),n.deltaY<0&&!zoom.inDisabled()&&zoom.in(),(!zoom.inDisabled()||!zoom.outDisabled())&&(scrollElement.scrollLeft=contentElement.clientWidth*i-r)},100);return(()=>{const n=_tmpl$$4.cloneNode(!0),r=n.firstChild;n.addEventListener("keypress",o=>{switch(o.key){case"s":return dispatch({type:"setMode",mode:"slice"});case"e":return dispatch({type:"setMode",mode:"edit"});case"d":return dispatch({type:"setMode",mode:"delete"})}}),n.addEventListener("wheel",o=>{!o.ctrlKey||(o.preventDefault(),t(o))}),n.$$keydown=o=>{o.ctrlKey&&((o.key==="+"||o.key==="=")&&(o.preventDefault(),zoom.in(),o.target.scrollIntoView({inline:"center",block:"nearest"})),(o.key==="-"||o.key==="_")&&(o.preventDefault(),zoom.out(),o.target.scrollIntoView({inline:"center",block:"nearest"})))};const i=scrollElement;return typeof i=="function"?use(i,n):scrollElement=n,n.style.setProperty("overflow","auto"),r.style.setProperty("height","calc(var(--min-btn-dimension) + 20px)"),insert(n,createComponent(WaveformContent,{get buffer(){return e.buffer}}),null),insert(n,createComponent(WaveformSummary,{get buffer(){return e.buffer}}),null),n})()},[zoomCenter,setZoomCenter]=createSignal(0),WaveformContent=e=>{const t=createMemo(()=>createVirtualizer({count:range(0,e.buffer.length/zoom.samplesPerPixel(),TILE_WIDTH).length,getScrollElement:()=>scrollElement,estimateSize:()=>TILE_WIDTH,horizontal:!0})),n=r=>{if(!contentElement)return;const i=contentElement.getBoundingClientRect(),o=r.clientX-i.left;dispatch({type:"setCursor",pos:o/contentElement.clientWidth})};return(()=>{const r=_tmpl$2$1.cloneNode(!0),i=r.firstChild;r.$$dblclick=s=>{n(s),setZoomCenter(state.cursor),dispatch({type:"showCursorControls"})};const o=contentElement;return typeof o=="function"?use(o,r):contentElement=r,r.style.setProperty("display","flex"),r.style.setProperty("position","relative"),r.style.setProperty("container-type","inline-size"),i.style.setProperty("position","absolute"),i.style.setProperty("left","-0.5ch"),i.style.setProperty("opacity","0.8"),i.style.setProperty("top","calc(var(--min-btn-dimension) * -1 - 15px)"),i.style.setProperty("fill","CanvasText"),insert(r,createComponent(For,{get each(){return t().getVirtualItems()},children:s=>createComponent(WaveformTile,{get buffer(){return e.buffer},get start(){return s.start},length:TILE_WIDTH})}),null),insert(r,createComponent(For,{get each(){return state.regions},children:(s,l)=>createComponent(Slice,{region:s,get index(){return l()},get id(){return s.start.toString()}})}),null),insert(r,createComponent(ActiveRegion,{}),null),insert(r,createComponent(Cursor,{}),null),insert(r,createComponent(Playhead,{}),null),createRenderEffect(s=>{const l=`${e.buffer.length/zoom.samplesPerPixel()}px`,c=e.buffer.numberOfChannels*TILE_HEIGHT+"px",d=`translateX(${zoomCenter()*100}cqi)`;return l!==s._v$&&r.style.setProperty("width",s._v$=l),c!==s._v$2&&r.style.setProperty("height",s._v$2=c),d!==s._v$3&&i.style.setProperty("transform",s._v$3=d),s},{_v$:void 0,_v$2:void 0,_v$3:void 0}),r})()},ActiveRegion=()=>{const e=createMemo(()=>{const t=state.regions[state.selectedRegion!==void 0?state.selectedRegion:-1];return t||{start:0,end:0}});return createComponent(Show,{get when(){return e()},get children(){const t=_tmpl$3$1.cloneNode(!0);return t.style.setProperty("position","absolute"),t.style.setProperty("height","100%"),t.style.setProperty("background","hsl(39deg 100% 50% / 40%)"),t.style.setProperty("pointer-events","none"),createRenderEffect(n=>{const r=(e().end-e().start)*100+"cqi",i=e().start*100+"cqi";return r!==n._v$4&&t.style.setProperty("width",n._v$4=r),i!==n._v$5&&t.style.setProperty("left",n._v$5=i),n},{_v$4:void 0,_v$5:void 0}),t}})},Slice=e=>{const t=s=>s.preventDefault(),n=createDrag({onStart:()=>{scrollElement?.addEventListener("touchmove",t)},onFinished:()=>{dispatch({type:"moveSlice",index:e.index,pos:r()}),setZoomCenter(e.region.start),scrollElement?.removeEventListener("touchmove",t)}}),r=()=>{if(contentElement){const s=i(),l=e.region.start+n.offset()/contentElement.clientWidth;return Math.max(s.left,Math.min(s.right,l))}return e.region.start},i=()=>{const s=state.clip;if(!s||!contentElement)throw"AAAAAAH";const d=.005/(s.buffer.length/s.buffer.sampleRate),f=(state.regions[e.index-1]?.start||0)+(e.index>0?d:0),m=e.region.end-d;return{left:f,right:m}},o=createKeyboardMovementHandler(s=>{const l=i(),c=Math.max(l.left,Math.min(l.right,e.region.start+s));dispatch({type:"moveSlice",index:e.index,pos:c}),setZoomCenter(c),document.getElementById(`slice-${c}`)?.focus()});return[createComponent(Stick,{get pos(){return r()},width:2,background:"CanvasText",style:{"box-shadow":"1px 0px 0px Canvas, -1px 0px 0px Canvas"}}),(()=>{const s=_tmpl$4$1.cloneNode(!0);return s.style.setProperty("position","absolute"),s.style.setProperty("height","100%"),createRenderEffect(l=>{const c=e.index,d=`translateX(${e.region.start*100}cqi)`,f=`${(e.region.end-e.region.start)*100}cqi`;return c!==l._v$6&&setAttribute(s,"data-index",l._v$6=c),d!==l._v$7&&s.style.setProperty("transform",l._v$7=d),f!==l._v$8&&s.style.setProperty("width",l._v$8=f),l},{_v$6:void 0,_v$7:void 0,_v$8:void 0}),s})(),createComponent(Show,{get when(){return state.mode==="edit"&&e.index>0},get children(){return createComponent(Stick,{get pos(){return r()},width:30,background:"CanvasText",style:{opacity:"50%"},onPointerDown:s=>{n.start(s)},onFocus:()=>setZoomCenter(r()),tabIndex:0,onkeydown:o,get id(){return`slice-${e.region.start}`}})}}),(()=>{const s=_tmpl$6$1.cloneNode(!0);return s.$$focusin=()=>setZoomCenter(r()),s.style.setProperty("position","absolute"),s.style.setProperty("display","flex"),s.style.setProperty("top","calc(-1 * var(--min-btn-dimension))"),insert(s,createComponent(Show,{get when(){return state.mode==="delete"&&e.index>0},get children(){const l=_tmpl$5$1.cloneNode(!0);return l.$$click=()=>{dispatch({type:"healSlice",index:e.index}),state.selectedRegion!==void 0&&e.index<=state.selectedRegion&&dispatch({type:"selectRegion",index:state.selectedRegion-1})},l}}),null),insert(s,createComponent(Trigger,{get region(){return e.region},get text(){return(e.index+1).toString()},onTrigger:()=>{setZoomCenter(e.region.start),state.selectedRegion!==void 0&&dispatch({type:"selectRegion",index:e.index})}}),null),createRenderEffect(()=>s.style.setProperty("transform",`translateX(${r()*100}cqi)`)),s})()]},createKeyboardMovementHandler=e=>t=>{if(!(!scrollElement||!contentElement||!(t.target instanceof Element))&&["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","PageDown","PageUp","Home","End"].includes(t.key)){t.preventDefault();const r=10/contentElement.clientWidth,i=t.ctrlKey?r*10:r;t.key==="ArrowRight"&&(e(i),t.target.getBoundingClientRect().right>scrollElement.getBoundingClientRect().right&&t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="ArrowLeft"&&(e(-i),t.target.getBoundingClientRect().left<scrollElement.getBoundingClientRect().left&&t.target.scrollIntoView({inline:"center",block:"nearest"}));const s=scrollElement.clientWidth/contentElement.clientWidth;t.key==="PageDown"&&(e(s),t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="PageUp"&&(e(-s),t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="Home"&&(e(-1),t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="End"&&(e(1),t.target.scrollIntoView({inline:"center",block:"nearest"}))}},Cursor=e=>{const t=f=>f.preventDefault(),n=createDrag({onStart:()=>{scrollElement?.addEventListener("touchmove",t)},onFinished:()=>{dispatch({type:"setCursor",pos:r()}),scrollElement?.removeEventListener("touchmove",t),setZoomCenter(state.cursor)}}),r=()=>{if(contentElement){const f=state.cursor+n.offset()/contentElement.clientWidth;return Math.max(0,Math.min(1,f))}return state.cursor},i=createKeyboardMovementHandler(f=>{dispatch({type:"setCursor",pos:state.cursor+f}),setZoomCenter(state.cursor)});let o;const[s,l]=createSignal(0),c=createMemo(()=>{const f=state.regions[s()];return f!==void 0&&player.playing()&&same(player.region(),{start:state.cursor,end:f.end})}),d=()=>{const f=document.getElementById("cursor");if(!f)return;const m=document.elementsFromPoint(f.getBoundingClientRect().x,f.getBoundingClientRect().y).find(v=>v.classList.contains("hitbox"));if(!m||!(m instanceof HTMLElement))return;const b=parseInt(m.dataset.index||"");l(b)};return[(()=>{const f=_tmpl$6$1.cloneNode(!0);return f.style.setProperty("pointer-events","none"),insert(f,createComponent(Stick,{id:"cursor",get pos(){return r()},width:2,background:"repeating-linear-gradient(orange 0px, orange 4px, transparent 4px, transparent 8px)"})),f})(),createComponent(Show,{get when(){return state.mode==="slice"},get children(){return createComponent(Stick,{ref(f){const m=o;typeof m=="function"?m(f):o=f},get pos(){return r()},width:30,background:"hsl(39deg 100% 50% / 50%)",get onPointerDown(){return n.start},onKeyDown:i,onFocus:()=>setZoomCenter(r()),tabIndex:0})}}),(()=>{const f=_tmpl$7$1.cloneNode(!0),m=f.firstChild;return f.$$dblclick=b=>b.stopPropagation(),addEventListener$1(f,"keydown",i,!0),f.$$click=()=>{state.cursorControlsVisible?dispatch({type:"hideCursorControls"}):dispatch({type:"showCursorControls"})},f.style.setProperty("position","absolute"),f.style.setProperty("width","min-content"),f.style.setProperty("display","grid"),f.style.setProperty("left","-15px"),f.style.setProperty("align-content","center"),f.style.setProperty("font-size","large"),f.style.setProperty("background","hsl(39deg 100% 50% / 0%)"),f.style.setProperty("border","none"),f.style.setProperty("color","orange"),f.style.setProperty("min-width","unset"),f.style.setProperty("box-sizing","border-box"),f.style.setProperty("padding","0"),m.style.setProperty("width","30px"),createRenderEffect(b=>{const v=`translateX(calc(${r()*100}cqi))`,w=`
            ${state.cursorControlsVisible?"rotate(-90deg)":"rotate(90deg)"}
            scale(0.5)
          `;return v!==b._v$9&&f.style.setProperty("transform",b._v$9=v),w!==b._v$10&&m.style.setProperty("transform",b._v$10=w),b},{_v$9:void 0,_v$10:void 0}),f})(),createComponent(Show,{get when(){return state.cursorControlsVisible},get children(){const f=_tmpl$9$1.cloneNode(!0),m=f.firstChild;return f.$$focusin=()=>setZoomCenter(state.cursor),addEventListener$1(f,"keydown",i,!0),f.$$dblclick=b=>b.stopPropagation(),f.style.setProperty("position","absolute"),f.style.setProperty("display","flex"),f.style.setProperty("top","calc(-1 * var(--min-btn-dimension))"),insert(f,createComponent(Show,{get when(){return state.mode==="slice"},get children(){const b=_tmpl$8$1.cloneNode(!0);return b.$$click=()=>{d(),dispatch({type:"slice",index:s(),pos:state.cursor}),dispatch({type:"hideCursorControls"}),o?.focus(),setZoomCenter(state.cursor),state.selectedRegion!==void 0&&dispatch({type:"selectRegion",index:s()+1})},b}}),m),m.$$click=()=>{if(c())player.stop();else{setZoomCenter(state.cursor),d();const b=state.regions[s()];if(!b)return;player.play(state.clip.buffer,{start:state.cursor,end:b.end})}},m.style.setProperty("font-family","monospace"),m.style.setProperty("font-size","1rem"),insert(m,(()=>{const b=createMemo(()=>!!c());return()=>b()?"\u25A0":"\u25B6"})()),createRenderEffect(()=>f.style.setProperty("transform",`translateX(${r()*100}cqi)`)),f}})]},Playhead=()=>createComponent(Show,{get when(){return player.playing()},get children(){return createComponent(Stick,{get pos(){return player.progress()},width:2,background:"orange"})}}),WaveformSummary=e=>{let t;const n=()=>{const[c,d]=createSignal(0),[f,m]=createSignal(0);return useAnimationFrame(()=>{scrollElement&&contentElement&&(d(scrollElement.scrollLeft/contentElement.clientWidth*100),m(scrollElement.clientWidth/contentElement.clientWidth*100))}),(()=>{const b=_tmpl$6$1.cloneNode(!0);return b.style.setProperty("position","absolute"),b.style.setProperty("bottom","0"),b.style.setProperty("height","39px"),b.style.setProperty("background","#8888"),createRenderEffect(v=>{const w=`min(100cqi, max(${f()}cqi, 2px))`,$=c()+"cqi";return w!==v._v$11&&b.style.setProperty("width",v._v$11=w),$!==v._v$12&&b.style.setProperty("left",v._v$12=$),v},{_v$11:void 0,_v$12:void 0}),b})()},r=c=>{if(!t||!contentElement||!scrollElement)return;const d=t.getBoundingClientRect(),m=(c.clientX-d.left)/d.width;scrollElement.scrollLeft=contentElement.getBoundingClientRect().width*m-scrollElement.getBoundingClientRect().width/2},i=createDrag({onStart:r,onDrag:r}),[o,s]=createSignal(800),l=new ResizeObserver(lodash_debounce(()=>{t&&s(t.clientWidth)},300,{trailing:!0}));return onMount(()=>{t&&l.observe(t)}),onCleanup(()=>{t&&l.unobserve(t)}),(()=>{const c=_tmpl$10$1.cloneNode(!0);addEventListener$1(c,"pointerdown",i.start,!0);const d=t;return typeof d=="function"?use(d,c):t=c,c.style.setProperty("position","sticky"),c.style.setProperty("left","0"),c.style.setProperty("height","50px"),c.style.setProperty("touch-action","none"),c.style.setProperty("container-type","inline-size"),insert(c,createComponent(For,{get each(){return range(0,e.buffer.numberOfChannels)},children:f=>createComponent(ChannelSegment,{get data(){return e.buffer.getChannelData(f)},get width(){return o()},height:25,get numBuckets(){return o()},style:{position:"absolute",bottom:0,height:"39px"}})}),null),insert(c,createComponent(n,{}),null),insert(c,createComponent(Stick,{get pos(){return state.cursor},width:2,background:"repeating-linear-gradient(orange 0px, orange 2px, transparent 2px, transparent 4px)",style:{height:"50px",top:"unset",bottom:0}}),null),insert(c,createComponent(For,{get each(){return state.regions},children:f=>createComponent(Stick,{get pos(){return f.start},background:"CanvasText",style:{height:"10px"},width:2})}),null),insert(c,createComponent(ActiveRegion,{}),null),insert(c,createComponent(Playhead,{}),null),c})()},WaveformTile=e=>(()=>{const t=_tmpl$6$1.cloneNode(!0);return t.style.setProperty("display","flex"),t.style.setProperty("flex-direction","column"),t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("left","0"),t.style.setProperty("width","400px"),insert(t,createComponent(For,{get each(){return range(0,e.buffer.numberOfChannels)},children:n=>{const r=createMemo(()=>e.buffer.getChannelData(n).slice(e.start*zoom.samplesPerPixel(),(e.start+e.length)*zoom.samplesPerPixel()));return createComponent(ChannelSegment,{get data(){return r()},width:TILE_WIDTH,height:TILE_HEIGHT,get numBuckets(){return r().length/zoom.samplesPerPixel()}})}})),createRenderEffect(()=>t.style.setProperty("transform",`translateX(${e.start}px)`)),t})();delegateEvents(["keydown","dblclick","focusin","click","pointerdown"]);const Controls$1="",_tmpl$$3=template('<div class="controls-outer"><div class="controls"><fieldset><button>undo</button><button>redo</button></fieldset><fieldset><legend>mode:</legend><div class="radio-item"><input type="radio" id="slice" value="slice"><label for="slice">slice</label></div><div class="radio-item"><input type="radio" id="edit" value="edit"><label for="edit">edit</label></div><div class="radio-item"><input type="radio" id="delete" value="delete"><label for="delete">delete</label></div></fieldset><fieldset><button>zoom in</button><button>zoom out</button></fieldset></div></div>'),Controls=()=>(()=>{const e=_tmpl$$3.cloneNode(!0),t=e.firstChild,n=t.firstChild,r=n.firstChild,i=r.nextSibling,o=n.nextSibling,s=o.firstChild,l=s.nextSibling,c=l.firstChild,d=l.nextSibling,f=d.firstChild,m=d.nextSibling,b=m.firstChild,v=o.nextSibling,w=v.firstChild,$=w.nextSibling;return r.$$click=()=>undo.execute(),i.$$click=()=>redo.execute(),o.addEventListener("change",T=>{switch(T.target.value){case"slice":return dispatch({type:"setMode",mode:"slice"});case"edit":return dispatch({type:"setMode",mode:"edit"});case"delete":return dispatch({type:"setMode",mode:"delete"})}}),w.$$click=()=>{zoom.in(),document.getElementById("zoom-dot")?.scrollIntoView({inline:"center",block:"nearest"})},$.$$click=()=>{zoom.out(),document.getElementById("zoom-dot")?.scrollIntoView({inline:"center",block:"nearest"})},createRenderEffect(T=>{const I=undo.disabled(),N=redo.disabled(),F=zoom.inDisabled(),B=zoom.outDisabled();return I!==T._v$&&(r.disabled=T._v$=I),N!==T._v$2&&(i.disabled=T._v$2=N),F!==T._v$3&&(w.disabled=T._v$3=F),B!==T._v$4&&($.disabled=T._v$4=B),T},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),createRenderEffect(()=>c.checked=state.mode==="slice"),createRenderEffect(()=>f.checked=state.mode==="edit"),createRenderEffect(()=>b.checked=state.mode==="delete"),e})();delegateEvents(["click"]);const formatOfAudioBuffer=e=>formatOfChannels(e.numberOfChannels),formatOfChannels=e=>{switch(e){case 1:return"mono";case 2:return"stereo";default:return e+" channels"}},_tmpl$$2=template("<div><button>home</button><div><p></p><p>s</p><p></p></div></div>"),Details=e=>(()=>{const t=_tmpl$$2.cloneNode(!0),n=t.firstChild,r=n.nextSibling,i=r.firstChild,o=i.nextSibling,s=o.firstChild,l=o.nextSibling;return t.style.setProperty("display","flex"),t.style.setProperty("align-items","center"),t.style.setProperty("word-break","break-word"),n.$$click=()=>{confirm("leave session?")&&(dispatch({type:"reset"}),player.stop())},n.style.setProperty("white-space","nowrap"),r.style.setProperty("display","flex"),r.style.setProperty("flex-wrap","wrap"),r.style.setProperty("gap","1ch"),r.style.setProperty("padding","1ch"),r.style.setProperty("margin-inline-start","auto"),insert(i,()=>e.clip.name),insert(o,()=>(e.clip.buffer.length/e.clip.buffer.sampleRate).toFixed(2),s),insert(l,()=>formatOfAudioBuffer(e.clip.buffer)),t})();delegateEvents(["click"]);const style="",_tmpl$$1=template("<div><progress></progress></div>"),Curtain=()=>(()=>{const e=_tmpl$$1.cloneNode(!0);return e.style.setProperty("position","fixed"),e.style.setProperty("width","100vw"),e.style.setProperty("height","100vh"),e.style.setProperty("left","0"),e.style.setProperty("top","0"),e.style.setProperty("background","black"),e.style.setProperty("opacity","0.3"),e.style.setProperty("display","grid"),e.style.setProperty("place-content","center"),e.style.setProperty("z-index","100"),e})(),_tmpl$=template("<div><h2>import audio</h2></div>"),_tmpl$2=template("<button>delete sessions</button>"),_tmpl$3=template("<div><h2>sessions</h2></div>"),_tmpl$4=template("<div><h3></h3><p></p><p>s</p><p>last modified </p><button>open</button></div>"),_tmpl$5=template('<form><button type="submit">from url</button><label for="url-input">url:</label><input type="url" id="url-input" name="url" required></form>'),_tmpl$6=template("<div></div>"),_tmpl$7=template('<dialog id="settings-dialog"></dialog>'),_tmpl$8=template("<div><button>X</button><fieldset><legend>speed/pitch</legend></fieldset><fieldset><legend>filter</legend></fieldset><fieldset><legend>compression</legend></fieldset></div>"),_tmpl$9=template('<div><p><label></label><span><span></span></span></p><input type="range"></div>'),_tmpl$10=template('<div style="display: grid; position: relative;"><button data-details-link>...</button></div>'),_tmpl$11=template("<button>share</button>"),_tmpl$12=template('<div id="region-details"><div id="region-details-header"><button>back</button><h2></h2><div id="region-details-footer"><button>\u2039</button><button>\u203A</button></div></div><div id="region-details-body"><fieldset id="region-details-playback"><legend>playback</legend><button>spam</button></fieldset><fieldset><legend>export</legend><button>download</button></fieldset></div></div>'),_tmpl$13=template('<form><fieldset><legend>segment region</legend><label for="number-of-pieces-input">pieces:</label><input type="number" name="number of pieces" id="number-of-pieces-input" min="2" required pattern="[0-9]*"><button type="submit">chop</button></fieldset></form>'),_tmpl$14=template('<div id="bottom-panel"></div>'),_tmpl$15=template("<button>FX</button>"),_tmpl$16=template('<fieldset><label for="loop-toggle"><span>loop</span><input type="checkbox" id="loop-toggle" name="loop"></label></fieldset>'),hashHex=async e=>{const t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(n=>n.toString(16).padStart(2,"0")).join("")},hashAudioBuffer=e=>{const t=new Float32Array(e.length*e.numberOfChannels);for(let n=0;n<e.numberOfChannels;n++)t.set(e.getChannelData(n),n*e.length);return hashHex(t)},clipOfFile=async e=>{const t=await audioContext.decodeAudioData(await arrayBufferOfFile(e)),n=await hashAudioBuffer(t);return{name:e.name,buffer:t,hash:n}},arrayBufferOfFile=e=>new Promise((t,n)=>{const r=new FileReader;r.onloadend=i=>{if(!(i.target?.result instanceof ArrayBuffer)){n();return}t(i.target.result)},r.readAsArrayBuffer(e)}),LoadAudio=()=>(()=>{const e=_tmpl$.cloneNode(!0);return e.firstChild,e.style.setProperty("padding-inline","1rem"),e.style.setProperty("display","flex"),e.style.setProperty("flex-direction","column"),e.style.setProperty("gap","1rem"),e.style.setProperty("align-items","flex-start"),insert(e,createComponent(AudioInput,{onChange:async t=>{setBusy(!0);const n=await clipOfFile(t).catch(r=>{console.error(r),alert("failed to load audio"),setBusy(!1)});!n||(setBusy(!1),dispatch({type:"setClip",clip:n}))}}),null),insert(e,createComponent(UrlInput,{}),null),e})(),Sessions=()=>{const[e,t]=createSignal(),n=new BroadcastChannel("tab-sync");onCleanup(()=>{n.close()});const r=()=>{localforage.getItem("sessions").then(o=>{!o||t([...o.values()].sort((s,l)=>l.lastModified-s.lastModified))})};n.addEventListener("message",lodash_debounce(r,1e3)),r();const i=()=>e()?.length||0;return(()=>{const o=_tmpl$3.cloneNode(!0);return o.firstChild,o.style.setProperty("padding-inline","1rem"),o.style.setProperty("display","flex"),o.style.setProperty("flex-direction","column"),o.style.setProperty("gap","1rem"),o.style.setProperty("align-items","flex-start"),insert(o,createComponent(Show,{get when(){return e()},get children(){return createComponent(For,{get each(){return e()},children:s=>(()=>{const l=_tmpl$4.cloneNode(!0),c=l.firstChild,d=c.nextSibling,f=d.nextSibling,m=f.firstChild,b=f.nextSibling;b.firstChild;const v=b.nextSibling;return c.style.setProperty("line-break","anywhere"),insert(c,()=>s.alias),insert(d,()=>formatOfChannels(s.numberOfChannels)),insert(f,()=>(s.length/s.sampleRate).toFixed(2),m),insert(b,()=>new Date(s.lastModified).toLocaleString(),null),v.$$click=async()=>{setBusy(!0),await loadSession(s),setBusy(!1)},l})()})}}),null),insert(o,createComponent(Show,{get when(){return i()},get children(){const s=_tmpl$2.cloneNode(!0);return s.$$click=async()=>{confirm("delete sessions permanently?")&&(await deleteSessions(),t())},s}}),null),o})()},UrlInput=()=>{let e;return(()=>{const t=_tmpl$5.cloneNode(!0),n=t.firstChild,r=n.nextSibling,i=r.nextSibling;t.addEventListener("submit",async s=>{if(s.preventDefault(),s.currentTarget.checkValidity()&&e){setBusy(!0);const l=e.value,c=await fetch(l).then(m=>m.arrayBuffer()).then(m=>audioContext.decodeAudioData(m)).catch(m=>{console.error(m),alert("failed to load audio"),setBusy(!1)});if(!c)return;const d=l.slice(l.lastIndexOf("/")+1),f=await hashAudioBuffer(c);dispatch({type:"setClip",clip:{name:d,buffer:c,hash:f}}),setBusy(!1)}}),t.style.setProperty("display","flex"),t.style.setProperty("gap","1ch"),t.style.setProperty("align-items","center"),t.style.setProperty("flex-wrap","wrap");const o=e;return typeof o=="function"?use(o,i):e=i,t})()},App=()=>[createComponent(Show,{get when(){return state.clip},fallback:()=>(()=>{const e=_tmpl$6.cloneNode(!0);return e.style.setProperty("display","flex"),e.style.setProperty("flex-direction","column"),e.style.setProperty("gap","1rem"),e.style.setProperty("padding-block","1rem"),insert(e,createComponent(LoadAudio,{}),null),insert(e,createComponent(Sessions,{}),null),e})(),get children(){return[(()=>{const e=_tmpl$6.cloneNode(!0);return insert(e,createComponent(Details,{get clip(){return state.clip}}),null),insert(e,createComponent(Controls,{}),null),insert(e,createComponent(Waveform,{get buffer(){return state.clip.buffer}}),null),e})(),createComponent(BottomPanel,{}),createComponent(FloatingControls,{}),createComponent(SettingsDialog,{})]}}),createComponent(Show,{get when(){return busy()},get children(){return createComponent(Curtain,{})}})],SettingsDialog=()=>{let e;return(()=>{const t=_tmpl$7.cloneNode(!0);t.$$click=r=>{const i=r.currentTarget.getBoundingClientRect(),o=r.x<i.x||r.y<i.y||r.x>i.x+i.width||r.y>i.y+i.height;r.target===e&&o&&e?.close()};const n=e;return typeof n=="function"?use(n,t):e=t,t.style.setProperty("max-height","unset"),t.style.setProperty("max-width","100vw"),t.style.setProperty("box-sizing","border-box"),t.style.setProperty("height","100vh"),t.style.setProperty("border","none"),t.style.setProperty("border-right","2px solid"),insert(t,createComponent(SettingsForm,{})),t})()},SettingsForm=()=>(()=>{const e=_tmpl$8.cloneNode(!0),t=e.firstChild,n=t.nextSibling;n.firstChild;const r=n.nextSibling;r.firstChild;const i=r.nextSibling;return i.firstChild,t.$$click=()=>{const o=document.getElementById("settings-dialog");o instanceof HTMLDialogElement&&o.close()},t.style.setProperty("align-self","flex-start"),insert(n,createComponent(RangeInput,{get value(){return player.pitchOffsetSemis()},onInput:o=>{player.setPitchOffsetSemis(parseFloat(o.currentTarget.value))},label:"coarse",id:"speed-semis",min:-12,max:12,sign:!0,unit:"semis"}),null),insert(n,createComponent(RangeInput,{get value(){return player.pitchOffsetCents()},onInput:o=>{player.setPitchOffsetCents(parseFloat(o.currentTarget.value))},label:"fine",id:"speed-cents",min:-50,max:50,sign:!0,unit:"cents"}),null),insert(r,createComponent(RangeInput,{get value(){return player.loPass()},transformDisplay:o=>Math.floor(mapLinearToLogarithmic(o)),onInput:o=>{player.setLoPass(parseFloat(o.currentTarget.value))},label:"low pass",id:"filter-low-pass",min:0,max:100,unit:"hz"}),null),insert(r,createComponent(RangeInput,{get value(){return player.hiPass()},transformDisplay:o=>Math.floor(mapLinearToLogarithmic(o)),onInput:o=>{player.setHiPass(parseFloat(o.currentTarget.value))},label:"high pass",id:"filter-high-pass",min:0,max:100,unit:"hz"}),null),insert(i,createComponent(RangeInput,{get value(){return player.compressionThreshold()},onInput:o=>{player.setCompressionThreshold(parseFloat(o.currentTarget.value))},label:"threshold",id:"compression-threshold",min:-30,max:0,sign:!0,unit:"dB"}),null),insert(e,createComponent(RangeInput,{get value(){return player.gain()},onInput:o=>{player.setGain(parseFloat(o.currentTarget.value))},label:"gain",id:"gain",min:-20,max:20,sign:!0,unit:"dB"}),null),e})(),RangeInput=e=>{const t=()=>{const n=e.transformDisplay?e.transformDisplay(e.value):e.value;return(e.sign?`${e.value>=0?"+":"-"}${Math.abs(n)}`:n)+(e.unit||"")};return(()=>{const n=_tmpl$9.cloneNode(!0),r=n.firstChild,i=r.firstChild,o=i.nextSibling,s=o.firstChild,l=r.nextSibling;return n.style.setProperty("width","100%"),r.style.setProperty("display","flex"),r.style.setProperty("font-family","monospace"),insert(i,()=>e.label),o.style.setProperty("margin-inline-start","auto"),insert(s,t),addEventListener$1(l,"input",e.onInput,!0),l.style.setProperty("width","100%"),createRenderEffect(c=>{const d=e.id,f=e.id,m=e.id,b=e.min,v=e.max;return d!==c._v$&&setAttribute(i,"for",c._v$=d),f!==c._v$2&&setAttribute(l,"name",c._v$2=f),m!==c._v$3&&setAttribute(l,"id",c._v$3=m),b!==c._v$4&&setAttribute(l,"min",c._v$4=b),v!==c._v$5&&setAttribute(l,"max",c._v$5=v),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),createRenderEffect(()=>l.value=e.value),n})()},Pads=()=>(()=>{const e=_tmpl$6.cloneNode(!0);return e.style.setProperty("display","grid"),e.style.setProperty("grid-template-columns","repeat( auto-fit, minmax(100px, 1fr) )"),e.style.setProperty("grid-auto-rows","100px"),e.style.setProperty("padding-bottom","calc(var(--min-btn-dimension) * 2)"),insert(e,createComponent(For,{get each(){return state.regions},children:(t,n)=>(()=>{const r=_tmpl$10.cloneNode(!0),i=r.firstChild;return insert(r,createComponent(Trigger,{region:t,style:{height:"100%",width:"100%","z-index":0,"text-align":"start"},onTrigger:()=>{setZoomCenter(t.start),scrollElement&&contentElement&&(scrollElement.scrollLeft=t.start*contentElement.clientWidth-scrollElement.clientWidth/2)},get text(){return(n()+1).toString()}}),i),i.$$click=()=>{dispatch({type:"selectRegion",index:n()});const o=state.regions[n()];if(!o)return;setZoomCenter(o.start);const s=document.querySelector("#region-details button");s instanceof HTMLElement&&s.focus(),scrollRegionIntoView(o)},i.style.setProperty("position","absolute"),i.style.setProperty("right","0"),createRenderEffect(()=>setAttribute(r,"id",`region-${n()}`)),r})()})),e})(),RegionDetails=e=>{const t=()=>{const r=e.index+1,i=state.regions[r];!i||r<state.regions.length&&(dispatch({type:"selectRegion",index:r}),setZoomCenter(i.start),scrollRegionIntoView(i))},n=()=>{const r=e.index-1;if(r>-1){dispatch({type:"selectRegion",index:r});const i=state.regions[r];if(!i)return;setZoomCenter(i.start),scrollRegionIntoView(i)}};return(()=>{const r=_tmpl$12.cloneNode(!0),i=r.firstChild,o=i.firstChild,s=o.nextSibling,l=s.nextSibling,c=l.firstChild,d=c.nextSibling,f=i.nextSibling,m=f.firstChild,b=m.firstChild,v=b.nextSibling,w=m.nextSibling,$=w.firstChild,T=$.nextSibling;return r.style.setProperty("display","flex"),r.style.setProperty("flex-direction","column"),r.style.setProperty("gap","1rem"),i.style.setProperty("display","flex"),i.style.setProperty("align-items","center"),i.style.setProperty("position","sticky"),i.style.setProperty("top","0"),i.style.setProperty("background","Canvas"),i.style.setProperty("z-index","1"),o.$$click=()=>{const I=e.index;dispatch({type:"selectRegion",index:void 0});const N=document.querySelector(`#region-${I} [data-details-link]`);N instanceof HTMLElement&&N.focus()},s.style.setProperty("margin-inline","1rem"),s.style.setProperty("margin-inline-start","auto"),insert(s,()=>e.index+1),l.style.setProperty("display","flex"),l.style.setProperty("justify-content","center"),c.$$click=n,c.style.setProperty("font-size","1rem"),d.$$click=t,d.style.setProperty("font-size","1rem"),f.style.setProperty("display","flex"),f.style.setProperty("flex-wrap","wrap"),f.style.setProperty("gap","1rem"),f.style.setProperty("margin-inline","1rem"),f.style.setProperty("padding-bottom","calc(var(--min-btn-dimension) * 2)"),m.$$keydown=I=>{I.key==="ArrowRight"&&(I.preventDefault(),t()),I.key==="ArrowLeft"&&(I.preventDefault(),n())},insert(m,createComponent(Trigger,{get region(){return state.regions[e.index]}}),v),v.$$click=()=>{!state.clip||player.play(state.clip.buffer,state.regions[e.index])},T.$$click=async()=>{const I=state.clip?.buffer,N=state.regions[e.index];I&&N&&(setBusy(!0),await download(I,N,player.speed(),player.loPass(),player.hiPass(),player.compressionThreshold(),player.gain()).catch(),setBusy(!1))},insert(w,createComponent(Show,{get when(){return!!navigator.share},get children(){const I=_tmpl$11.cloneNode(!0);return I.$$click=async()=>{const N=state.clip?.buffer,F=state.regions[e.index];N&&F&&(setBusy(!0),await share(N,F,player.speed(),player.loPass(),player.hiPass(),player.compressionThreshold(),player.gain()).catch(),setBusy(!1))},I}}),null),insert(f,createComponent(SegmentRegionForm,{get index(){return e.index}}),null),createRenderEffect(I=>{const N=e.index===0,F=e.index===state.regions.length-1;return N!==I._v$6&&(c.disabled=I._v$6=N),F!==I._v$7&&(d.disabled=I._v$7=F),I},{_v$6:void 0,_v$7:void 0}),r})()},SegmentRegionForm=e=>{let t;if(!state.clip)return;const n=()=>{const i=state.regions[e.index];return!state.clip||!i?0:(i.end-i.start)*state.clip.buffer.duration},r=()=>Math.min(Math.floor(n()/.01),256);return(()=>{const i=_tmpl$13.cloneNode(!0),o=i.firstChild,s=o.firstChild,l=s.nextSibling,c=l.nextSibling;i.addEventListener("submit",f=>{f.preventDefault(),f.currentTarget.checkValidity()&&t&&dispatch({type:"segmentRegion",index:e.index,pieces:parseInt(t.value)})});const d=t;return typeof d=="function"?use(d,c):t=c,createRenderEffect(f=>{const m=r()<2,b=r();return m!==f._v$8&&(o.disabled=f._v$8=m),b!==f._v$9&&setAttribute(c,"max",f._v$9=b),f},{_v$8:void 0,_v$9:void 0}),i})()},BottomPanel=()=>(()=>{const e=_tmpl$14.cloneNode(!0);return insert(e,createComponent(Show,{get when(){return state.selectedRegion!==void 0},fallback:Pads,get children(){return createComponent(RegionDetails,{get index(){return state.selectedRegion}})}})),e})(),scrollRegionIntoView=e=>{scrollElement&&contentElement&&(scrollElement.scrollLeft=e.start*contentElement.clientWidth-scrollElement.clientWidth/2)},FloatingControls=()=>(()=>{const e=_tmpl$6.cloneNode(!0);return e.style.setProperty("position","fixed"),e.style.setProperty("bottom","calc(var(--min-btn-dimension) * .25)"),e.style.setProperty("left","calc(var(--min-btn-dimension) * .25)"),e.style.setProperty("min-width","unset"),e.style.setProperty("z-index","2"),e.style.setProperty("display","flex"),e.style.setProperty("gap","calc(var(--min-btn-dimension) * .25)"),insert(e,createComponent(ToggleFxDialog,{}),null),insert(e,createComponent(ToggleLoop,{}),null),e})(),ToggleFxDialog=()=>(()=>{const e=_tmpl$15.cloneNode(!0);return e.$$click=()=>{const t=document.getElementById("settings-dialog");t instanceof HTMLDialogElement&&t.showModal()},e.style.setProperty("width","calc(var(--min-btn-dimension) * 1.25)"),e.style.setProperty("height","calc(var(--min-btn-dimension) * 1.25)"),e})(),ToggleLoop=()=>(()=>{const e=_tmpl$16.cloneNode(!0),t=e.firstChild,n=t.firstChild,r=n.nextSibling;return e.style.setProperty("width","calc(var(--min-btn-dimension) * 1.25)"),e.style.setProperty("height","calc(var(--min-btn-dimension) * 1.25)"),r.addEventListener("change",i=>{player.setLoop(i.target.checked)}),createRenderEffect(()=>r.disabled=player.playing()),createRenderEffect(()=>r.checked=player.loop()),e})();delegateEvents(["click","input","keydown"]);render(App,document.getElementById("root"));
