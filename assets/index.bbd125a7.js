(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const style$2="",sharedConfig={};function setHydrateContext(e){sharedConfig.context=e}const equalFn=(e,t)=>e===t,$PROXY=Symbol("solid-proxy"),$TRACK=Symbol("solid-track"),signalOptions={equals:equalFn};let runEffects=runQueue;const STALE=1,PENDING=2,UNOWNED={owned:null,cleanups:null,context:null,owner:null};var Owner=null;let Transition=null,Listener=null,Updates=null,Effects=null,ExecCount=0;function createRoot(e,t){const r=Listener,n=Owner,o=e.length===0,i=o?UNOWNED:{owned:null,cleanups:null,context:null,owner:t||n},l=o?e:()=>e(()=>untrack(()=>cleanNode(i)));Owner=i,Listener=null;try{return runUpdates(l,!0)}finally{Listener=r,Owner=n}}function createSignal(e,t){t=t?Object.assign({},signalOptions,t):signalOptions;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(r.value)),writeSignal(r,o));return[readSignal.bind(r),n]}function createComputed(e,t,r){const n=createComputation(e,t,!0,STALE);updateComputation(n)}function createRenderEffect(e,t,r){const n=createComputation(e,t,!1,STALE);updateComputation(n)}function createEffect(e,t,r){runEffects=runUserEffects;const n=createComputation(e,t,!1,STALE);n.user=!0,Effects?Effects.push(n):updateComputation(n)}function createMemo(e,t,r){r=r?Object.assign({},signalOptions,r):signalOptions;const n=createComputation(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,updateComputation(n),readSignal.bind(n)}function batch(e){return runUpdates(e,!1)}function untrack(e){const t=Listener;Listener=null;try{return e()}finally{Listener=t}}function onMount(e){createEffect(()=>untrack(e))}function onCleanup(e){return Owner===null||(Owner.cleanups===null?Owner.cleanups=[e]:Owner.cleanups.push(e)),e}function getListener(){return Listener}function readSignal(){const e=Transition;if(this.sources&&(this.state||e))if(this.state===STALE||e)updateComputation(this);else{const t=Updates;Updates=null,runUpdates(()=>lookUpstream(this),!1),Updates=t}if(Listener){const t=this.observers?this.observers.length:0;Listener.sources?(Listener.sources.push(this),Listener.sourceSlots.push(t)):(Listener.sources=[this],Listener.sourceSlots=[t]),this.observers?(this.observers.push(Listener),this.observerSlots.push(Listener.sources.length-1)):(this.observers=[Listener],this.observerSlots=[Listener.sources.length-1])}return this.value}function writeSignal(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&runUpdates(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o],l=Transition&&Transition.running;l&&Transition.disposed.has(i),(l&&!i.tState||!l&&!i.state)&&(i.pure?Updates.push(i):Effects.push(i),i.observers&&markDownstream(i)),l||(i.state=STALE)}if(Updates.length>1e6)throw Updates=[],new Error},!1)),t}function updateComputation(e){if(!e.fn)return;cleanNode(e);const t=Owner,r=Listener,n=ExecCount;Listener=Owner=e,runComputation(e,e.value,n),Listener=r,Owner=t}function runComputation(e,t,r){let n;try{n=e.fn(t)}catch(o){e.pure&&(e.state=STALE),handleError(o)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?writeSignal(e,n):e.value=n,e.updatedAt=r)}function createComputation(e,t,r,n=STALE,o){const i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Owner,context:null,pure:r};return Owner===null||Owner!==UNOWNED&&(Owner.owned?Owner.owned.push(i):Owner.owned=[i]),i}function runTop(e){const t=Transition;if(e.state===0||t)return;if(e.state===PENDING||t)return lookUpstream(e);if(e.suspense&&untrack(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ExecCount);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===STALE||t)updateComputation(e);else if(e.state===PENDING||t){const o=Updates;Updates=null,runUpdates(()=>lookUpstream(e,r[0]),!1),Updates=o}}function runUpdates(e,t){if(Updates)return e();let r=!1;t||(Updates=[]),Effects?r=!0:Effects=[],ExecCount++;try{const n=e();return completeUpdates(r),n}catch(n){Updates||(Effects=null),handleError(n)}}function completeUpdates(e){if(Updates&&(runQueue(Updates),Updates=null),e)return;const t=Effects;Effects=null,t.length&&runUpdates(()=>runEffects(t),!1)}function runQueue(e){for(let t=0;t<e.length;t++)runTop(e[t])}function runUserEffects(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:runTop(n)}for(sharedConfig.context&&setHydrateContext(),t=0;t<r;t++)runTop(e[t])}function lookUpstream(e,t){const r=Transition;e.state=0;for(let n=0;n<e.sources.length;n+=1){const o=e.sources[n];o.sources&&(o.state===STALE||r?o!==t&&runTop(o):(o.state===PENDING||r)&&lookUpstream(o,t))}}function markDownstream(e){const t=Transition;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=PENDING,n.pure?Updates.push(n):Effects.push(n),n.observers&&markDownstream(n))}}function cleanNode(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const i=o.pop(),l=r.observerSlots.pop();n<o.length&&(i.sourceSlots[l]=n,o[n]=i,r.observerSlots[n]=l)}}if(e.owned){for(t=0;t<e.owned.length;t++)cleanNode(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function castError(e){return e instanceof Error||typeof e=="string"?e:new Error("Unknown error")}function handleError(e){throw e=castError(e),e}const FALLBACK=Symbol("fallback");function dispose(e){for(let t=0;t<e.length;t++)e[t]()}function mapArray(e,t,r={}){let n=[],o=[],i=[],l=0,s=t.length>1?[]:null;return onCleanup(()=>dispose(i)),()=>{let a=e()||[],c,f;return a[$TRACK],untrack(()=>{let g=a.length,u,d,y,k,_,x,S,C,A;if(g===0)l!==0&&(dispose(i),i=[],n=[],o=[],l=0,s&&(s=[])),r.fallback&&(n=[FALLBACK],o[0]=createRoot($=>(i[0]=$,r.fallback())),l=1);else if(l===0){for(o=new Array(g),f=0;f<g;f++)n[f]=a[f],o[f]=createRoot(m);l=g}else{for(y=new Array(g),k=new Array(g),s&&(_=new Array(g)),x=0,S=Math.min(l,g);x<S&&n[x]===a[x];x++);for(S=l-1,C=g-1;S>=x&&C>=x&&n[S]===a[C];S--,C--)y[C]=o[S],k[C]=i[S],s&&(_[C]=s[S]);for(u=new Map,d=new Array(C+1),f=C;f>=x;f--)A=a[f],c=u.get(A),d[f]=c===void 0?-1:c,u.set(A,f);for(c=x;c<=S;c++)A=n[c],f=u.get(A),f!==void 0&&f!==-1?(y[f]=o[c],k[f]=i[c],s&&(_[f]=s[c]),f=d[f],u.set(A,f)):i[c]();for(f=x;f<g;f++)f in y?(o[f]=y[f],i[f]=k[f],s&&(s[f]=_[f],s[f](f))):o[f]=createRoot(m);o=o.slice(0,l=g),n=a.slice(0)}return o});function m(g){if(i[f]=g,s){const[u,d]=createSignal(f);return s[f]=d,t(a[f],u)}return t(a[f])}}}function createComponent(e,t){return untrack(()=>e(t||{}))}function trueFn(){return!0}const propTraps={get(e,t,r){return t===$PROXY?r:e.get(t)},has(e,t){return e.has(t)},set:trueFn,deleteProperty:trueFn,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:trueFn,deleteProperty:trueFn}},ownKeys(e){return e.keys()}};function resolveSource(e){return(e=typeof e=="function"?e():e)?e:{}}function mergeProps(...e){if(e.some(r=>r&&($PROXY in r||typeof r=="function")))return new Proxy({get(r){for(let n=e.length-1;n>=0;n--){const o=resolveSource(e[n])[r];if(o!==void 0)return o}},has(r){for(let n=e.length-1;n>=0;n--)if(r in resolveSource(e[n]))return!0;return!1},keys(){const r=[];for(let n=0;n<e.length;n++)r.push(...Object.keys(resolveSource(e[n])));return[...new Set(r)]}},propTraps);const t={};for(let r=e.length-1;r>=0;r--)if(e[r]){const n=Object.getOwnPropertyDescriptors(e[r]);for(const o in n)o in t||Object.defineProperty(t,o,{enumerable:!0,get(){for(let i=e.length-1;i>=0;i--){const l=(e[i]||{})[o];if(l!==void 0)return l}}})}return t}function splitProps(e,...t){const r=new Set(t.flat()),n=Object.getOwnPropertyDescriptors(e),o=$PROXY in e;o||t.push(Object.keys(n).filter(l=>!r.has(l)));const i=t.map(l=>{const s={};for(let a=0;a<l.length;a++){const c=l[a];!o&&!(c in e)||Object.defineProperty(s,c,n[c]?n[c]:{get(){return e[c]},set(){return!0},enumerable:!0})}return s});return o&&i.push(new Proxy({get(l){return r.has(l)?void 0:e[l]},has(l){return r.has(l)?!1:l in e},keys(){return Object.keys(e).filter(l=>!r.has(l))}},propTraps)),i}function For(e){const t="fallback"in e&&{fallback:()=>e.fallback};return createMemo(mapArray(()=>e.each,e.children,t||void 0))}function Show(e){let t=!1;const r=e.keyed,n=createMemo(()=>e.when,void 0,{equals:(o,i)=>t?o===i:!o==!i});return createMemo(()=>{const o=n();if(o){const i=e.children,l=typeof i=="function"&&i.length>0;return t=r||l,l?untrack(()=>i(o)):i}return e.fallback})}const booleans=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Properties=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...booleans]),ChildProperties=new Set(["innerHTML","textContent","innerText","children"]),Aliases=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),PropAliases=Object.assign(Object.create(null),{class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"}),DelegatedEvents=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),SVGNamespace={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function reconcileArrays(e,t,r){let n=r.length,o=t.length,i=n,l=0,s=0,a=t[o-1].nextSibling,c=null;for(;l<o||s<i;){if(t[l]===r[s]){l++,s++;continue}for(;t[o-1]===r[i-1];)o--,i--;if(o===l){const f=i<n?s?r[s-1].nextSibling:r[i-s]:a;for(;s<i;)e.insertBefore(r[s++],f)}else if(i===s)for(;l<o;)(!c||!c.has(t[l]))&&t[l].remove(),l++;else if(t[l]===r[i-1]&&r[s]===t[o-1]){const f=t[--o].nextSibling;e.insertBefore(r[s++],t[l++].nextSibling),e.insertBefore(r[--i],f),t[o]=r[i]}else{if(!c){c=new Map;let m=s;for(;m<i;)c.set(r[m],m++)}const f=c.get(t[l]);if(f!=null)if(s<f&&f<i){let m=l,g=1,u;for(;++m<o&&m<i&&!((u=c.get(t[m]))==null||u!==f+g);)g++;if(g>f-s){const d=t[l];for(;s<f;)e.insertBefore(r[s++],d)}else e.replaceChild(r[s++],t[l++])}else l++;else t[l++].remove()}}}const $$EVENTS="_$DX_DELEGATE";function render(e,t,r,n={}){let o;return createRoot(i=>{o=i,t===document?e():insert(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{o(),t.textContent=""}}function template(e,t,r){const n=document.createElement("template");n.innerHTML=e;let o=n.content.firstChild;return r&&(o=o.firstChild),o}function delegateEvents(e,t=window.document){const r=t[$$EVENTS]||(t[$$EVENTS]=new Set);for(let n=0,o=e.length;n<o;n++){const i=e[n];r.has(i)||(r.add(i),t.addEventListener(i,eventHandler))}}function setAttribute(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function setAttributeNS(e,t,r,n){n==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,n)}function className(e,t){t==null?e.removeAttribute("class"):e.className=t}function addEventListener$1(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){const o=r[0];e.addEventListener(t,r[0]=i=>o.call(e,r[1],i))}else e.addEventListener(t,r)}function classList(e,t,r={}){const n=Object.keys(t||{}),o=Object.keys(r);let i,l;for(i=0,l=o.length;i<l;i++){const s=o[i];!s||s==="undefined"||t[s]||(toggleClassKey(e,s,!1),delete r[s])}for(i=0,l=n.length;i<l;i++){const s=n[i],a=!!t[s];!s||s==="undefined"||r[s]===a||!a||(toggleClassKey(e,s,!0),r[s]=a)}return r}function style$1(e,t,r){if(!t)return r?setAttribute(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let o,i;for(i in r)t[i]==null&&n.removeProperty(i),delete r[i];for(i in t)o=t[i],o!==r[i]&&(n.setProperty(i,o),r[i]=o);return r}function spread(e,t={},r,n){const o={};return n||createRenderEffect(()=>o.children=insertExpression(e,t.children,o.children)),createRenderEffect(()=>t.ref&&t.ref(e)),createRenderEffect(()=>assign(e,t,r,!0,o,!0)),o}function use(e,t,r){return untrack(()=>e(t,r))}function insert(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return insertExpression(e,t,n,r);createRenderEffect(o=>insertExpression(e,t(),o,r),n)}function assign(e,t,r,n,o={},i=!1){t||(t={});for(const l in o)if(!(l in t)){if(l==="children")continue;o[l]=assignProp(e,l,null,o[l],r,i)}for(const l in t){if(l==="children"){n||insertExpression(e,t.children);continue}const s=t[l];o[l]=assignProp(e,l,s,o[l],r,i)}}function toPropertyName(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function toggleClassKey(e,t,r){const n=t.trim().split(/\s+/);for(let o=0,i=n.length;o<i;o++)e.classList.toggle(n[o],r)}function assignProp(e,t,r,n,o,i){let l,s,a;if(t==="style")return style$1(e,r,n);if(t==="classList")return classList(e,r,n);if(r===n)return n;if(t==="ref")i||r(e);else if(t.slice(0,3)==="on:"){const c=t.slice(3);n&&e.removeEventListener(c,n),r&&e.addEventListener(c,r)}else if(t.slice(0,10)==="oncapture:"){const c=t.slice(10);n&&e.removeEventListener(c,n,!0),r&&e.addEventListener(c,r,!0)}else if(t.slice(0,2)==="on"){const c=t.slice(2).toLowerCase(),f=DelegatedEvents.has(c);if(!f&&n){const m=Array.isArray(n)?n[0]:n;e.removeEventListener(c,m)}(f||r)&&(addEventListener$1(e,c,r,f),f&&delegateEvents([c]))}else if((a=ChildProperties.has(t))||!o&&(PropAliases[t]||(s=Properties.has(t)))||(l=e.nodeName.includes("-")))t==="class"||t==="className"?className(e,r):l&&!s&&!a?e[toPropertyName(t)]=r:e[PropAliases[t]||t]=r;else{const c=o&&t.indexOf(":")>-1&&SVGNamespace[t.split(":")[0]];c?setAttributeNS(e,c,t,r):setAttribute(e,Aliases[t]||t,r)}return r}function eventHandler(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}}),sharedConfig.registry&&!sharedConfig.done&&(sharedConfig.done=!0,document.querySelectorAll("[id^=pl-]").forEach(n=>n.remove()));r!==null;){const n=r[t];if(n&&!r.disabled){const o=r[`${t}Data`];if(o!==void 0?n.call(r,o,e):n.call(r,e),e.cancelBubble)return}r=r.host&&r.host!==r&&r.host instanceof Node?r.host:r.parentNode}}function insertExpression(e,t,r,n,o){for(sharedConfig.context&&!r&&(r=[...e.childNodes]);typeof r=="function";)r=r();if(t===r)return r;const i=typeof t,l=n!==void 0;if(e=l&&r[0]&&r[0].parentNode||e,i==="string"||i==="number"){if(sharedConfig.context)return r;if(i==="number"&&(t=t.toString()),l){let s=r[0];s&&s.nodeType===3?s.data=t:s=document.createTextNode(t),r=cleanChildren(e,r,n,s)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||i==="boolean"){if(sharedConfig.context)return r;r=cleanChildren(e,r,n)}else{if(i==="function")return createRenderEffect(()=>{let s=t();for(;typeof s=="function";)s=s();r=insertExpression(e,s,r,n)}),()=>r;if(Array.isArray(t)){const s=[],a=r&&Array.isArray(r);if(normalizeIncomingArray(s,t,r,o))return createRenderEffect(()=>r=insertExpression(e,s,r,n,!0)),()=>r;if(sharedConfig.context){if(!s.length)return r;for(let c=0;c<s.length;c++)if(s[c].parentNode)return r=s}if(s.length===0){if(r=cleanChildren(e,r,n),l)return r}else a?r.length===0?appendNodes(e,s,n):reconcileArrays(e,r,s):(r&&cleanChildren(e),appendNodes(e,s));r=s}else if(t instanceof Node){if(sharedConfig.context&&t.parentNode)return r=l?[t]:t;if(Array.isArray(r)){if(l)return r=cleanChildren(e,r,n,t);cleanChildren(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function normalizeIncomingArray(e,t,r,n){let o=!1;for(let i=0,l=t.length;i<l;i++){let s=t[i],a=r&&r[i];if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))o=normalizeIncomingArray(e,s,a)||o;else if(typeof s=="function")if(n){for(;typeof s=="function";)s=s();o=normalizeIncomingArray(e,Array.isArray(s)?s:[s],Array.isArray(a)?a:[a])||o}else e.push(s),o=!0;else{const c=String(s);a&&a.nodeType===3&&a.data===c?e.push(a):e.push(document.createTextNode(c))}}return o}function appendNodes(e,t,r=null){for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[n],r)}function cleanChildren(e,t,r,n){if(r===void 0)return e.textContent="";const o=n||document.createTextNode("");if(t.length){let i=!1;for(let l=t.length-1;l>=0;l--){const s=t[l];if(o!==s){const a=s.parentNode===e;!i&&!l?a?e.replaceChild(o,s):e.insertBefore(o,r):a&&s.remove()}else i=!0}}else e.insertBefore(o,r);return[o]}function unmute(e,t=!1,r=!1){let n;document.hidden!==void 0?n={hidden:"hidden",visibilitychange:"visibilitychange"}:document.webkitHidden!==void 0?n={hidden:"webkitHidden",visibilitychange:"webkitvisibilitychange"}:document.mozHidden!==void 0?n={hidden:"mozHidden",visibilitychange:"mozvisibilitychange"}:document.msHidden!==void 0&&(n={hidden:"msHidden",visibilitychange:"msvisibilitychange"});function o(v,T,N,L,p){for(let w=0;w<T.length;++w)v.addEventListener(T[w],N,{capture:L,passive:p})}function i(v,T,N,L,p){for(let w=0;w<T.length;++w)v.removeEventListener(T[w],N,{capture:L,passive:p})}function l(){}let s=navigator.userAgent.toLowerCase(),a=r||s.indexOf("iphone")>=0&&s.indexOf("like iphone")<0||s.indexOf("ipad")>=0&&s.indexOf("like ipad")<0||s.indexOf("ipod")>=0&&s.indexOf("like ipod")<0||s.indexOf("mac os x")>=0&&navigator.maxTouchPoints>0,c=!0;function f(){let v=!!(t||(!n||!document[n.hidden])&&(!a||document.hasFocus()));v!==c&&(c=v,x(!1),u())}function m(){f()}n&&o(document,[n.visibilitychange],m,!0,!0);function g(v){v&&v.target!==window||f()}a&&o(window,["focus","blur"],g,!0,!0);function u(){if(c){if(e.state!=="running"&&e.state!=="closed"&&A){let v=e.resume();v&&v.then(l,l).catch(l)}}else if(e.state==="running"){let v=e.suspend();v&&v.then(l,l).catch(l)}}function d(v){(!v||!v.unmute_handled)&&(v.unmute_handled=!0,u())}o(e,["statechange"],d,!0,!0),e.onstatechange||(e.onstatechange=d);let y=null;function k(v,T){let N=T;for(;v>1;v--)N+=T;return N}let _="data:audio/mpeg;base64,//uQx"+k(23,"A")+"WGluZwAAAA8AAAACAAACcQCA"+k(16,"gICA")+k(66,"/")+"8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkI"+k(320,"A")+"//sQxAADgnABGiAAQBCqgCRMAAgEAH"+k(15,"/")+"7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq"+k(18,"/")+"9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAw"+k(97,"V")+"Q==";function x(v){if(a)if(c){if(v){if(!y){let T=document.createElement("div");T.innerHTML="<audio x-webkit-airplay='deny'></audio>",y=T.children.item(0),y.controls=!1,y.disableRemotePlayback=!0,y.preload="auto",y.src=_,y.loop=!0,y.load()}if(y.paused){let T=y.play();T&&T.then(l,S).catch(S)}}}else S()}function S(){y&&(y.src="about:blank",y.load(),y=null)}const C=["click","contextmenu","auxclick","dblclick","mousedown","mouseup","touchend","keydown","keyup"];let A=!1;function $(){A=!0,x(!0),u()}return o(window,C,$,!0,!0),{dispose:function(){S(),n&&i(document,[n.visibilitychange],m,!0,!0),a&&i(window,["focus","blur"],g,!0,!0),i(window,C,$,!0,!0),i(e,["statechange"],d,!0,!0),e.onstatechange===d&&(e.onstatechange=null)}}}const audioContext=new AudioContext;unmute(audioContext);const _tmpl$$7=template("<button>load audio</button>"),_tmpl$2$2=template('<input type="file" style="display: none;" accept=".mp3, .wav, .m4a">'),AudioInput=e=>{let t;return[(()=>{const r=_tmpl$$7.cloneNode(!0);return r.$$click=()=>t?.click(),r})(),(()=>{const r=_tmpl$2$2.cloneNode(!0);r.addEventListener("change",o=>{const[i]=[...o.currentTarget.files||[]];clipOfFile(i).then(e.onChange)});const n=t;return typeof n=="function"?use(n,r):t=r,r})()]},clipOfFile=async e=>({name:e.name,buffer:await audioContext.decodeAudioData(await arrayBufferOfFile(e))}),arrayBufferOfFile=e=>new Promise((t,r)=>{const n=new FileReader;n.onloadend=o=>{if(!(o.target?.result instanceof ArrayBuffer)){r();return}t(o.target.result)},n.readAsArrayBuffer(e)});delegateEvents(["click"]);const useAnimationFrame=e=>{let t;const r=()=>{e(),t=requestAnimationFrame(r)};onMount(()=>{t=requestAnimationFrame(r)}),onCleanup(()=>{cancelAnimationFrame(t)})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},audiobufferToWav=audioBufferToWav;function audioBufferToWav(e,t){t=t||{};var r=e.numberOfChannels,n=e.sampleRate,o=t.float32?3:1,i=o===3?32:16,l;return r===2?l=interleave(e.getChannelData(0),e.getChannelData(1)):l=e.getChannelData(0),encodeWAV(l,o,n,r,i)}function encodeWAV(e,t,r,n,o){var i=o/8,l=n*i,s=new ArrayBuffer(44+e.length*i),a=new DataView(s);return writeString(a,0,"RIFF"),a.setUint32(4,36+e.length*i,!0),writeString(a,8,"WAVE"),writeString(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,t,!0),a.setUint16(22,n,!0),a.setUint32(24,r,!0),a.setUint32(28,r*l,!0),a.setUint16(32,l,!0),a.setUint16(34,o,!0),writeString(a,36,"data"),a.setUint32(40,e.length*i,!0),t===1?floatTo16BitPCM(a,44,e):writeFloat32(a,44,e),s}function interleave(e,t){for(var r=e.length+t.length,n=new Float32Array(r),o=0,i=0;o<r;)n[o++]=e[i],n[o++]=t[i],i++;return n}function writeFloat32(e,t,r){for(var n=0;n<r.length;n++,t+=4)e.setFloat32(t,r[n],!0)}function floatTo16BitPCM(e,t,r){for(var n=0;n<r.length;n++,t+=2){var o=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,o<0?o*32768:o*32767,!0)}}function writeString(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}const player=function(){const[t,r]=createSignal(void 0),[n,o]=createSignal(0),[i,l]=createSignal({start:0,end:1});let s;const a=(u,d={start:0,end:1})=>{l(d);const y=u.duration*d.start;c(),o(y),r(audioContext.currentTime),s=attackRelease(audioContext,u,d,c)},c=()=>{!s||(s.smoothStop(),s=void 0,r(void 0))},f=()=>t()!==void 0,[m,g]=createSignal(0);return useAnimationFrame(()=>{const u=t();if(!u||!s?.sourceNode.buffer)return 0;const y=audioContext.currentTime-u+n();g(y/s.sourceNode.buffer.duration)}),{play:a,playing:f,region:i,stop:c,progress:m}}(),attackRelease=(e,t,r,n)=>{const i=e.createGain();i.connect(e.destination),i.gain.setValueAtTime(0,e.currentTime),i.gain.linearRampToValueAtTime(1,e.currentTime+.001);const l=t.duration*r.start,a=t.duration*r.end-l,c=e.currentTime+a;i.gain.setValueAtTime(1,c-.001),i.gain.linearRampToValueAtTime(0,c);const f=e.createBufferSource();return f.buffer=t,f.connect(i),n&&(f.onended=n),f.start(0,l,a),{sourceNode:f,smoothStop:()=>{const g=e.currentTime+.001;i.gain.cancelScheduledValues(e.currentTime),i.gain.setValueAtTime(1,e.currentTime),i.gain.linearRampToValueAtTime(0,g),f.onended=null,f.stop(g)}}},download=async(e,t)=>{const r=new OfflineAudioContext(e.numberOfChannels,e.duration*e.sampleRate*(t.end-t.start),e.sampleRate);attackRelease(r,e,t);const n=await r.startRendering(),o=audiobufferToWav(n),i=await crypto.subtle.digest("SHA-256",o),s=Array.from(new Uint8Array(i)).map(a=>a.toString(16).padStart(2,"0")).join("")+".wav";if(navigator.share){const a=new File([o],s,{type:"audio/wav"});navigator.share({files:[a]})}else{const a=URL.createObjectURL(new Blob([o],{type:"audio/wav"})),c=document.createElement("a");c.href=a,c.setAttribute("download",s),c.click(),URL.revokeObjectURL(a)}};window.download=download;const sortedIndex=(e,t)=>{let r=0,n=e.length;for(;r<=n;){const o=Math.floor((r+n)/2);if(e[o]<t)r=o+1;else if(e[o]>t)n=o-1;else return o}return r},$RAW=Symbol("store-raw"),$NODE=Symbol("store-node"),$NAME=Symbol("store-name");function wrap$1(e,t){let r=e[$PROXY];if(!r&&(Object.defineProperty(e,$PROXY,{value:r=new Proxy(e,proxyTraps$1)}),!Array.isArray(e))){const n=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let i=0,l=n.length;i<l;i++){const s=n[i];if(o[s].get){const a=o[s].get.bind(r);Object.defineProperty(e,s,{enumerable:o[s].enumerable,get:a})}}}return r}function isWrappable(e){let t;return e!=null&&typeof e=="object"&&(e[$PROXY]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function unwrap(e,t=new Set){let r,n,o,i;if(r=e!=null&&e[$RAW])return r;if(!isWrappable(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let l=0,s=e.length;l<s;l++)o=e[l],(n=unwrap(o,t))!==o&&(e[l]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const l=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let a=0,c=l.length;a<c;a++)i=l[a],!s[i].get&&(o=e[i],(n=unwrap(o,t))!==o&&(e[i]=n))}return e}function getDataNodes(e){let t=e[$NODE];return t||Object.defineProperty(e,$NODE,{value:t={}}),t}function getDataNode(e,t,r){return e[t]||(e[t]=createDataNode(r))}function proxyDescriptor$1(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===$PROXY||t===$NODE||t===$NAME||(delete r.value,delete r.writable,r.get=()=>e[$PROXY][t]),r}function trackSelf(e){if(getListener()){const t=getDataNodes(e);(t._||(t._=createDataNode()))()}}function ownKeys(e){return trackSelf(e),Reflect.ownKeys(e)}function createDataNode(e){const[t,r]=createSignal(e,{equals:!1,internal:!0});return t.$=r,t}const proxyTraps$1={get(e,t,r){if(t===$RAW)return e;if(t===$PROXY)return r;if(t===$TRACK)return trackSelf(e),r;const n=getDataNodes(e),o=n.hasOwnProperty(t);let i=o?n[t]():e[t];if(t===$NODE||t==="__proto__")return i;if(!o){const l=Object.getOwnPropertyDescriptor(e,t);getListener()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(l&&l.get)&&(i=getDataNode(n,t,i)())}return isWrappable(i)?wrap$1(i):i},has(e,t){return t===$RAW||t===$PROXY||t===$TRACK||t===$NODE||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys,getOwnPropertyDescriptor:proxyDescriptor$1};function setProperty(e,t,r,n=!1){if(!n&&e[t]===r)return;const o=e[t],i=e.length;r===void 0?delete e[t]:e[t]=r;let l=getDataNodes(e),s;(s=getDataNode(l,t,o))&&s.$(()=>r),Array.isArray(e)&&e.length!==i&&(s=getDataNode(l,"length",i))&&s.$(e.length),(s=l._)&&s.$()}function mergeStoreNode(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const o=r[n];setProperty(e,o,t[o])}}function updateArray(e,t){if(typeof t=="function"&&(t=t(e)),t=unwrap(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){const o=t[r];e[r]!==o&&setProperty(e,r,o)}setProperty(e,"length",n)}else mergeStoreNode(e,t)}function updatePath(e,t,r=[]){let n,o=e;if(t.length>1){n=t.shift();const l=typeof n,s=Array.isArray(e);if(Array.isArray(n)){for(let a=0;a<n.length;a++)updatePath(e,[n[a]].concat(t),r);return}else if(s&&l==="function"){for(let a=0;a<e.length;a++)n(e[a],a)&&updatePath(e,[a].concat(t),r);return}else if(s&&l==="object"){const{from:a=0,to:c=e.length-1,by:f=1}=n;for(let m=a;m<=c;m+=f)updatePath(e,[m].concat(t),r);return}else if(t.length>1){updatePath(e[n],t,[n].concat(r));return}o=e[n],r=[n].concat(r)}let i=t[0];typeof i=="function"&&(i=i(o,r),i===o)||n===void 0&&i==null||(i=unwrap(i),n===void 0||isWrappable(o)&&isWrappable(i)&&!Array.isArray(i)?mergeStoreNode(o,i):setProperty(e,n,i))}function createStore(...[e,t]){const r=unwrap(e||{}),n=Array.isArray(r),o=wrap$1(r);function i(...l){batch(()=>{n&&l.length===1?updateArray(r,l[0]):updatePath(r,l)})}return[o,i]}const $ROOT=Symbol("store-root");function applyState(e,t,r,n,o){const i=t[r];if(e===i)return;if(!isWrappable(e)||!isWrappable(i)||o&&e[o]!==i[o]){if(e!==i){if(r===$ROOT)return e;setProperty(t,r,e)}return}if(Array.isArray(e)){if(e.length&&i.length&&(!n||o&&e[0][o]!=null)){let a,c,f,m,g,u,d,y;for(f=0,m=Math.min(i.length,e.length);f<m&&(i[f]===e[f]||o&&i[f][o]===e[f][o]);f++)applyState(e[f],i,f,n,o);const k=new Array(e.length),_=new Map;for(m=i.length-1,g=e.length-1;m>=f&&g>=f&&(i[m]===e[g]||o&&i[m][o]===e[g][o]);m--,g--)k[g]=i[m];if(f>g||f>m){for(c=f;c<=g;c++)setProperty(i,c,e[c]);for(;c<e.length;c++)setProperty(i,c,k[c]),applyState(e[c],i,c,n,o);i.length>e.length&&setProperty(i,"length",e.length);return}for(d=new Array(g+1),c=g;c>=f;c--)u=e[c],y=o?u[o]:u,a=_.get(y),d[c]=a===void 0?-1:a,_.set(y,c);for(a=f;a<=m;a++)u=i[a],y=o?u[o]:u,c=_.get(y),c!==void 0&&c!==-1&&(k[c]=i[a],c=d[c],_.set(y,c));for(c=f;c<e.length;c++)c in k?(setProperty(i,c,k[c]),applyState(e[c],i,c,n,o)):setProperty(i,c,e[c])}else for(let a=0,c=e.length;a<c;a++)applyState(e[a],i,a,n,o);i.length>e.length&&setProperty(i,"length",e.length);return}const l=Object.keys(e);for(let a=0,c=l.length;a<c;a++)applyState(e[l[a]],i,l[a],n,o);const s=Object.keys(i);for(let a=0,c=s.length;a<c;a++)e[s[a]]===void 0&&setProperty(i,s[a],void 0)}function reconcile(e,t={}){const{merge:r,key:n="id"}=t,o=unwrap(e);return i=>{if(!isWrappable(i)||!isWrappable(o))return o;const l=applyState(o,{[$ROOT]:i},$ROOT,r,n);return l===void 0?i:l}}const defaultState=Object.freeze({cursor:0,mode:"slice",cursorControlsVisible:!1,clip:void 0,regions:[{start:0,end:1}],selectedRegion:void 0}),[store,setStore]=createStore(defaultState),state=store,dispatch={reset:()=>setStore(defaultState),setClip:e=>setStore("clip",e),setCursor:e=>setStore("cursor",Math.max(0,Math.min(e,1))),showCursorControls:()=>setStore("cursorControlsVisible",!0),hideCursorControls:()=>setStore("cursorControlsVisible",!1),setMode:e=>setStore("mode",e),slice:e=>{const t=sortedIndex(store.regions.map(r=>r.start),e);if(store.regions[t]?.start!==e)return setStore("regions",r=>[...r.slice(0,t).map((n,o)=>o===t-1?{start:n.start,end:e}:n),{start:e,end:r[t]?.start||1},...r.slice(t)]),t},healSlice:e=>{setStore("regions",t=>[...t.slice(0,e).map((r,n)=>n===e-1?{start:r.start,end:t[e+1]?.start||1}:r),...t.slice(e+1)])},selectRegion:e=>setStore("selectedRegion",e)};window.state=state;window.dispatch=dispatch;/**
 * solid-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 *//**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var props=["bottom","height","left","right","top","width"],rectChanged=function(t,r){return t===void 0&&(t={}),r===void 0&&(r={}),props.some(function(n){return t[n]!==r[n]})},observedNodes=new Map,rafId,run=function e(){var t=[];observedNodes.forEach(function(r,n){var o=n.getBoundingClientRect();rectChanged(o,r.rect)&&(r.rect=o,t.push(r))}),t.forEach(function(r){r.callbacks.forEach(function(n){return n(r.rect)})}),rafId=window.requestAnimationFrame(e)};function observeRect(e,t){return{observe:function(){var n=observedNodes.size===0;observedNodes.has(e)?observedNodes.get(e).callbacks.push(t):observedNodes.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&run()},unobserve:function(){var n=observedNodes.get(e);if(n){var o=n.callbacks.indexOf(t);o>=0&&n.callbacks.splice(o,1),n.callbacks.length||observedNodes.delete(e),observedNodes.size||cancelAnimationFrame(rafId)}}}}function memo(e,t,r){let n=[],o;return()=>{let i;r.key&&r.debug!=null&&r.debug()&&(i=Date.now());const l=e();if(!(l.length!==n.length||l.some((c,f)=>n[f]!==c)))return o;n=l;let a;if(r.key&&r.debug!=null&&r.debug()&&(a=Date.now()),o=t(...l),r==null||r.onChange==null||r.onChange(o),r.key&&r.debug!=null&&r.debug()){const c=Math.round((Date.now()-i)*100)/100,f=Math.round((Date.now()-a)*100)/100,m=f/16,g=(u,d)=>{for(u=String(u);u.length<d;)u=" "+u;return u};console.info("%c\u23F1 "+g(f,5)+" /"+g(c,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*m,120))+"deg 100% 31%);",r?.key)}return o}}const defaultKeyExtractor=e=>e,defaultRangeExtractor=e=>{const t=Math.max(e.startIndex-e.overscan,0),r=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let o=t;o<=r;o++)n.push(o);return n},observeElementRect=(e,t)=>{const r=observeRect(e.scrollElement,n=>{t(n)});if(!!e.scrollElement)return t(e.scrollElement.getBoundingClientRect()),r.observe(),()=>{r.unobserve()}},observeElementOffset=(e,t)=>{const r=()=>t(e.scrollElement[e.options.horizontal?"scrollLeft":"scrollTop"]);if(!!e.scrollElement)return r(),e.scrollElement.addEventListener("scroll",r,{capture:!1,passive:!0}),()=>{e.scrollElement.removeEventListener("scroll",r)}},measureElement=(e,t)=>e.getBoundingClientRect()[t.options.horizontal?"width":"height"],elementScroll=(e,t,r)=>{var n;(n=r.scrollElement)==null||n.scrollTo({[r.options.horizontal?"left":"top"]:e,behavior:t?"smooth":void 0})};class Virtualizer{constructor(t){var r=this;this.unsubs=[],this.scrollElement=null,this.measurementsCache=[],this.itemMeasurementsCache={},this.pendingMeasuredCacheIndexes=[],this.measureElementCache={},this.setOptions=n=>{Object.entries(n).forEach(o=>{let[i,l]=o;typeof l>"u"&&delete n[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:defaultKeyExtractor,rangeExtractor:defaultRangeExtractor,enableSmoothScroll:!0,onChange:()=>{},measureElement,initialRect:{width:0,height:0},...n}},this.notify=()=>{var n,o;(n=(o=this.options).onChange)==null||n.call(o,this)},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[]},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{const n=this.options.getScrollElement();this.scrollElement!==n&&(this.cleanup(),this.scrollElement=n,this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.notify()})),this.unsubs.push(this.options.observeElementOffset(this,o=>{this.scrollOffset=o,this.notify()})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurements=memo(()=>[this.options.count,this.options.paddingStart,this.options.getItemKey,this.itemMeasurementsCache],(n,o,i,l)=>{const s=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const a=this.measurementsCache.slice(0,s);for(let c=s;c<n;c++){const f=i(c),m=l[f],g=a[c-1]?a[c-1].end:o,u=typeof m=="number"?m:this.options.estimateSize(c),d=g+u;a[c]={index:c,start:g,size:u,end:d,key:f}}return this.measurementsCache=a,a},{key:!1,debug:()=>this.options.debug}),this.calculateRange=memo(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,o,i)=>calculateRange({measurements:n,outerSize:o,scrollOffset:i}),{key:!1,debug:()=>this.options.debug}),this.getIndexes=memo(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,o,i,l)=>n({...o,overscan:i,count:l}),{key:!1}),this.getVirtualItems=memo(()=>[this.getIndexes(),this.getMeasurements(),this.options.measureElement],(n,o,i)=>{const l=f=>m=>{var g;const u=this.measurementsCache[f];if(!m)return;const d=i(m,this),y=(g=this.itemMeasurementsCache[u.key])!=null?g:u.size;d!==y&&(u.start<this.scrollOffset&&(this.destinationOffset||this._scrollToOffset(this.scrollOffset+(d-y),!1)),this.pendingMeasuredCacheIndexes.push(f),this.itemMeasurementsCache={...this.itemMeasurementsCache,[u.key]:d},this.notify())},s=[],a={};for(let f=0,m=n.length;f<m;f++){var c;const g=n[f],d={...o[g],measureElement:a[g]=(c=this.measureElementCache[g])!=null?c:l(g)};s.push(d)}return this.measureElementCache=a,s},{key:!1}),this.scrollToOffset=function(n,o){let{align:i}=o===void 0?{align:"start"}:o;const l=()=>{const s=r.scrollOffset,a=r.getSize();i==="auto"&&(n<=s?i="start":n>=s+a?i="end":i="start"),i==="start"?r._scrollToOffset(n,!0):i==="end"?r._scrollToOffset(n-a,!0):i==="center"&&r._scrollToOffset(n-a/2,!0)};l(),requestAnimationFrame(()=>{l()})},this.scrollToIndex=function(n,o){let{align:i,...l}=o===void 0?{align:"auto"}:o;const s=r.getMeasurements(),a=r.scrollOffset,c=r.getSize(),{count:f}=r.options,m=s[Math.max(0,Math.min(n,f-1))];if(!m)return;if(i==="auto")if(m.end>=a+c-r.options.scrollPaddingEnd)i="end";else if(m.start<=a+r.options.scrollPaddingStart)i="start";else return;const g=i==="end"?m.end+r.options.scrollPaddingEnd:m.start-r.options.scrollPaddingStart;r.scrollToOffset(g,{align:i,...l})},this.getTotalSize=()=>{var n;return(((n=this.getMeasurements()[this.options.count-1])==null?void 0:n.end)||this.options.paddingStart)+this.options.paddingEnd},this._scrollToOffset=(n,o)=>{clearTimeout(this.scrollCheckFrame),this.destinationOffset=n,this.options.scrollToFn(n,this.options.enableSmoothScroll&&o,this);let i;const l=()=>{let s=this.scrollOffset;this.scrollCheckFrame=i=setTimeout(()=>{if(this.scrollCheckFrame===i){if(this.scrollOffset===s){this.destinationOffset=void 0;return}s=this.scrollOffset,l()}},100)};l()},this.measure=()=>{this.itemMeasurementsCache={},this.notify()},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset}}const findNearestBinarySearch=(e,t,r,n)=>{for(;e<=t;){const o=(e+t)/2|0,i=r(o);if(i<n)e=o+1;else if(i>n)t=o-1;else return o}return e>0?e-1:0};function calculateRange(e){let{measurements:t,outerSize:r,scrollOffset:n}=e;const o=t.length-1,l=findNearestBinarySearch(0,o,a=>t[a].start,n);let s=l;for(;s<o&&t[s].end<n+r;)s++;return{startIndex:l,endIndex:s}}function createVirtualizerBase(e){const t=mergeProps(e),r=new Virtualizer(t),[n,o]=createStore(r.getVirtualItems()),[i,l]=createSignal(r.getTotalSize()),s={get(c,f){switch(f){case"getVirtualItems":return()=>n;case"getTotalSize":return()=>i();default:return Reflect.get(c,f)}}},a=new Proxy(r,s);return a.setOptions(t),onMount(()=>{const c=a._didMount();a._willUpdate(),onCleanup(c)}),createComputed(()=>{a.setOptions(mergeProps(t,e,{onChange:c=>{c._willUpdate(),o(reconcile(c.getVirtualItems(),{key:"index"})),l(c.getTotalSize()),e.onChange==null||e.onChange(c)}})),a.measure()}),a}function createVirtualizer(e){return createVirtualizerBase(mergeProps({observeElementRect,observeElementOffset,scrollToFn:elementScroll},e))}var workerpool$1={exports:{}};/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 6.4.0
 * @date    2023-02-24
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */(function(module,exports){(function(t,r){module.exports=r()})(typeof self<"u"?self:commonjsGlobal,function(){return function(){var __webpack_modules__={345:function(e,t,r){var n=r(219),o=r(751),i=r(828),l=r(833),s=new l;function a(u,d){typeof u=="string"?this.script=u||null:(this.script=null,d=u),this.workers=[],this.tasks=[],d=d||{},this.forkArgs=Object.freeze(d.forkArgs||[]),this.forkOpts=Object.freeze(d.forkOpts||{}),this.workerThreadOpts=Object.freeze(d.workerThreadOpts||{}),this.debugPortStart=d.debugPortStart||43210,this.nodeWorker=d.nodeWorker,this.workerType=d.workerType||d.nodeWorker||"auto",this.maxQueueSize=d.maxQueueSize||1/0,this.workerTerminateTimeout=d.workerTerminateTimeout||1e3,this.onCreateWorker=d.onCreateWorker||function(){return null},this.onTerminateWorker=d.onTerminateWorker||function(){return null},d&&"maxWorkers"in d?(c(d.maxWorkers),this.maxWorkers=d.maxWorkers):this.maxWorkers=Math.max((i.cpus||4)-1,1),d&&"minWorkers"in d&&(d.minWorkers==="max"?this.minWorkers=this.maxWorkers:(f(d.minWorkers),this.minWorkers=d.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&o.ensureWorkerThreads()}a.prototype.exec=function(u,d,y){if(d&&!Array.isArray(d))throw new TypeError('Array expected as argument "params"');if(typeof u=="string"){var k=n.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var _=this.tasks,x={method:u,params:d,resolver:k,timeout:null,options:y};_.push(x);var S=k.promise.timeout;return k.promise.timeout=function(A){return _.indexOf(x)!==-1?(x.timeout=A,k.promise):S.call(k.promise,A)},this._next(),k.promise}else{if(typeof u=="function")return this.exec("run",[String(u),d]);throw new TypeError('Function or string expected as argument "method"')}},a.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var u=this;return this.exec("methods").then(function(d){var y={};return d.forEach(function(k){y[k]=function(){return u.exec(k,Array.prototype.slice.call(arguments))}}),y})},a.prototype._next=function(){if(this.tasks.length>0){var u=this._getWorker();if(u){var d=this,y=this.tasks.shift();if(y.resolver.promise.pending){var k=u.exec(y.method,y.params,y.resolver,y.options).then(d._boundNext).catch(function(){if(u.terminated)return d._removeWorker(u)}).then(function(){d._next()});typeof y.timeout=="number"&&k.timeout(y.timeout)}else d._next()}}},a.prototype._getWorker=function(){for(var u=this.workers,d=0;d<u.length;d++){var y=u[d];if(y.busy()===!1)return y}return u.length<this.maxWorkers?(y=this._createWorkerHandler(),u.push(y),y):null},a.prototype._removeWorker=function(u){var d=this;return s.releasePort(u.debugPort),this._removeWorkerFromList(u),this._ensureMinWorkers(),new n(function(y,k){u.terminate(!1,function(_){d.onTerminateWorker({forkArgs:u.forkArgs,forkOpts:u.forkOpts,workerThreadOpts:u.workerThreadOpts,script:u.script}),_?k(_):y(u)})})},a.prototype._removeWorkerFromList=function(u){var d=this.workers.indexOf(u);d!==-1&&this.workers.splice(d,1)},a.prototype.terminate=function(u,d){var y=this;this.tasks.forEach(function(C){C.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var k=function(A){s.releasePort(A.debugPort),this._removeWorkerFromList(A)},_=k.bind(this),x=[],S=this.workers.slice();return S.forEach(function(C){var A=C.terminateAndNotify(u,d).then(_).always(function(){y.onTerminateWorker({forkArgs:C.forkArgs,forkOpts:C.forkOpts,workerThreadOpts:C.workerThreadOpts,script:C.script})});x.push(A)}),n.all(x)},a.prototype.stats=function(){var u=this.workers.length,d=this.workers.filter(function(y){return y.busy()}).length;return{totalWorkers:u,busyWorkers:d,idleWorkers:u-d,pendingTasks:this.tasks.length,activeTasks:d}},a.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var u=this.workers.length;u<this.minWorkers;u++)this.workers.push(this._createWorkerHandler())},a.prototype._createWorkerHandler=function(){var u=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,workerThreadOpts:this.workerThreadOpts,script:this.script})||{};return new o(u.script||this.script,{forkArgs:u.forkArgs||this.forkArgs,forkOpts:u.forkOpts||this.forkOpts,workerThreadOpts:u.workerThreadOpts||this.workerThreadOpts,debugPort:s.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType,workerTerminateTimeout:this.workerTerminateTimeout})};function c(u){if(!m(u)||!g(u)||u<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function f(u){if(!m(u)||!g(u)||u<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function m(u){return typeof u=="number"}function g(u){return Math.round(u)==u}e.exports=a},219:function(e){function t(i,l){var s=this;if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(typeof i!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var a=[],c=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var f=function(d,y){a.push(d),c.push(y)};this.then=function(u,d){return new t(function(y,k){var _=u?r(u,y,k):y,x=d?r(d,y,k):k;f(_,x)},s)};var m=function(d){return s.resolved=!0,s.rejected=!1,s.pending=!1,a.forEach(function(y){y(d)}),f=function(k,_){k(d)},m=g=function(){},s},g=function(d){return s.resolved=!1,s.rejected=!0,s.pending=!1,c.forEach(function(y){y(d)}),f=function(k,_){_(d)},m=g=function(){},s};this.cancel=function(){return l?l.cancel():g(new n),s},this.timeout=function(u){if(l)l.timeout(u);else{var d=setTimeout(function(){g(new o("Promise timed out after "+u+" ms"))},u);s.always(function(){clearTimeout(d)})}return s},i(function(u){m(u)},function(u){g(u)})}function r(i,l,s){return function(a){try{var c=i(a);c&&typeof c.then=="function"&&typeof c.catch=="function"?c.then(l,s):l(c)}catch(f){s(f)}}}t.prototype.catch=function(i){return this.then(null,i)},t.prototype.always=function(i){return this.then(i,i)},t.all=function(i){return new t(function(l,s){var a=i.length,c=[];a?i.forEach(function(f,m){f.then(function(g){c[m]=g,a--,a==0&&l(c)},function(g){a=0,s(g)})}):l(c)})},t.defer=function(){var i={};return i.promise=new t(function(l,s){i.resolve=l,i.reject=s}),i};function n(i){this.message=i||"promise cancelled",this.stack=new Error().stack}n.prototype=new Error,n.prototype.constructor=Error,n.prototype.name="CancellationError",t.CancellationError=n;function o(i){this.message=i||"timeout exceeded",this.stack=new Error().stack}o.prototype=new Error,o.prototype.constructor=Error,o.prototype.name="TimeoutError",t.TimeoutError=o,e.exports=t},751:function(e,t,r){function n(p,w){var h=typeof Symbol<"u"&&p[Symbol.iterator]||p["@@iterator"];if(!h){if(Array.isArray(p)||(h=o(p))||w&&p&&typeof p.length=="number"){h&&(p=h);var b=0,E=function(){};return{s:E,n:function(){return b>=p.length?{done:!0}:{done:!1,value:p[b++]}},e:function(O){throw O},f:E}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,I=!1,P;return{s:function(){h=h.call(p)},n:function(){var O=h.next();return R=O.done,O},e:function(O){I=!0,P=O},f:function(){try{!R&&h.return!=null&&h.return()}finally{if(I)throw P}}}}function o(p,w){if(!!p){if(typeof p=="string")return i(p,w);var h=Object.prototype.toString.call(p).slice(8,-1);if(h==="Object"&&p.constructor&&(h=p.constructor.name),h==="Map"||h==="Set")return Array.from(p);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return i(p,w)}}function i(p,w){(w==null||w>p.length)&&(w=p.length);for(var h=0,b=new Array(w);h<w;h++)b[h]=p[h];return b}function l(p,w){var h=Object.keys(p);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(p);w&&(b=b.filter(function(E){return Object.getOwnPropertyDescriptor(p,E).enumerable})),h.push.apply(h,b)}return h}function s(p){for(var w=1;w<arguments.length;w++){var h=arguments[w]!=null?arguments[w]:{};w%2?l(Object(h),!0).forEach(function(b){a(p,b,h[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(h)):l(Object(h)).forEach(function(b){Object.defineProperty(p,b,Object.getOwnPropertyDescriptor(h,b))})}return p}function a(p,w,h){return w=c(w),w in p?Object.defineProperty(p,w,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[w]=h,p}function c(p){var w=f(p,"string");return m(w)==="symbol"?w:String(w)}function f(p,w){if(m(p)!=="object"||p===null)return p;var h=p[Symbol.toPrimitive];if(h!==void 0){var b=h.call(p,w||"default");if(m(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(p)}function m(p){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},m(p)}var g=r(219),u=r(828),d=r(397),y="__workerpool-terminate__";function k(){var p=x();if(!p)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return p}function _(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":m(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function x(){try{return d("worker_threads")}catch(p){if(m(p)==="object"&&p!==null&&p.code==="MODULE_NOT_FOUND")return null;throw p}}function S(){if(u.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var p=new Blob([r(670)],{type:"text/javascript"});return window.URL.createObjectURL(p)}else return __dirname+"/worker.js"}function C(p,w){if(w.workerType==="web")return _(),A(p,Worker);if(w.workerType==="thread")return h=k(),$(p,h,w.workerThreadOpts);if(w.workerType==="process"||!w.workerType)return v(p,T(w),d("child_process"));if(u.platform==="browser")return _(),A(p,Worker);var h=x();return h?$(p,h):v(p,T(w),d("child_process"))}function A(p,w){var h=new w(p);return h.isBrowserWorker=!0,h.on=function(b,E){this.addEventListener(b,function(R){E(R.data)})},h.send=function(b,E){this.postMessage(b,E)},h}function $(p,w,h){var b=new w.Worker(p,s({stdout:!1,stderr:!1},h));return b.isWorkerThread=!0,b.send=function(E,R){this.postMessage(E,R)},b.kill=function(){return this.terminate(),!0},b.disconnect=function(){this.terminate()},b}function v(p,w,h){var b=h.fork(p,w.forkArgs,w.forkOpts),E=b.send;return b.send=function(R){return E.call(b,R)},b.isChildProcess=!0,b}function T(p){p=p||{};var w=process.execArgv.join(" "),h=w.indexOf("--inspect")!==-1,b=w.indexOf("--debug-brk")!==-1,E=[];return h&&(E.push("--inspect="+p.debugPort),b&&E.push("--debug-brk")),process.execArgv.forEach(function(R){R.indexOf("--max-old-space-size")>-1&&E.push(R)}),Object.assign({},p,{forkArgs:p.forkArgs,forkOpts:Object.assign({},p.forkOpts,{execArgv:(p.forkOpts&&p.forkOpts.execArgv||[]).concat(E)})})}function N(p){for(var w=new Error(""),h=Object.keys(p),b=0;b<h.length;b++)w[h[b]]=p[h[b]];return w}function L(p,w){var h=this,b=w||{};this.script=p||S(),this.worker=C(this.script,b),this.debugPort=b.debugPort,this.forkOpts=b.forkOpts,this.forkArgs=b.forkArgs,this.workerThreadOpts=b.workerThreadOpts,this.workerTerminateTimeout=b.workerTerminateTimeout,p||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(P){if(!h.terminated)if(typeof P=="string"&&P==="ready")h.worker.ready=!0,R();else{var W=P.id,O=h.processing[W];O!==void 0&&(P.isEvent?O.options&&typeof O.options.on=="function"&&O.options.on(P.payload):(delete h.processing[W],h.terminating===!0&&h.terminate(),P.error?O.resolver.reject(N(P.error)):O.resolver.resolve(P.result)))}});function E(P){h.terminated=!0;for(var W in h.processing)h.processing[W]!==void 0&&h.processing[W].resolver.reject(P);h.processing=Object.create(null)}function R(){var P=n(h.requestQueue.splice(0)),W;try{for(P.s();!(W=P.n()).done;){var O=W.value;h.worker.send(O.message,O.transfer)}}catch(M){P.e(M)}finally{P.f()}}var I=this.worker;this.worker.on("error",E),this.worker.on("exit",function(P,W){var O=`Workerpool Worker terminated Unexpectedly
`;O+="    exitCode: `"+P+"`\n",O+="    signalCode: `"+W+"`\n",O+="    workerpool.script: `"+h.script+"`\n",O+="    spawnArgs: `"+I.spawnargs+"`\n",O+="    spawnfile: `"+I.spawnfile+"`\n",O+="    stdout: `"+I.stdout+"`\n",O+="    stderr: `"+I.stderr+"`\n",E(new Error(O))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.cleaning=!1,this.terminationHandler=null,this.lastId=0}L.prototype.methods=function(){return this.exec("methods")},L.prototype.exec=function(p,w,h,b){h||(h=g.defer());var E=++this.lastId;this.processing[E]={id:E,resolver:h,options:b};var R={message:{id:E,method:p,params:w},transfer:b&&b.transfer};this.terminated?h.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(R.message,R.transfer):this.requestQueue.push(R);var I=this;return h.promise.catch(function(P){if(P instanceof g.CancellationError||P instanceof g.TimeoutError)return delete I.processing[E],I.terminateAndNotify(!0).then(function(){throw P},function(W){throw W});throw P})},L.prototype.busy=function(){return this.cleaning||Object.keys(this.processing).length>0},L.prototype.terminate=function(p,w){var h=this;if(p){for(var b in this.processing)this.processing[b]!==void 0&&this.processing[b].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof w=="function"&&(this.terminationHandler=w),this.busy())this.terminating=!0;else{var E=function(P){if(h.terminated=!0,h.cleaning=!1,h.worker!=null&&h.worker.removeAllListeners&&h.worker.removeAllListeners("message"),h.worker=null,h.terminating=!1,h.terminationHandler)h.terminationHandler(P,h);else if(P)throw P};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){E(new Error("worker already killed!"));return}var R=setTimeout(function(){h.worker&&h.worker.kill()},this.workerTerminateTimeout);this.worker.once("exit",function(){clearTimeout(R),h.worker&&(h.worker.killed=!0),E()}),this.worker.ready?this.worker.send(y):this.requestQueue.push(y),this.cleaning=!0;return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");E()}},L.prototype.terminateAndNotify=function(p,w){var h=g.defer();return w&&(h.promise.timeout=w),this.terminate(p,function(b,E){b?h.reject(b):h.resolve(E)}),h.promise},e.exports=L,e.exports._tryRequireWorkerThreads=x,e.exports._setupProcessWorker=v,e.exports._setupBrowserWorker=A,e.exports._setupWorkerThreadWorker=$,e.exports.ensureWorkerThreads=k},833:function(e){var t=65535;e.exports=r;function r(){this.ports=Object.create(null),this.length=0}r.prototype.nextAvailableStartingAt=function(n){for(;this.ports[n]===!0;)n++;if(n>=t)throw new Error("WorkerPool debug port limit reached: "+n+">= "+t);return this.ports[n]=!0,this.length++,n},r.prototype.releasePort=function(n){delete this.ports[n],this.length--}},828:function(e,t,r){var n=r(397),o=function(a){return typeof a<"u"&&a.versions!=null&&a.versions.node!=null};e.exports.isNode=o,e.exports.platform=typeof process<"u"&&o(process)?"node":"browser";var i=l("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!i||i.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:n("os").cpus().length;function l(s){try{return n(s)}catch{return null}}},670:function(e){e.exports=`!function(){var __webpack_modules__={577:function(e){e.exports=function(e,r){this.message=e,this.transfer=r}}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];return void 0!==r||(r=__webpack_module_cache__[e]={exports:{}},__webpack_modules__[e](r,r.exports,__webpack_require__)),r.exports}var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(e,r){addEventListener(e,function(e){r(e.data)})},worker.send=function(e){postMessage(e)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",function(){process.exit(1)})),worker.exit=process.exit.bind(process)}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(e,r){return Object.defineProperty(e,r,{value:o[r],enumerable:!0})},{})}function isPromise(e){return e&&"function"==typeof e.then&&"function"==typeof e.catch}worker.methods={},worker.methods.run=function(e,r){e=new Function("return ("+e+").apply(null, arguments);");return e.apply(e,r)},worker.methods.methods=function(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){function r(){worker.exit(e)}if(!worker.terminationHandler)return r();var o=worker.terminationHandler(e);isPromise(o)?o.then(r,r):r()};var currentRequestId=null;worker.on("message",function(r){if(r===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var e=worker.methods[r.method];if(!e)throw new Error('Unknown method "'+r.method+'"');currentRequestId=r.id;var o=e.apply(e,r.params);isPromise(o)?o.then(function(e){e instanceof Transfer?worker.send({id:r.id,result:e.message,error:null},e.transfer):worker.send({id:r.id,result:e,error:null}),currentRequestId=null}).catch(function(e){worker.send({id:r.id,result:null,error:convertError(e)}),currentRequestId=null}):(o instanceof Transfer?worker.send({id:r.id,result:o.message,error:null},o.transfer):worker.send({id:r.id,result:o,error:null}),currentRequestId=null)}catch(e){worker.send({id:r.id,result:null,error:convertError(e)})}}),worker.register=function(e,r){if(e)for(var o in e)e.hasOwnProperty(o)&&(worker.methods[o]=e[o]);r&&(worker.terminationHandler=r.onTerminate),worker.send("ready")},worker.emit=function(e){currentRequestId&&(e instanceof Transfer?worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer):worker.send({id:currentRequestId,isEvent:!0,payload:e}))},__webpack_unused_export__=worker.register,worker.emit}()}();`},397:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},577:function(e){function t(r,n){this.message=r,this.transfer=n}e.exports=t},744:function(__unused_webpack_module,exports,__webpack_require__){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(e)}var Transfer=__webpack_require__(577),requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,t){addEventListener(e,function(r){t(r.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort),worker.exit=process.exit.bind(process)}else worker.on=process.on.bind(process),worker.send=function(e){process.send(e)},worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(t,r){return Object.defineProperty(t,r,{value:e[r],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(t,r){var n=new Function("return ("+t+").apply(null, arguments);");return n.apply(n,r)},worker.methods.methods=function e(){return Object.keys(worker.methods)},worker.terminationHandler=void 0,worker.cleanupAndExit=function(e){var t=function(){worker.exit(e)};if(!worker.terminationHandler)return t();var r=worker.terminationHandler(e);isPromise(r)?r.then(t,t):t()};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.cleanupAndExit(0);try{var t=worker.methods[e.method];if(t){currentRequestId=e.id;var r=t.apply(t,e.params);isPromise(r)?r.then(function(n){n instanceof Transfer?worker.send({id:e.id,result:n.message,error:null},n.transfer):worker.send({id:e.id,result:n,error:null}),currentRequestId=null}).catch(function(n){worker.send({id:e.id,result:null,error:convertError(n)}),currentRequestId=null}):(r instanceof Transfer?worker.send({id:e.id,result:r.message,error:null},r.transfer):worker.send({id:e.id,result:r,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(n){worker.send({id:e.id,result:null,error:convertError(n)})}}),worker.register=function(e,t){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);t&&(worker.terminationHandler=t.onTerminate),worker.send("ready")},worker.emit=function(e){if(currentRequestId){if(e instanceof Transfer){worker.send({id:currentRequestId,isEvent:!0,payload:e.message},e.transfer);return}worker.send({id:currentRequestId,isEvent:!0,payload:e})}},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__,t=__webpack_require__(828);e.pool=function(n,o){var i=__webpack_require__(345);return new i(n,o)},e.worker=function(n,o){var i=__webpack_require__(744);i.add(n,o)},e.workerEmit=function(n){var o=__webpack_require__(744);o.emit(n)},e.Promise=__webpack_require__(219),e.Transfer=__webpack_require__(577),e.platform=t.platform,e.isMainThread=t.isMainThread,e.cpus=t.cpus}(),__webpack_exports__}()})})(workerpool$1);const workerpool=workerpool$1.exports,_tmpl$$6=template("<canvas></canvas>"),ChannelSegment=e=>{let t,r;return onCleanup(()=>{r?.cancel()}),createEffect(async()=>{r?.cancel(),r=pool.exec(computeBuckets,[e.data,e.numBuckets]).then(n=>{t&&drawBars(t,n)}).catch(n=>{n.message!=="promise cancelled"&&console.error(n)})}),(()=>{const n=_tmpl$$6.cloneNode(!0),o=t;return typeof o=="function"?use(o,n):t=n,createRenderEffect(i=>{const l=e.width,s=e.height,a={width:"100%",height:"100%",...e.style};return l!==i._v$&&setAttribute(n,"width",i._v$=l),s!==i._v$2&&setAttribute(n,"height",i._v$2=s),i._v$3=style$1(n,a,i._v$3),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()},pool=workerpool.pool();function computeBuckets(e,t){const r=Math.ceil(e.length/t),n=[];let o=0;for(let i=0;i<t;i++){const l=o+r,s=e.subarray(o,l);let a=1/0;for(const f of s)a=Math.min(f,a);let c=-1/0;for(const f of s)c=Math.max(f,c);n.push({min:a,max:c}),o=l}return n}const drawBars=(e,t)=>{const r=e.getContext("2d");if(!r)return;const n=2;r.lineWidth=n,r.clearRect(0,0,e.width,e.height),r.translate(0,e.height/2);for(let o=0;o<t.length;o++){const{min:i,max:l}=t[o];r.beginPath(),r.moveTo(o,l*(e.height/2)+n/2),r.lineTo(o,i*(e.height/2)-n/2),r.stroke()}r.translate(0,-e.height/2)},createDrag=e=>{let t;const[r,n]=createSignal(0),o=s=>{e.onStart?.(s),t=s.clientX,document.body.addEventListener("pointerup",i),document.body.addEventListener("pointerleave",i),document.body.addEventListener("pointermove",l)},i=s=>{e.onFinished?.(s),t=void 0,document.body.removeEventListener("pointerup",i),document.body.removeEventListener("pointerleave",i),document.body.removeEventListener("pointermove",l),n(0)},l=s=>{t!==void 0&&(e.onDrag?.(s),n(s.clientX-t))};return{offset:r,start:o}},range=(e,t,r=1)=>[...new Array(Math.ceil((t-e)/r))].map((n,o)=>o*r),_tmpl$$5=template("<div></div>"),Stick=e=>{const[,t]=splitProps(e,["pos"]);return(()=>{const r=_tmpl$$5.cloneNode(!0);return spread(r,mergeProps(t,{get style(){return{position:"absolute",top:0,left:`${e.width/-2}px`,transform:`translateX(${e.pos*100}cqi)`,width:`${e.width}px`,height:"100%",background:e.background,...e.style}}}),!1,!0),r})()},_tmpl$$4=template("<button><span><span></span></span></button>"),Trigger=e=>{const t=createMemo(()=>player.playing()&&JSON.stringify(player.region())===JSON.stringify(e.region));return(()=>{const r=_tmpl$$4.cloneNode(!0),n=r.firstChild,o=n.firstChild;return r.$$dblclick=i=>i.stopPropagation(),r.$$click=()=>{t()?player.stop():(player.play(state.clip.buffer,e.region),e.onTrigger?.())},addEventListener$1(r,"focus",e.onFocus),o.style.setProperty("font-family","monospace"),o.style.setProperty("font-size","1rem"),insert(o,(()=>{const i=createMemo(()=>!!t());return()=>i()?"\u25A0":"\u25B6"})()),insert(n,createComponent(Show,{get when(){return e.text},children:"\xA0"}),null),insert(n,()=>e.text,null),createRenderEffect(i=>style$1(r,e.style,i)),r})()};delegateEvents(["click","dblclick"]);function createZoom(){const t=Math.pow(2,10),[r,n]=createSignal(32),o=2;return{in:()=>n(i=>Math.max(1,i/o)),out:()=>n(i=>Math.min(t,i*o)),samplesPerPixel:r,inDisabled:()=>r()===1,outDisabled:()=>r()===t}}const debounce$1=(e,t)=>{let r;return n=>{r===void 0&&(e(n),r=setTimeout(()=>{r=void 0},t))}};var FUNC_ERROR_TEXT="Expected a function",NAN=0/0,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max,nativeMin=Math.min,now=function(){return root.Date.now()};function debounce(e,t,r){var n,o,i,l,s,a,c=0,f=!1,m=!1,g=!0;if(typeof e!="function")throw new TypeError(FUNC_ERROR_TEXT);t=toNumber(t)||0,isObject(r)&&(f=!!r.leading,m="maxWait"in r,i=m?nativeMax(toNumber(r.maxWait)||0,t):i,g="trailing"in r?!!r.trailing:g);function u($){var v=n,T=o;return n=o=void 0,c=$,l=e.apply(T,v),l}function d($){return c=$,s=setTimeout(_,t),f?u($):l}function y($){var v=$-a,T=$-c,N=t-v;return m?nativeMin(N,i-T):N}function k($){var v=$-a,T=$-c;return a===void 0||v>=t||v<0||m&&T>=i}function _(){var $=now();if(k($))return x($);s=setTimeout(_,y($))}function x($){return s=void 0,g&&n?u($):(n=o=void 0,l)}function S(){s!==void 0&&clearTimeout(s),c=0,n=a=o=s=void 0}function C(){return s===void 0?l:x(now())}function A(){var $=now(),v=k($);if(n=arguments,o=this,a=$,v){if(s===void 0)return d(a);if(m)return s=setTimeout(_,t),u(a)}return s===void 0&&(s=setTimeout(_,t)),l}return A.cancel=S,A.flush=C,A}function isObject(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toNumber(e){if(typeof e=="number")return e;if(isSymbol(e))return NAN;if(isObject(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=isObject(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_debounce=debounce;const _tmpl$$3=template("<div data-scroll-element><div></div></div>"),_tmpl$2$1=template('<div data-content-element><svg id="zoom-dot" viewBox="0 0 2 2" width="1ch"><circle cx="1" cy="1" r="1"></circle></svg></div>'),_tmpl$3$1=template("<div></div>"),_tmpl$4$1=template("<button>delete</button>"),_tmpl$5$1=template("<button>slice</button>"),_tmpl$6=template("<div data-summary-element></div>"),TILE_WIDTH=400,TILE_HEIGHT=100;let scrollElement,contentElement;const zoom=createZoom(),Waveform=e=>{const t=debounce$1(r=>{if(!scrollElement||!contentElement)return;const n=r.clientX-scrollElement.clientLeft,o=(n+scrollElement.scrollLeft)/contentElement.clientWidth;r.deltaY>0&&!zoom.outDisabled()&&zoom.out(),r.deltaY<0&&!zoom.inDisabled()&&zoom.in(),(!zoom.inDisabled()||!zoom.outDisabled())&&(scrollElement.scrollLeft=contentElement.clientWidth*o-n)},100);return(()=>{const r=_tmpl$$3.cloneNode(!0),n=r.firstChild;r.addEventListener("wheel",i=>{!i.ctrlKey||(i.preventDefault(),t(i))}),r.$$keydown=i=>{i.ctrlKey&&((i.key==="+"||i.key==="=")&&(i.preventDefault(),zoom.in(),i.target.scrollIntoView({inline:"center",block:"nearest"})),(i.key==="-"||i.key==="_")&&(i.preventDefault(),zoom.out(),i.target.scrollIntoView({inline:"center",block:"nearest"})))};const o=scrollElement;return typeof o=="function"?use(o,r):scrollElement=r,r.style.setProperty("overflow","auto"),n.style.setProperty("height","calc(var(--min-btn-dimension) + 20px)"),insert(r,createComponent(WaveformContent,{get buffer(){return e.buffer}}),null),insert(r,createComponent(WaveformSummary,{get buffer(){return e.buffer}}),null),r})()},[zoomCenter,setZoomCenter]=createSignal(0),WaveformContent=e=>{const t=createMemo(()=>createVirtualizer({count:range(0,e.buffer.length/zoom.samplesPerPixel(),TILE_WIDTH).length,getScrollElement:()=>scrollElement,estimateSize:()=>TILE_WIDTH,horizontal:!0})),r=n=>{if(!contentElement)return;const o=contentElement.getBoundingClientRect(),i=n.clientX-o.left;dispatch.setCursor(i/contentElement.clientWidth),dispatch.showCursorControls()};return(()=>{const n=_tmpl$2$1.cloneNode(!0),o=n.firstChild;n.$$dblclick=l=>{r(l),setZoomCenter(state.cursor)};const i=contentElement;return typeof i=="function"?use(i,n):contentElement=n,n.style.setProperty("display","flex"),n.style.setProperty("position","relative"),n.style.setProperty("container-type","inline-size"),o.style.setProperty("position","absolute"),o.style.setProperty("left","-0.5ch"),o.style.setProperty("opacity","0.8"),o.style.setProperty("top","calc(var(--min-btn-dimension) * -1 - 15px)"),insert(n,createComponent(For,{get each(){return t().getVirtualItems()},children:l=>createComponent(WaveformTile,{get buffer(){return e.buffer},get start(){return l.start},length:TILE_WIDTH})}),null),insert(n,createComponent(For,{get each(){return state.regions},children:(l,s)=>createComponent(Slice,{region:l,get index(){return s()},get id(){return l.start.toString()}})}),null),insert(n,createComponent(ActiveRegion,{}),null),insert(n,createComponent(Cursor,{}),null),insert(n,createComponent(Playhead,{}),null),createRenderEffect(l=>{const s=`${e.buffer.length/zoom.samplesPerPixel()}px`,a=e.buffer.numberOfChannels*TILE_HEIGHT+"px",c=`translateX(${zoomCenter()*100}cqi)`;return s!==l._v$&&n.style.setProperty("width",l._v$=s),a!==l._v$2&&n.style.setProperty("height",l._v$2=a),c!==l._v$3&&o.style.setProperty("transform",l._v$3=c),l},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()},ActiveRegion=()=>{const e=createMemo(()=>state.regions[state.selectedRegion!==void 0?state.selectedRegion:-1]);return createComponent(Show,{get when(){return e()},get children(){const t=_tmpl$3$1.cloneNode(!0);return t.style.setProperty("position","absolute"),t.style.setProperty("background","hsl(39deg 100% 50% / 25%)"),t.style.setProperty("pointer-events","none"),createRenderEffect(r=>{const n=(state.clip?.buffer.numberOfChannels||0)*TILE_HEIGHT+"px",o=(e().end-e().start)*100+"cqi",i=e().start*100+"cqi";return n!==r._v$4&&t.style.setProperty("height",r._v$4=n),o!==r._v$5&&t.style.setProperty("width",r._v$5=o),i!==r._v$6&&t.style.setProperty("left",r._v$6=i),r},{_v$4:void 0,_v$5:void 0,_v$6:void 0}),t}})},Slice=e=>{const t=l=>l.preventDefault(),r=createDrag({onStart:()=>{scrollElement?.addEventListener("touchmove",t)},onFinished:()=>{dispatch.healSlice(e.index),dispatch.slice(n()),setZoomCenter(n()),document.getElementById(`slice-${n()}`)?.focus(),scrollElement?.removeEventListener("touchmove",t)}}),n=()=>{if(contentElement){const l=o(),s=e.region.start+r.offset()/contentElement.clientWidth;return Math.max(l.left,Math.min(l.right,s))}return e.region.start},o=()=>{const l=state.clip;if(!l||!contentElement)throw"AAAAAAH";const c=.005/(l.buffer.length/l.buffer.sampleRate),f=state.regions[e.index-1]?.start+c||0,m=e.region.end-c;return{left:f,right:m}},i=createKeyboardMovementHandler(l=>{const s=o(),a=Math.max(s.left,Math.min(s.right,e.region.start+l));dispatch.healSlice(e.index),dispatch.slice(a),setZoomCenter(a),document.getElementById(`slice-${a}`)?.focus()});return[createComponent(Stick,{get pos(){return n()},width:2,background:"black",style:{"box-shadow":"1px 0px 0px white, -1px 0px 0px white"}}),createComponent(Show,{get when(){return state.mode==="edit"},get children(){return createComponent(Stick,{get pos(){return n()},width:30,background:"hsl(0deg 0% 25% / 30%)",onPointerDown:l=>{r.start(l)},onFocus:()=>setZoomCenter(n()),tabIndex:0,onkeydown:i,get id(){return`slice-${e.region.start}`}})}}),(()=>{const l=_tmpl$3$1.cloneNode(!0);return l.style.setProperty("position","absolute"),l.style.setProperty("display","flex"),l.style.setProperty("top","calc(-1 * var(--min-btn-dimension))"),insert(l,createComponent(Show,{get when(){return state.mode==="delete"},get children(){const s=_tmpl$4$1.cloneNode(!0);return s.$$click=()=>{dispatch.healSlice(e.index),state.selectedRegion!==void 0&&e.index<=state.selectedRegion&&dispatch.selectRegion(state.selectedRegion-1)},s}}),null),insert(l,createComponent(Trigger,{get region(){return e.region},get text(){return(e.index+1).toString()},onFocus:()=>setZoomCenter(n()),onTrigger:()=>{setZoomCenter(e.region.start),state.selectedRegion!==void 0&&dispatch.selectRegion(e.index)}}),null),createRenderEffect(()=>l.style.setProperty("transform",`translateX(${n()*100}cqi)`)),l})()]},createKeyboardMovementHandler=e=>t=>{if(!(!scrollElement||!contentElement||!(t.target instanceof Element))&&["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","PageDown","PageUp","Home","End"].includes(t.key)){t.preventDefault();const n=10/contentElement.clientWidth,o=t.ctrlKey?n*10:n;t.key==="ArrowRight"&&(e(o),t.target.getBoundingClientRect().right>scrollElement.getBoundingClientRect().right&&t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="ArrowLeft"&&(e(-o),t.target.getBoundingClientRect().left<scrollElement.getBoundingClientRect().left&&t.target.scrollIntoView({inline:"center",block:"nearest"}));const l=scrollElement.clientWidth/contentElement.clientWidth;t.key==="PageDown"&&(e(l),t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="PageUp"&&(e(-l),t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="Home"&&(e(-1),t.target.scrollIntoView({inline:"center",block:"nearest"})),t.key==="End"&&(e(1),t.target.scrollIntoView({inline:"center",block:"nearest"}))}},Cursor=e=>{const t=s=>s.preventDefault(),r=createDrag({onStart:()=>{dispatch.showCursorControls(),scrollElement?.addEventListener("touchmove",t)},onFinished:()=>{dispatch.setCursor(n()),scrollElement?.removeEventListener("touchmove",t),setZoomCenter(state.cursor)}}),n=()=>{if(contentElement){const s=state.cursor+r.offset()/contentElement.clientWidth;return Math.max(0,Math.min(1,s))}return state.cursor},o=createMemo(()=>state.regions[sortedIndex(state.regions.map(s=>s.start),state.cursor)]?.start||1),i=createKeyboardMovementHandler(s=>{dispatch.showCursorControls(),dispatch.setCursor(state.cursor+s),setZoomCenter(state.cursor)});let l;return[(()=>{const s=_tmpl$3$1.cloneNode(!0);return s.style.setProperty("pointer-events","none"),insert(s,createComponent(Stick,{id:"cursor",get pos(){return n()},width:2,background:"repeating-linear-gradient(orange 0px, orange 4px, transparent 4px, transparent 8px)"})),s})(),createComponent(Show,{get when(){return state.mode==="slice"},get children(){return createComponent(Stick,{ref(s){const a=l;typeof a=="function"?a(s):l=s},get pos(){return n()},width:30,background:"hsl(39deg 100% 50% / 50%)",get onPointerDown(){return r.start},onKeyDown:i,onFocus:()=>setZoomCenter(n()),tabIndex:0})}}),createComponent(Show,{get when(){return state.cursorControlsVisible},get children(){const s=_tmpl$3$1.cloneNode(!0);return addEventListener$1(s,"keydown",i,!0),s.$$dblclick=a=>a.stopPropagation(),s.style.setProperty("position","absolute"),s.style.setProperty("display","flex"),s.style.setProperty("top","calc(-1 * var(--min-btn-dimension))"),insert(s,createComponent(Show,{get when(){return state.mode==="slice"},get children(){const a=_tmpl$5$1.cloneNode(!0);return a.$$click=()=>{const c=dispatch.slice(state.cursor);dispatch.hideCursorControls(),l?.focus(),setZoomCenter(state.cursor),state.selectedRegion!==void 0&&dispatch.selectRegion(c)},a}}),null),insert(s,createComponent(Trigger,{get region(){return{start:state.cursor,end:o()}},onTrigger:()=>setZoomCenter(state.cursor)}),null),createRenderEffect(()=>s.style.setProperty("transform",`translateX(${n()*100}cqi)`)),s}})]},Playhead=()=>createComponent(Show,{get when(){return player.playing()},get children(){return createComponent(Stick,{get pos(){return player.progress()},width:2,background:"orange"})}}),WaveformSummary=e=>{let t;const r=()=>{const[a,c]=createSignal(0),[f,m]=createSignal(0);return useAnimationFrame(()=>{scrollElement&&contentElement&&(c(scrollElement.scrollLeft/contentElement.clientWidth*100),m(scrollElement.clientWidth/contentElement.clientWidth*100))}),(()=>{const g=_tmpl$3$1.cloneNode(!0);return g.style.setProperty("position","absolute"),g.style.setProperty("bottom","0"),g.style.setProperty("height","39px"),g.style.setProperty("background","#8888"),createRenderEffect(u=>{const d=`min(100cqi, max(${f()}cqi, 2px))`,y=a()+"cqi";return d!==u._v$7&&g.style.setProperty("width",u._v$7=d),y!==u._v$8&&g.style.setProperty("left",u._v$8=y),u},{_v$7:void 0,_v$8:void 0}),g})()},n=a=>{if(!t||!contentElement||!scrollElement)return;const c=t.getBoundingClientRect(),m=(a.clientX-c.left)/c.width;scrollElement.scrollLeft=contentElement.getBoundingClientRect().width*m-scrollElement.getBoundingClientRect().width/2},o=createDrag({onStart:n,onDrag:n}),[i,l]=createSignal(800);window.setWidth=l;const s=new ResizeObserver(lodash_debounce(()=>{t&&l(t.clientWidth)},300,{trailing:!0}));return onMount(()=>{t&&s.observe(t)}),onCleanup(()=>{t&&s.unobserve(t)}),(()=>{const a=_tmpl$6.cloneNode(!0);addEventListener$1(a,"pointerdown",o.start,!0);const c=t;return typeof c=="function"?use(c,a):t=a,a.style.setProperty("position","sticky"),a.style.setProperty("left","0"),a.style.setProperty("height","50px"),a.style.setProperty("touch-action","none"),a.style.setProperty("container-type","inline-size"),insert(a,createComponent(For,{get each(){return range(0,e.buffer.numberOfChannels)},children:f=>createComponent(ChannelSegment,{get data(){return e.buffer.getChannelData(f)},get width(){return i()},height:25,get numBuckets(){return i()},style:{position:"absolute",bottom:0,height:"39px"}})}),null),insert(a,createComponent(r,{}),null),insert(a,createComponent(Stick,{get pos(){return state.cursor},width:2,background:"repeating-linear-gradient(orange 0px, orange 2px, transparent 2px, transparent 4px)",style:{height:"50px",top:"unset",bottom:0}}),null),insert(a,createComponent(For,{get each(){return state.regions},children:({start:f})=>createComponent(Stick,{pos:f,background:"black",style:{height:"10px"},width:2})}),null),insert(a,createComponent(ActiveRegion,{}),null),insert(a,createComponent(Playhead,{}),null),a})()},WaveformTile=e=>(()=>{const t=_tmpl$3$1.cloneNode(!0);return t.style.setProperty("display","flex"),t.style.setProperty("flex-direction","column"),t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("left","0"),t.style.setProperty("width","400px"),insert(t,createComponent(For,{get each(){return range(0,e.buffer.numberOfChannels)},children:r=>{const n=createMemo(()=>e.buffer.getChannelData(r).slice(e.start*zoom.samplesPerPixel(),(e.start+e.length)*zoom.samplesPerPixel()));return createComponent(ChannelSegment,{get data(){return n()},width:TILE_WIDTH,height:TILE_HEIGHT,get numBuckets(){return n().length/zoom.samplesPerPixel()}})}})),createRenderEffect(()=>t.style.setProperty("transform",`translateX(${e.start}px)`)),t})();state.mode;delegateEvents(["keydown","dblclick","click","pointerdown"]);const Controls$1="",_tmpl$$2=template('<div class="controls"><fieldset><legend>mode:</legend><div><input type="radio" id="slice" value="slice"><label for="slice">slice</label></div><div><input type="radio" id="edit" value="edit"><label for="edit">edit</label></div><div><input type="radio" id="delete" value="delete"><label for="delete">delete</label></div></fieldset><button>zoom in</button><button>zoom out</button></div>'),Controls=()=>(()=>{const e=_tmpl$$2.cloneNode(!0),t=e.firstChild,r=t.firstChild,n=r.nextSibling,o=n.firstChild,i=n.nextSibling,l=i.firstChild,s=i.nextSibling,a=s.firstChild,c=t.nextSibling,f=c.nextSibling;return t.addEventListener("change",m=>{switch(m.target.value){case"slice":return dispatch.setMode("slice");case"edit":return dispatch.setMode("edit");case"delete":return dispatch.setMode("delete")}}),c.$$click=()=>{zoom.in(),document.getElementById("zoom-dot")?.scrollIntoView({inline:"center",block:"nearest"})},f.$$click=()=>{zoom.out(),document.getElementById("zoom-dot")?.scrollIntoView({inline:"center",block:"nearest"})},createRenderEffect(m=>{const g=zoom.inDisabled(),u=zoom.outDisabled();return g!==m._v$&&(c.disabled=m._v$=g),u!==m._v$2&&(f.disabled=m._v$2=u),m},{_v$:void 0,_v$2:void 0}),createRenderEffect(()=>o.checked=state.mode==="slice"),createRenderEffect(()=>l.checked=state.mode==="edit"),createRenderEffect(()=>a.checked=state.mode==="delete"),e})();delegateEvents(["click"]);const formatOf=e=>{switch(e.numberOfChannels){case 1:return"mono";case 2:return"stereo";default:return e.numberOfChannels+" channels"}},_tmpl$$1=template("<div><button>clear</button><div><p></p><p>s</p><p></p></div></div>"),Details=e=>(()=>{const t=_tmpl$$1.cloneNode(!0),r=t.firstChild,n=r.nextSibling,o=n.firstChild,i=o.nextSibling,l=i.firstChild,s=i.nextSibling;return t.style.setProperty("display","flex"),t.style.setProperty("align-items","center"),t.style.setProperty("word-break","break-word"),r.$$click=()=>{confirm("Are you sure?")&&(dispatch.reset(),player.stop())},n.style.setProperty("display","flex"),n.style.setProperty("flex-wrap","wrap"),n.style.setProperty("gap","1ch"),n.style.setProperty("padding","1ch"),n.style.setProperty("margin-inline-start","auto"),insert(o,()=>e.clip.name),insert(i,()=>(e.clip.buffer.length/e.clip.buffer.sampleRate).toFixed(2),l),insert(s,()=>formatOf(e.clip.buffer)),t})();delegateEvents(["click"]);const style="",_tmpl$=template('<div class="fixed-top"></div>'),_tmpl$2=template("<div></div>"),_tmpl$3=template('<div style="display: grid; position: relative;"><button data-details-link>...</button></div>'),_tmpl$4=template('<div id="region-details"><div id="region-details-header"><button>back</button><h2></h2><button></button></div><div id="region-details-playback"><button>spam</button></div><div id="region-details-footer"><button>&#8249;</button><button>&#8250;</button></div></div>'),_tmpl$5=template('<div id="bottom-panel"></div>'),App=()=>createComponent(Show,{get when(){return state.clip},get fallback(){return createComponent(AudioInput,{get onChange(){return dispatch.setClip}})},get children(){return[(()=>{const e=_tmpl$.cloneNode(!0);return insert(e,createComponent(Details,{get clip(){return state.clip}}),null),insert(e,createComponent(Controls,{}),null),insert(e,createComponent(Waveform,{get buffer(){return state.clip.buffer}}),null),e})(),createComponent(BottomPanel,{})]}}),Pads=()=>(()=>{const e=_tmpl$2.cloneNode(!0);return e.style.setProperty("display","grid"),e.style.setProperty("grid-template-columns","repeat( auto-fit, minmax(100px, 1fr) )"),e.style.setProperty("grid-auto-rows","100px"),insert(e,createComponent(For,{get each(){return state.regions},children:(t,r)=>(()=>{const n=_tmpl$3.cloneNode(!0),o=n.firstChild;return insert(n,createComponent(Trigger,{region:t,style:{height:"100%",width:"100%","z-index":0,"text-align":"start"},onTrigger:()=>{setZoomCenter(t.start),scrollElement&&contentElement&&(scrollElement.scrollLeft=t.start*contentElement.clientWidth-scrollElement.clientWidth/2)},get text(){return(r()+1).toString()}}),o),o.$$click=()=>{dispatch.selectRegion(r()),setZoomCenter(state.regions[r()].start);const i=document.querySelector("#region-details button");i instanceof HTMLElement&&i.focus(),scrollRegionIntoView(state.regions[r()])},o.style.setProperty("position","absolute"),o.style.setProperty("right","0"),createRenderEffect(()=>setAttribute(n,"id",`region-${r()}`)),n})()})),e})(),RegionDetails=e=>{const t=()=>{const n=e.index+1;n<state.regions.length&&(dispatch.selectRegion(n),setZoomCenter(state.regions[n].start),scrollRegionIntoView(state.regions[n]))},r=()=>{const n=e.index-1;n>-1&&(dispatch.selectRegion(n),setZoomCenter(state.regions[n].start),scrollRegionIntoView(state.regions[n]))};return(()=>{const n=_tmpl$4.cloneNode(!0),o=n.firstChild,i=o.firstChild,l=i.nextSibling,s=l.nextSibling,a=o.nextSibling,c=a.firstChild,f=a.nextSibling,m=f.firstChild,g=m.nextSibling;return n.style.setProperty("display","flex"),n.style.setProperty("flex-direction","column"),o.style.setProperty("display","flex"),o.style.setProperty("align-items","center"),i.$$click=()=>{const u=e.index;dispatch.selectRegion(void 0);const d=document.querySelector(`#region-${u} [data-details-link]`);d instanceof HTMLElement&&d.focus()},l.style.setProperty("margin-inline","1rem"),l.style.setProperty("margin-inline-start","auto"),insert(l,()=>e.index+1),s.$$click=()=>{const u=state.clip?.buffer,d=state.regions[e.index];u&&d&&download(u,d)},insert(s,()=>navigator.share?"share":"download"),a.$$keydown=u=>{u.key==="ArrowRight"&&(u.preventDefault(),t()),u.key==="ArrowLeft"&&(u.preventDefault(),r())},a.style.setProperty("flex-grow","1"),a.style.setProperty("display","grid"),a.style.setProperty("place-content","center"),a.style.setProperty("gap","1rem"),a.style.setProperty("grid-auto-flow","column"),insert(a,createComponent(Trigger,{get region(){return state.regions[e.index]}}),c),c.$$click=()=>{!state.clip||player.play(state.clip.buffer,state.regions[e.index])},f.style.setProperty("display","flex"),f.style.setProperty("justify-content","center"),m.$$click=r,m.style.setProperty("font-size","1rem"),g.$$click=t,g.style.setProperty("font-size","1rem"),createRenderEffect(u=>{const d=e.index===0,y=e.index===state.regions.length-1;return d!==u._v$&&(m.disabled=u._v$=d),y!==u._v$2&&(g.disabled=u._v$2=y),u},{_v$:void 0,_v$2:void 0}),n})()},BottomPanel=()=>(()=>{const e=_tmpl$5.cloneNode(!0);return insert(e,createComponent(Show,{get when(){return state.selectedRegion!==void 0},fallback:Pads,get children(){return createComponent(RegionDetails,{get index(){return state.selectedRegion}})}})),e})(),scrollRegionIntoView=e=>{scrollElement&&contentElement&&(scrollElement.scrollLeft=e.start*contentElement.clientWidth-scrollElement.clientWidth/2)};delegateEvents(["click","keydown"]);render(App,document.getElementById("root"));
